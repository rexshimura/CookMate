(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var am={exports:{}},Vl={};var Cy;function L1(){if(Cy)return Vl;Cy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:i,key:h,ref:o!==void 0?o:null,props:u}}return Vl.Fragment=e,Vl.jsx=n,Vl.jsxs=n,Vl}var Iy;function U1(){return Iy||(Iy=1,am.exports=L1()),am.exports}var f=U1(),jy={};const mx=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},P1=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],h=s[n++],g=s[n++],p=((o&7)<<18|(u&63)<<12|(h&63)<<6|g&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const u=s[n++],h=s[n++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},px={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,g=h?s[o+1]:0,p=o+2<s.length,y=p?s[o+2]:0,b=u>>2,w=(u&3)<<4|g>>4;let N=(g&15)<<2|y>>6,V=y&63;p||(V=64,h||(N=64)),i.push(n[b],n[w],n[N],n[V])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(mx(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):P1(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const w=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||g==null||y==null||w==null)throw new z1;const N=u<<2|g>>4;if(i.push(N),y!==64){const V=g<<4&240|y>>2;if(i.push(V),w!==64){const M=y<<6&192|w;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class z1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const B1=function(s){const e=mx(s);return px.encodeByteArray(e,!0)},fd=function(s){return B1(s).replace(/\./g,"")},gx=function(s){try{return px.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function q1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const F1=()=>q1().__FIREBASE_DEFAULTS__,H1=()=>{if(typeof process>"u"||typeof jy>"u")return;const s=jy.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},G1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&gx(s[1]);return e&&JSON.parse(e)},Ld=()=>{try{return F1()||H1()||G1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},vx=s=>{var e,n;return(n=(e=Ld())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[s]},$1=s=>{const e=vx(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},yx=()=>{var s;return(s=Ld())===null||s===void 0?void 0:s.config},_x=s=>{var e;return(e=Ld())===null||e===void 0?void 0:e[`_${s}`]};class Q1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function K1(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[fd(JSON.stringify(n)),fd(JSON.stringify(h)),""].join(".")}function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Y1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function X1(){var s;const e=(s=Ld())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function J1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function W1(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Z1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eT(){const s=on();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function tT(){return!X1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nT(){try{return typeof indexedDB=="object"}catch{return!1}}function rT(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}const sT="FirebaseError";class _s extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=sT,Object.setPrototypeOf(this,_s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cu.prototype.create)}}class cu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?iT(u,i):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new _s(o,g,i)}}function iT(s,e){return s.replace(aT,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const aT=/\{\$([^}]+)}/g;function oT(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function md(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const u=s[o],h=e[o];if(Dy(u)&&Dy(h)){if(!md(u,h))return!1}else if(u!==h)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Dy(s){return s!==null&&typeof s=="object"}function du(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function zl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,u]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Bl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function lT(s,e){const n=new uT(s,e);return n.subscribe.bind(n)}class uT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");cT(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=om),o.error===void 0&&(o.error=om),o.complete===void 0&&(o.complete=om);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cT(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function om(){}function Lt(s){return s&&s._delegate?s._delegate:s}class la{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const na="[DEFAULT]";class dT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Q1;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fT(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);i===g&&h.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),u=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;u.add(e),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:hT(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hT(s){return s===na?void 0:s}function fT(s){return s.instantiationMode==="EAGER"}class mT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ze;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ze||(ze={}));const pT={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},gT=ze.INFO,vT={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},yT=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=vT[e];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sp{constructor(e){this.name=e,this._logLevel=gT,this._logHandler=yT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const _T=(s,e)=>e.some(n=>s instanceof n);let ky,Oy;function xT(){return ky||(ky=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bT(){return Oy||(Oy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xx=new WeakMap,Im=new WeakMap,bx=new WeakMap,lm=new WeakMap,ip=new WeakMap;function wT(s){const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n(_i(s.result)),o()},h=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&xx.set(n,s)}).catch(()=>{}),ip.set(e,s),e}function ET(s){if(Im.has(s))return;const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});Im.set(s,e)}let jm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Im.get(s);if(e==="objectStoreNames")return s.objectStoreNames||bx.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _i(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function TT(s){jm=s(jm)}function ST(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(um(this),e,...n);return bx.set(i,e.sort?e.sort():[e]),_i(i)}:bT().includes(s)?function(...e){return s.apply(um(this),e),_i(xx.get(this))}:function(...e){return _i(s.apply(um(this),e))}}function NT(s){return typeof s=="function"?ST(s):(s instanceof IDBTransaction&&ET(s),_T(s,xT())?new Proxy(s,jm):s)}function _i(s){if(s instanceof IDBRequest)return wT(s);if(lm.has(s))return lm.get(s);const e=NT(s);return e!==s&&(lm.set(s,e),ip.set(e,s)),e}const um=s=>ip.get(s);function AT(s,e,{blocked:n,upgrade:i,blocking:o,terminated:u}={}){const h=indexedDB.open(s,e),g=_i(h);return i&&h.addEventListener("upgradeneeded",p=>{i(_i(h.result),p.oldVersion,p.newVersion,_i(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const RT=["get","getKey","getAll","getAllKeys","count"],CT=["put","add","delete","clear"],cm=new Map;function My(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(cm.get(e))return cm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=CT.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||RT.includes(n)))return;const u=async function(h,...g){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),o&&p.done]))[0]};return cm.set(e,u),u}TT(s=>({...s,get:(e,n,i)=>My(e,n)||s.get(e,n,i),has:(e,n)=>!!My(e,n)||s.has(e,n)}));class IT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jT(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function jT(s){const e=s.getComponent();return e?.type==="VERSION"}const Dm="@firebase/app",Vy="0.10.13";const fs=new sp("@firebase/app"),DT="@firebase/app-compat",kT="@firebase/analytics-compat",OT="@firebase/analytics",MT="@firebase/app-check-compat",VT="@firebase/app-check",LT="@firebase/auth",UT="@firebase/auth-compat",PT="@firebase/database",zT="@firebase/data-connect",BT="@firebase/database-compat",qT="@firebase/functions",FT="@firebase/functions-compat",HT="@firebase/installations",GT="@firebase/installations-compat",$T="@firebase/messaging",QT="@firebase/messaging-compat",KT="@firebase/performance",YT="@firebase/performance-compat",XT="@firebase/remote-config",JT="@firebase/remote-config-compat",WT="@firebase/storage",ZT="@firebase/storage-compat",e2="@firebase/firestore",t2="@firebase/vertexai-preview",n2="@firebase/firestore-compat",r2="firebase",s2="10.14.1";const km="[DEFAULT]",i2={[Dm]:"fire-core",[DT]:"fire-core-compat",[OT]:"fire-analytics",[kT]:"fire-analytics-compat",[VT]:"fire-app-check",[MT]:"fire-app-check-compat",[LT]:"fire-auth",[UT]:"fire-auth-compat",[PT]:"fire-rtdb",[zT]:"fire-data-connect",[BT]:"fire-rtdb-compat",[qT]:"fire-fn",[FT]:"fire-fn-compat",[HT]:"fire-iid",[GT]:"fire-iid-compat",[$T]:"fire-fcm",[QT]:"fire-fcm-compat",[KT]:"fire-perf",[YT]:"fire-perf-compat",[XT]:"fire-rc",[JT]:"fire-rc-compat",[WT]:"fire-gcs",[ZT]:"fire-gcs-compat",[e2]:"fire-fst",[n2]:"fire-fst-compat",[t2]:"fire-vertex","fire-js":"fire-js",[r2]:"fire-js-all"};const pd=new Map,a2=new Map,Om=new Map;function Ly(s,e){try{s.container.addComponent(e)}catch(n){fs.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function fo(s){const e=s.name;if(Om.has(e))return fs.debug(`There were multiple attempts to register component ${e}.`),!1;Om.set(e,s);for(const n of pd.values())Ly(n,s);for(const n of a2.values())Ly(n,s);return!0}function ap(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Er(s){return s.settings!==void 0}const o2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new cu("app","Firebase",o2);class l2{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new la("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}const To=s2;function wx(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:km,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw xi.create("bad-app-name",{appName:String(o)});if(n||(n=yx()),!n)throw xi.create("no-options");const u=pd.get(o);if(u){if(md(n,u.options)&&md(i,u.config))return u;throw xi.create("duplicate-app",{appName:o})}const h=new mT(o);for(const p of Om.values())h.addComponent(p);const g=new l2(n,i,h);return pd.set(o,g),g}function Ex(s=km){const e=pd.get(s);if(!e&&s===km&&yx())return wx();if(!e)throw xi.create("no-app",{appName:s});return e}function bi(s,e,n){var i;let o=(i=i2[s])!==null&&i!==void 0?i:s;n&&(o+=`-${n}`);const u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const g=[`Unable to register library "${o}" with version "${e}":`];u&&g.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&g.push("and"),h&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fs.warn(g.join(" "));return}fo(new la(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const u2="firebase-heartbeat-database",c2=1,Wl="firebase-heartbeat-store";let dm=null;function Tx(){return dm||(dm=AT(u2,c2,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Wl)}catch(n){console.warn(n)}}}}).catch(s=>{throw xi.create("idb-open",{originalErrorMessage:s.message})})),dm}async function d2(s){try{const n=(await Tx()).transaction(Wl),i=await n.objectStore(Wl).get(Sx(s));return await n.done,i}catch(e){if(e instanceof _s)fs.warn(e.message);else{const n=xi.create("idb-get",{originalErrorMessage:e?.message});fs.warn(n.message)}}}async function Uy(s,e){try{const i=(await Tx()).transaction(Wl,"readwrite");await i.objectStore(Wl).put(e,Sx(s)),await i.done}catch(n){if(n instanceof _s)fs.warn(n.message);else{const i=xi.create("idb-set",{originalErrorMessage:n?.message});fs.warn(i.message)}}}function Sx(s){return`${s.name}!${s.options.appId}`}const h2=1024,f2=720*60*60*1e3;class m2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new g2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Py();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const g=new Date(h.date).valueOf();return Date.now()-g<=f2}),this._storage.overwrite(this._heartbeatsCache))}catch(i){fs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Py(),{heartbeatsToSend:i,unsentEntries:o}=p2(this._heartbeatsCache.heartbeats),u=fd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return fs.warn(n),""}}}function Py(){return new Date().toISOString().substring(0,10)}function p2(s,e=h2){const n=[];let i=s.slice();for(const o of s){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),zy(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),zy(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class g2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nT()?rT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await d2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Uy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Uy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function zy(s){return fd(JSON.stringify({version:2,heartbeats:s})).length}function v2(s){fo(new la("platform-logger",e=>new IT(e),"PRIVATE")),fo(new la("heartbeat",e=>new m2(e),"PRIVATE")),bi(Dm,Vy,s),bi(Dm,Vy,"esm2017"),bi("fire-js","")}v2("");var y2="firebase",_2="10.14.1";bi(y2,_2,"app");function op(s,e){var n={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(n[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(s);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(s,i[o])&&(n[i[o]]=s[i[o]]);return n}function Nx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const x2=Nx,Ax=new cu("auth","Firebase",Nx());const gd=new sp("@firebase/auth");function b2(s,...e){gd.logLevel<=ze.WARN&&gd.warn(`Auth (${To}): ${s}`,...e)}function nd(s,...e){gd.logLevel<=ze.ERROR&&gd.error(`Auth (${To}): ${s}`,...e)}function ar(s,...e){throw lp(s,...e)}function Tr(s,...e){return lp(s,...e)}function Rx(s,e,n){const i=Object.assign(Object.assign({},x2()),{[e]:n});return new cu("auth","Firebase",i).create(e,{appName:s.name})}function cs(s){return Rx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lp(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return Ax.create(s,...e)}function we(s,e,...n){if(!s)throw lp(e,...n)}function as(s){const e="INTERNAL ASSERTION FAILED: "+s;throw nd(e),new Error(e)}function ms(s,e){s||as(e)}function Mm(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function w2(){return By()==="http:"||By()==="https:"}function By(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}function E2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(w2()||W1()||"connection"in navigator)?navigator.onLine:!0}function T2(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class hu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ms(n>e,"Short delay should be less than long delay!"),this.isMobile=Y1()||Z1()}get(){return E2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function up(s,e){ms(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Cx{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;as("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;as("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;as("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const S2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const N2=new hu(3e4,6e4);function Ni(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function xs(s,e,n,i,o={}){return Ix(s,o,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const g=du(Object.assign({key:s.config.apiKey},h)).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const y=Object.assign({method:e,headers:p},u);return J1()||(y.referrerPolicy="no-referrer"),Cx.fetch()(jx(s,s.config.apiHost,n,g),y)})}async function Ix(s,e,n){s._canInitEmulator=!1;const i=Object.assign(Object.assign({},S2),e);try{const o=new R2(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Xc(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const g=u.ok?h.errorMessage:h.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xc(s,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Xc(s,"email-already-in-use",h);if(p==="USER_DISABLED")throw Xc(s,"user-disabled",h);const b=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Rx(s,b,y);ar(s,b)}}catch(o){if(o instanceof _s)throw o;ar(s,"network-request-failed",{message:String(o)})}}async function fu(s,e,n,i,o={}){const u=await xs(s,e,n,i,o);return"mfaPendingCredential"in u&&ar(s,"multi-factor-auth-required",{_serverResponse:u}),u}function jx(s,e,n,i){const o=`${e}${n}?${i}`;return s.config.emulator?up(s.config,o):`${s.config.apiScheme}://${o}`}function A2(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class R2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Tr(this.auth,"network-request-failed")),N2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xc(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Tr(s,e,i);return o.customData._tokenResponse=n,o}function qy(s){return s!==void 0&&s.enterprise!==void 0}class C2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return A2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function I2(s,e){return xs(s,"GET","/v2/recaptchaConfig",Ni(s,e))}async function j2(s,e){return xs(s,"POST","/v1/accounts:delete",e)}async function Dx(s,e){return xs(s,"POST","/v1/accounts:lookup",e)}function $l(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function D2(s,e=!1){const n=Lt(s),i=await n.getIdToken(e),o=cp(i);we(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:i,authTime:$l(hm(o.auth_time)),issuedAtTime:$l(hm(o.iat)),expirationTime:$l(hm(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function hm(s){return Number(s)*1e3}function cp(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return nd("JWT malformed, contained fewer than 3 sections"),null;try{const o=gx(n);return o?JSON.parse(o):(nd("Failed to decode base64 JWT payload"),null)}catch(o){return nd("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Fy(s){const e=cp(s);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function mo(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof _s&&k2(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function k2({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class O2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Vm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$l(this.lastLoginAt),this.creationTime=$l(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vd(s){var e;const n=s.auth,i=await s.getIdToken(),o=await mo(s,Dx(n,{idToken:i}));we(o?.users.length,n,"internal-error");const u=o.users[0];s._notifyReloadListener(u);const h=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?kx(u.providerUserInfo):[],g=V2(s.providerData,h),p=s.isAnonymous,y=!(s.email&&u.passwordHash)&&!g?.length,b=p?y:!1,w={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:g,metadata:new Vm(u.createdAt,u.lastLoginAt),isAnonymous:b};Object.assign(s,w)}async function M2(s){const e=Lt(s);await vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function V2(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function kx(s){return s.map(e=>{var{providerId:n}=e,i=op(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function L2(s,e){const n=await Ix(s,{},async()=>{const i=du({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,h=jx(s,o,"/v1/token",`key=${u}`),g=await s._getAdditionalHeaders();return g["Content-Type"]="application/x-www-form-urlencoded",Cx.fetch()(h,{method:"POST",headers:g,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function U2(s,e){return xs(s,"POST","/v2/accounts:revokeToken",Ni(s,e))}class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=Fy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:u}=await L2(e,n);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:u}=n,h=new lo;return i&&(we(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(we(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(we(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return as("not implemented")}}function hi(s,e){we(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class os{constructor(e){var{uid:n,auth:i,stsTokenManager:o}=e,u=op(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new O2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Vm(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await mo(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return D2(this,e)}reload(){return M2(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new os(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await vd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Er(this.auth.app))return Promise.reject(cs(this.auth));const e=await this.getIdToken();return await mo(this,j2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,o,u,h,g,p,y,b;const w=(i=n.displayName)!==null&&i!==void 0?i:void 0,N=(o=n.email)!==null&&o!==void 0?o:void 0,V=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,M=(h=n.photoURL)!==null&&h!==void 0?h:void 0,z=(g=n.tenantId)!==null&&g!==void 0?g:void 0,L=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,J=(y=n.createdAt)!==null&&y!==void 0?y:void 0,X=(b=n.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:Z,emailVerified:ue,isAnonymous:ye,providerData:ge,stsTokenManager:I}=n;we(Z&&I,e,"internal-error");const S=lo.fromJSON(this.name,I);we(typeof Z=="string",e,"internal-error"),hi(w,e.name),hi(N,e.name),we(typeof ue=="boolean",e,"internal-error"),we(typeof ye=="boolean",e,"internal-error"),hi(V,e.name),hi(M,e.name),hi(z,e.name),hi(L,e.name),hi(J,e.name),hi(X,e.name);const A=new os({uid:Z,auth:e,email:N,emailVerified:ue,displayName:w,isAnonymous:ye,photoURL:M,phoneNumber:V,tenantId:z,stsTokenManager:S,createdAt:J,lastLoginAt:X});return ge&&Array.isArray(ge)&&(A.providerData=ge.map(D=>Object.assign({},D))),L&&(A._redirectEventId=L),A}static async _fromIdTokenResponse(e,n,i=!1){const o=new lo;o.updateFromServerResponse(n);const u=new os({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await vd(u),u}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];we(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?kx(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,g=new lo;g.updateFromIdToken(i);const p=new os({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Vm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,y),p}}const Hy=new Map;function ls(s){ms(s instanceof Function,"Expected a class definition");let e=Hy.get(s);return e?(ms(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Hy.set(s,e),e)}class Ox{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ox.type="NONE";const Gy=Ox;function rd(s,e,n){return`firebase:${s}:${e}:${n}`}class uo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=rd(this.userKey,o.apiKey,u),this.fullPersistenceKey=rd("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?os._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new uo(ls(Gy),e,i);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||ls(Gy);const h=rd(i,e.config.apiKey,e.name);let g=null;for(const y of n)try{const b=await y._get(h);if(b){const w=os._fromJSON(e,b);y!==u&&(g=w),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new uo(u,e,i):(u=p[0],g&&await u._set(h,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(h)}catch{}})),new uo(u,e,i))}}function $y(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ux(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zx(e))return"Blackberry";if(Bx(e))return"Webos";if(Vx(e))return"Safari";if((e.includes("chrome/")||Lx(e))&&!e.includes("edge/"))return"Chrome";if(Px(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function Mx(s=on()){return/firefox\//i.test(s)}function Vx(s=on()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lx(s=on()){return/crios\//i.test(s)}function Ux(s=on()){return/iemobile/i.test(s)}function Px(s=on()){return/android/i.test(s)}function zx(s=on()){return/blackberry/i.test(s)}function Bx(s=on()){return/webos/i.test(s)}function dp(s=on()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function P2(s=on()){var e;return dp(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function z2(){return eT()&&document.documentMode===10}function qx(s=on()){return dp(s)||Px(s)||Bx(s)||zx(s)||/windows phone/i.test(s)||Ux(s)}function Fx(s,e=[]){let n;switch(s){case"Browser":n=$y(on());break;case"Worker":n=`${$y(on())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${To}/${i}`}class B2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((h,g)=>{try{const p=e(u);h(p)}catch(p){g(p)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function q2(s,e={}){return xs(s,"GET","/v2/passwordPolicy",Ni(s,e))}const F2=6;class H2{constructor(e){var n,i,o,u;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=h.minPasswordLength)!==null&&n!==void 0?n:F2,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,o,u,h,g;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(g=p.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),p}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class G2{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qy(this),this.idTokenSubscription=new Qy(this),this.beforeStateQueue=new B2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ax,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ls(n)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await uo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Dx(this,{idToken:e}),i=await os._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Er(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(g,g))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,g=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===g)&&p?.user&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=T2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Er(this.app))return Promise.reject(cs(this));const n=e?Lt(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Er(this.app)?Promise.reject(cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Er(this.app)?Promise.reject(cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ls(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await q2(this),n=new H2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await U2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ls(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await uo.create(this,[ls(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(g,this,"internal-error"),g.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,o);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&b2(`Error while retrieving App Check token: ${n.error}`),n?.token}}function ma(s){return Lt(s)}class Qy{constructor(e){this.auth=e,this.observer=null,this.addObserver=lT(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ud={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $2(s){Ud=s}function Hx(s){return Ud.loadJS(s)}function Q2(){return Ud.recaptchaEnterpriseScript}function K2(){return Ud.gapiScript}function Y2(s){return`__${s}${Math.floor(Math.random()*1e6)}`}const X2="recaptcha-enterprise",J2="NO_RECAPTCHA";class W2{constructor(e){this.type=X2,this.auth=ma(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,g)=>{I2(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new C2(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,h(y.siteKey)}}).catch(p=>{g(p)})})}function o(u,h,g){const p=window.grecaptcha;qy(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(y=>{h(y)}).catch(()=>{h(J2)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((u,h)=>{i(this.auth).then(g=>{if(!n&&qy(window.grecaptcha))o(g,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Q2();p.length!==0&&(p+=g),Hx(p).then(()=>{o(g,u,h)}).catch(y=>{h(y)})}}).catch(g=>{h(g)})})}}async function Ky(s,e,n,i=!1){const o=new W2(s);let u;try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const h=Object.assign({},e);return i?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Lm(s,e,n,i){var o;if(!((o=s._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Ky(s,e,n,n==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Ky(s,e,n,n==="getOobCode");return i(s,h)}else return Promise.reject(u)})}function Z2(s,e){const n=ap(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(md(u,e??{}))return o;ar(o,"already-initialized")}return n.initialize({options:e})}function eS(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(ls);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function tS(s,e,n){const i=ma(s);we(i._canInitEmulator,i,"emulator-config-failed"),we(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=Gx(e),{host:h,port:g}=nS(e),p=g===null?"":`:${g}`;i.config.emulator={url:`${u}//${h}${p}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:h,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})}),rS()}function Gx(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function nS(s){const e=Gx(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:Yy(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:Yy(h)}}}function Yy(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function rS(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class hp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return as("not implemented")}_getIdTokenResponse(e){return as("not implemented")}_linkToIdToken(e,n){return as("not implemented")}_getReauthenticationResolver(e){return as("not implemented")}}async function sS(s,e){return xs(s,"POST","/v1/accounts:signUp",e)}async function iS(s,e){return fu(s,"POST","/v1/accounts:signInWithPassword",Ni(s,e))}async function aS(s,e){return fu(s,"POST","/v1/accounts:signInWithEmailLink",Ni(s,e))}async function oS(s,e){return fu(s,"POST","/v1/accounts:signInWithEmailLink",Ni(s,e))}class Zl extends hp{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Zl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Zl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lm(e,n,"signInWithPassword",iS);case"emailLink":return aS(e,{email:this._email,oobCode:this._password});default:ar(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lm(e,i,"signUpPassword",sS);case"emailLink":return oS(e,{idToken:n,email:this._email,oobCode:this._password});default:ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function co(s,e){return fu(s,"POST","/v1/accounts:signInWithIdp",Ni(s,e))}const lS="http://localhost";class ua extends hp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ua(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ar("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=n,u=op(n,["providerId","signInMethod"]);if(!i||!o)return null;const h=new ua(i,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return co(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,co(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,co(e,n)}buildRequest(){const e={requestUri:lS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=du(n)}return e}}function uS(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cS(s){const e=zl(Bl(s)).link,n=e?zl(Bl(e)).deep_link_id:null,i=zl(Bl(s)).deep_link_id;return(i?zl(Bl(i)).link:null)||i||n||e||s}class fp{constructor(e){var n,i,o,u,h,g;const p=zl(Bl(e)),y=(n=p.apiKey)!==null&&n!==void 0?n:null,b=(i=p.oobCode)!==null&&i!==void 0?i:null,w=uS((o=p.mode)!==null&&o!==void 0?o:null);we(y&&b&&w,"argument-error"),this.apiKey=y,this.operation=w,this.code=b,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(h=p.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(g=p.tenantId)!==null&&g!==void 0?g:null}static parseLink(e){const n=cS(e);try{return new fp(n)}catch{return null}}}class So{constructor(){this.providerId=So.PROVIDER_ID}static credential(e,n){return Zl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=fp.parseLink(n);return we(i,"argument-error"),Zl._fromEmailAndCode(e,i.code,i.tenantId)}}So.PROVIDER_ID="password";So.EMAIL_PASSWORD_SIGN_IN_METHOD="password";So.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class $x{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class mu extends $x{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fi extends mu{constructor(){super("facebook.com")}static credential(e){return ua._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";fi.PROVIDER_ID="facebook.com";class mi extends mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ua._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return mi.credential(n,i)}catch{return null}}}mi.GOOGLE_SIGN_IN_METHOD="google.com";mi.PROVIDER_ID="google.com";class pi extends mu{constructor(){super("github.com")}static credential(e){return ua._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.GITHUB_SIGN_IN_METHOD="github.com";pi.PROVIDER_ID="github.com";class gi extends mu{constructor(){super("twitter.com")}static credential(e,n){return ua._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return gi.credential(n,i)}catch{return null}}}gi.TWITTER_SIGN_IN_METHOD="twitter.com";gi.PROVIDER_ID="twitter.com";async function dS(s,e){return fu(s,"POST","/v1/accounts:signUp",Ni(s,e))}class ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const u=await os._fromIdTokenResponse(e,i,o),h=Xy(i);return new ca({user:u,providerId:h,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=Xy(i);return new ca({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function Xy(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class yd extends _s{constructor(e,n,i,o){var u;super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,yd.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new yd(e,n,i,o)}}function Qx(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?yd._fromErrorAndOperation(s,u,e,i):u})}async function hS(s,e,n=!1){const i=await mo(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return ca._forOperation(s,"link",i)}async function fS(s,e,n=!1){const{auth:i}=s;if(Er(i.app))return Promise.reject(cs(i));const o="reauthenticate";try{const u=await mo(s,Qx(i,o,e,s),n);we(u.idToken,i,"internal-error");const h=cp(u.idToken);we(h,i,"internal-error");const{sub:g}=h;return we(s.uid===g,i,"user-mismatch"),ca._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ar(i,"user-mismatch"),u}}async function Kx(s,e,n=!1){if(Er(s.app))return Promise.reject(cs(s));const i="signIn",o=await Qx(s,i,e),u=await ca._fromIdTokenResponse(s,i,o);return n||await s._updateCurrentUser(u.user),u}async function mS(s,e){return Kx(ma(s),e)}async function Yx(s){const e=ma(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Xx(s,e,n){if(Er(s.app))return Promise.reject(cs(s));const i=ma(s),h=await Lm(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dS).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Yx(s),p}),g=await ca._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(g.user),g}function Jx(s,e,n){return Er(s.app)?Promise.reject(cs(s)):mS(Lt(s),So.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Yx(s),i})}async function pS(s,e){return xs(s,"POST","/v1/accounts:update",e)}async function Wx(s,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Lt(s),u={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},h=await mo(i,pS(i.auth,u));i.displayName=h.displayName||null,i.photoURL=h.photoUrl||null;const g=i.providerData.find(({providerId:p})=>p==="password");g&&(g.displayName=i.displayName,g.photoURL=i.photoURL),await i._updateTokensIfNecessary(h)}function gS(s,e,n,i){return Lt(s).onIdTokenChanged(e,n,i)}function vS(s,e,n){return Lt(s).beforeAuthStateChanged(e,n)}function yS(s,e,n,i){return Lt(s).onAuthStateChanged(e,n,i)}function _S(s){return Lt(s).signOut()}const _d="__sak";class Zx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_d,"1"),this.storage.removeItem(_d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const xS=1e3,bS=10;class eb extends Zx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,g,p)=>{this.notifyListeners(h,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!n&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);z2()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,bS):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},xS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}eb.type="LOCAL";const wS=eb;class tb extends Zx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tb.type="SESSION";const nb=tb;function ES(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Pd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const g=Array.from(h).map(async y=>y(n.origin,u)),p=await ES(g);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pd.receivers=[];function mp(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}class TS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((g,p)=>{const y=mp("",20);o.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(w){const N=w;if(N.data.eventId===y)switch(N.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(N.data.response);break;default:clearTimeout(b),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Sr(){return window}function SS(s){Sr().location.href=s}function rb(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}async function NS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AS(){var s;return((s=navigator?.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function RS(){return rb()?self:null}const sb="firebaseLocalStorageDb",CS=1,xd="firebaseLocalStorage",ib="fbase_key";class pu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zd(s,e){return s.transaction([xd],e?"readwrite":"readonly").objectStore(xd)}function IS(){const s=indexedDB.deleteDatabase(sb);return new pu(s).toPromise()}function Um(){const s=indexedDB.open(sb,CS);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(xd,{keyPath:ib})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(xd)?e(i):(i.close(),await IS(),e(await Um()))})})}async function Jy(s,e,n){const i=zd(s,!0).put({[ib]:e,value:n});return new pu(i).toPromise()}async function jS(s,e){const n=zd(s,!1).get(e),i=await new pu(n).toPromise();return i===void 0?null:i.value}function Wy(s,e){const n=zd(s,!0).delete(e);return new pu(n).toPromise()}const DS=800,kS=3;class ab{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>kS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pd._getInstance(RS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await NS(),!this.activeServiceWorker)return;this.sender=new TS(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Um();return await Jy(e,_d,"1"),await Wy(e,_d),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Jy(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>jS(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Wy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=zd(o,!1).getAll();return new pu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ab.type="LOCAL";const OS=ab;new hu(3e4,6e4);function MS(s,e){return e?ls(e):(we(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class pp extends hp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return co(e,this._buildIdpRequest())}_linkToIdToken(e,n){return co(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return co(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VS(s){return Kx(s.auth,new pp(s),s.bypassAuthState)}function LS(s){const{auth:e,user:n}=s;return we(n,e,"internal-error"),fS(n,new pp(s),s.bypassAuthState)}async function US(s){const{auth:e,user:n}=s;return we(n,e,"internal-error"),hS(n,new pp(s),s.bypassAuthState)}class ob{constructor(e,n,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:u,error:h,type:g}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VS;case"linkViaPopup":case"linkViaRedirect":return US;case"reauthViaPopup":case"reauthViaRedirect":return LS;default:ar(this.auth,"internal-error")}}resolve(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const PS=new hu(2e3,1e4);class oo extends ob{constructor(e,n,i,o,u){super(e,n,o,u),this.provider=i,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){ms(this.filter.length===1,"Popup operations only handle one event");const e=mp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PS.get())};e()}}oo.currentPopupAction=null;const zS="pendingRedirect",sd=new Map;class BS extends ob{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=sd.get(this.auth._key());if(!e){try{const i=await qS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}sd.set(this.auth._key(),e)}return this.bypassAuthState||sd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qS(s,e){const n=GS(e),i=HS(s);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function FS(s,e){sd.set(s._key(),e)}function HS(s){return ls(s._redirectPersistence)}function GS(s){return rd(zS,s.config.apiKey,s.name)}async function $S(s,e,n=!1){if(Er(s.app))return Promise.reject(cs(s));const i=ma(s),o=MS(i,e),h=await new BS(i,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const QS=600*1e3;class KS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!lb(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Tr(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zy(e))}saveEventToCache(e){this.cachedEventUids.add(Zy(e)),this.lastProcessedEventTime=Date.now()}}function Zy(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function lb({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function YS(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lb(s);default:return!1}}async function XS(s,e={}){return xs(s,"GET","/v1/projects",e)}const JS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WS=/^https?/;async function ZS(s){if(s.config.emulator)return;const{authorizedDomains:e}=await XS(s);for(const n of e)try{if(eN(n))return}catch{}ar(s,"unauthorized-domain")}function eN(s){const e=Mm(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===i}if(!WS.test(n))return!1;if(JS.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const tN=new hu(3e4,6e4);function e_(){const s=Sr().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function nN(s){return new Promise((e,n)=>{var i,o,u;function h(){e_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e_(),n(Tr(s,"network-request-failed"))},timeout:tN.get()})}if(!((o=(i=Sr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Sr().gapi)===null||u===void 0)&&u.load)h();else{const g=Y2("iframefcb");return Sr()[g]=()=>{gapi.load?h():n(Tr(s,"network-request-failed"))},Hx(`${K2()}?onload=${g}`).catch(p=>n(p))}}).catch(e=>{throw id=null,e})}let id=null;function rN(s){return id=id||nN(s),id}const sN=new hu(5e3,15e3),iN="__/auth/iframe",aN="emulator/auth/iframe",oN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uN(s){const e=s.config;we(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?up(e,aN):`https://${s.config.authDomain}/${iN}`,i={apiKey:e.apiKey,appName:s.name,v:To},o=lN.get(s.config.apiHost);o&&(i.eid=o);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${du(i).slice(1)}`}async function cN(s){const e=await rN(s),n=Sr().gapi;return we(n,s,"internal-error"),e.open({where:document.body,url:uN(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oN,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const h=Tr(s,"network-request-failed"),g=Sr().setTimeout(()=>{u(h)},sN.get());function p(){Sr().clearTimeout(g),o(i)}i.ping(p).then(p,()=>{u(h)})}))}const dN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hN=500,fN=600,mN="_blank",pN="http://localhost";class t_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gN(s,e,n,i=hN,o=fN){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let g="";const p=Object.assign(Object.assign({},dN),{width:i.toString(),height:o.toString(),top:u,left:h}),y=on().toLowerCase();n&&(g=Lx(y)?mN:n),Mx(y)&&(e=e||pN,p.scrollbars="yes");const b=Object.entries(p).reduce((N,[V,M])=>`${N}${V}=${M},`,"");if(P2(y)&&g!=="_self")return vN(e||"",g),new t_(null);const w=window.open(e||"",g,b);we(w,s,"popup-blocked");try{w.focus()}catch{}return new t_(w)}function vN(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const yN="__/auth/handler",_N="emulator/auth/handler",xN=encodeURIComponent("fac");async function n_(s,e,n,i,o,u){we(s.config.authDomain,s,"auth-domain-config-required"),we(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:To,eventId:o};if(e instanceof $x){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",oT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))h[b]=w}if(e instanceof mu){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(h.scopes=b.join(","))}s.tenantId&&(h.tid=s.tenantId);const g=h;for(const b of Object.keys(g))g[b]===void 0&&delete g[b];const p=await s._getAppCheckToken(),y=p?`#${xN}=${encodeURIComponent(p)}`:"";return`${bN(s)}?${du(g).slice(1)}${y}`}function bN({config:s}){return s.emulator?up(s,_N):`https://${s.authDomain}/${yN}`}const fm="webStorageSupport";class wN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nb,this._completeRedirectFn=$S,this._overrideRedirectResult=FS}async _openPopup(e,n,i,o){var u;ms((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const h=await n_(e,n,i,Mm(),o);return gN(e,h,mp())}async _openRedirect(e,n,i,o){await this._originValidation(e);const u=await n_(e,n,i,Mm(),o);return SS(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ms(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await cN(e),i=new KS(e);return n.register("authEvent",o=>(we(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fm,{type:fm},o=>{var u;const h=(u=o?.[0])===null||u===void 0?void 0:u[fm];h!==void 0&&n(!!h),ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qx()||Vx()||dp()}}const EN=wN;var r_="@firebase/auth",s_="1.7.9";class TN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function SN(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NN(s){fo(new la("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=i.options;we(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:h,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fx(s)},y=new G2(i,o,u,p);return eS(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),fo(new la("auth-internal",e=>{const n=ma(e.getProvider("auth").getImmediate());return(i=>new TN(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bi(r_,s_,SN(s)),bi(r_,s_,"esm2017")}const AN=300,RN=_x("authIdTokenMaxAge")||AN;let i_=null;const CN=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>RN)return;const o=n?.token;i_!==o&&(i_=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function IN(s=Ex()){const e=ap(s,"auth");if(e.isInitialized())return e.getImmediate();const n=Z2(s,{popupRedirectResolver:EN,persistence:[OS,wS,nb]}),i=_x("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=CN(u.toString());vS(n,h,()=>h(n.currentUser)),gS(n,g=>h(g))}}const o=vx("auth");return o&&tS(n,`http://${o}`),n}function jN(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}$2({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const u=Tr("internal-error");u.customData=o,n(u)},i.type="text/javascript",i.charset="UTF-8",jN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NN("Browser");var a_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ia,ub;(function(){var s;function e(I,S){function A(){}A.prototype=S.prototype,I.D=S.prototype,I.prototype=new A,I.prototype.constructor=I,I.C=function(D,O,P){for(var R=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)R[nt-2]=arguments[nt];return S.prototype[O].apply(D,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,S,A){A||(A=0);var D=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)D[O]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(O=0;16>O;++O)D[O]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=I.g[0],A=I.g[1],O=I.g[2];var P=I.g[3],R=S+(P^A&(O^P))+D[0]+3614090360&4294967295;S=A+(R<<7&4294967295|R>>>25),R=P+(O^S&(A^O))+D[1]+3905402710&4294967295,P=S+(R<<12&4294967295|R>>>20),R=O+(A^P&(S^A))+D[2]+606105819&4294967295,O=P+(R<<17&4294967295|R>>>15),R=A+(S^O&(P^S))+D[3]+3250441966&4294967295,A=O+(R<<22&4294967295|R>>>10),R=S+(P^A&(O^P))+D[4]+4118548399&4294967295,S=A+(R<<7&4294967295|R>>>25),R=P+(O^S&(A^O))+D[5]+1200080426&4294967295,P=S+(R<<12&4294967295|R>>>20),R=O+(A^P&(S^A))+D[6]+2821735955&4294967295,O=P+(R<<17&4294967295|R>>>15),R=A+(S^O&(P^S))+D[7]+4249261313&4294967295,A=O+(R<<22&4294967295|R>>>10),R=S+(P^A&(O^P))+D[8]+1770035416&4294967295,S=A+(R<<7&4294967295|R>>>25),R=P+(O^S&(A^O))+D[9]+2336552879&4294967295,P=S+(R<<12&4294967295|R>>>20),R=O+(A^P&(S^A))+D[10]+4294925233&4294967295,O=P+(R<<17&4294967295|R>>>15),R=A+(S^O&(P^S))+D[11]+2304563134&4294967295,A=O+(R<<22&4294967295|R>>>10),R=S+(P^A&(O^P))+D[12]+1804603682&4294967295,S=A+(R<<7&4294967295|R>>>25),R=P+(O^S&(A^O))+D[13]+4254626195&4294967295,P=S+(R<<12&4294967295|R>>>20),R=O+(A^P&(S^A))+D[14]+2792965006&4294967295,O=P+(R<<17&4294967295|R>>>15),R=A+(S^O&(P^S))+D[15]+1236535329&4294967295,A=O+(R<<22&4294967295|R>>>10),R=S+(O^P&(A^O))+D[1]+4129170786&4294967295,S=A+(R<<5&4294967295|R>>>27),R=P+(A^O&(S^A))+D[6]+3225465664&4294967295,P=S+(R<<9&4294967295|R>>>23),R=O+(S^A&(P^S))+D[11]+643717713&4294967295,O=P+(R<<14&4294967295|R>>>18),R=A+(P^S&(O^P))+D[0]+3921069994&4294967295,A=O+(R<<20&4294967295|R>>>12),R=S+(O^P&(A^O))+D[5]+3593408605&4294967295,S=A+(R<<5&4294967295|R>>>27),R=P+(A^O&(S^A))+D[10]+38016083&4294967295,P=S+(R<<9&4294967295|R>>>23),R=O+(S^A&(P^S))+D[15]+3634488961&4294967295,O=P+(R<<14&4294967295|R>>>18),R=A+(P^S&(O^P))+D[4]+3889429448&4294967295,A=O+(R<<20&4294967295|R>>>12),R=S+(O^P&(A^O))+D[9]+568446438&4294967295,S=A+(R<<5&4294967295|R>>>27),R=P+(A^O&(S^A))+D[14]+3275163606&4294967295,P=S+(R<<9&4294967295|R>>>23),R=O+(S^A&(P^S))+D[3]+4107603335&4294967295,O=P+(R<<14&4294967295|R>>>18),R=A+(P^S&(O^P))+D[8]+1163531501&4294967295,A=O+(R<<20&4294967295|R>>>12),R=S+(O^P&(A^O))+D[13]+2850285829&4294967295,S=A+(R<<5&4294967295|R>>>27),R=P+(A^O&(S^A))+D[2]+4243563512&4294967295,P=S+(R<<9&4294967295|R>>>23),R=O+(S^A&(P^S))+D[7]+1735328473&4294967295,O=P+(R<<14&4294967295|R>>>18),R=A+(P^S&(O^P))+D[12]+2368359562&4294967295,A=O+(R<<20&4294967295|R>>>12),R=S+(A^O^P)+D[5]+4294588738&4294967295,S=A+(R<<4&4294967295|R>>>28),R=P+(S^A^O)+D[8]+2272392833&4294967295,P=S+(R<<11&4294967295|R>>>21),R=O+(P^S^A)+D[11]+1839030562&4294967295,O=P+(R<<16&4294967295|R>>>16),R=A+(O^P^S)+D[14]+4259657740&4294967295,A=O+(R<<23&4294967295|R>>>9),R=S+(A^O^P)+D[1]+2763975236&4294967295,S=A+(R<<4&4294967295|R>>>28),R=P+(S^A^O)+D[4]+1272893353&4294967295,P=S+(R<<11&4294967295|R>>>21),R=O+(P^S^A)+D[7]+4139469664&4294967295,O=P+(R<<16&4294967295|R>>>16),R=A+(O^P^S)+D[10]+3200236656&4294967295,A=O+(R<<23&4294967295|R>>>9),R=S+(A^O^P)+D[13]+681279174&4294967295,S=A+(R<<4&4294967295|R>>>28),R=P+(S^A^O)+D[0]+3936430074&4294967295,P=S+(R<<11&4294967295|R>>>21),R=O+(P^S^A)+D[3]+3572445317&4294967295,O=P+(R<<16&4294967295|R>>>16),R=A+(O^P^S)+D[6]+76029189&4294967295,A=O+(R<<23&4294967295|R>>>9),R=S+(A^O^P)+D[9]+3654602809&4294967295,S=A+(R<<4&4294967295|R>>>28),R=P+(S^A^O)+D[12]+3873151461&4294967295,P=S+(R<<11&4294967295|R>>>21),R=O+(P^S^A)+D[15]+530742520&4294967295,O=P+(R<<16&4294967295|R>>>16),R=A+(O^P^S)+D[2]+3299628645&4294967295,A=O+(R<<23&4294967295|R>>>9),R=S+(O^(A|~P))+D[0]+4096336452&4294967295,S=A+(R<<6&4294967295|R>>>26),R=P+(A^(S|~O))+D[7]+1126891415&4294967295,P=S+(R<<10&4294967295|R>>>22),R=O+(S^(P|~A))+D[14]+2878612391&4294967295,O=P+(R<<15&4294967295|R>>>17),R=A+(P^(O|~S))+D[5]+4237533241&4294967295,A=O+(R<<21&4294967295|R>>>11),R=S+(O^(A|~P))+D[12]+1700485571&4294967295,S=A+(R<<6&4294967295|R>>>26),R=P+(A^(S|~O))+D[3]+2399980690&4294967295,P=S+(R<<10&4294967295|R>>>22),R=O+(S^(P|~A))+D[10]+4293915773&4294967295,O=P+(R<<15&4294967295|R>>>17),R=A+(P^(O|~S))+D[1]+2240044497&4294967295,A=O+(R<<21&4294967295|R>>>11),R=S+(O^(A|~P))+D[8]+1873313359&4294967295,S=A+(R<<6&4294967295|R>>>26),R=P+(A^(S|~O))+D[15]+4264355552&4294967295,P=S+(R<<10&4294967295|R>>>22),R=O+(S^(P|~A))+D[6]+2734768916&4294967295,O=P+(R<<15&4294967295|R>>>17),R=A+(P^(O|~S))+D[13]+1309151649&4294967295,A=O+(R<<21&4294967295|R>>>11),R=S+(O^(A|~P))+D[4]+4149444226&4294967295,S=A+(R<<6&4294967295|R>>>26),R=P+(A^(S|~O))+D[11]+3174756917&4294967295,P=S+(R<<10&4294967295|R>>>22),R=O+(S^(P|~A))+D[2]+718787259&4294967295,O=P+(R<<15&4294967295|R>>>17),R=A+(P^(O|~S))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+O&4294967295,I.g[3]=I.g[3]+P&4294967295}i.prototype.u=function(I,S){S===void 0&&(S=I.length);for(var A=S-this.blockSize,D=this.B,O=this.h,P=0;P<S;){if(O==0)for(;P<=A;)o(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<S;)if(D[O++]=I.charCodeAt(P++),O==this.blockSize){o(this,D),O=0;break}}else for(;P<S;)if(D[O++]=I[P++],O==this.blockSize){o(this,D),O=0;break}}this.h=O,this.o+=S},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;var A=8*this.o;for(S=I.length-8;S<I.length;++S)I[S]=A&255,A/=256;for(this.u(I),I=Array(16),S=A=0;4>S;++S)for(var D=0;32>D;D+=8)I[A++]=this.g[S]>>>D&255;return I};function u(I,S){var A=g;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=S(I)}function h(I,S){this.h=S;for(var A=[],D=!0,O=I.length-1;0<=O;O--){var P=I[O]|0;D&&P==S||(A[O]=P,D=!1)}this.g=A}var g={};function p(I){return-128<=I&&128>I?u(I,function(S){return new h([S|0],0>S?-1:0)}):new h([I|0],0>I?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return w;if(0>I)return L(y(-I));for(var S=[],A=1,D=0;I>=A;D++)S[D]=I/A|0,A*=4294967296;return new h(S,0)}function b(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return L(b(I.substring(1),S));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=y(Math.pow(S,8)),D=w,O=0;O<I.length;O+=8){var P=Math.min(8,I.length-O),R=parseInt(I.substring(O,O+P),S);8>P?(P=y(Math.pow(S,P)),D=D.j(P).add(y(R))):(D=D.j(A),D=D.add(y(R)))}return D}var w=p(0),N=p(1),V=p(16777216);s=h.prototype,s.m=function(){if(z(this))return-L(this).m();for(var I=0,S=1,A=0;A<this.g.length;A++){var D=this.i(A);I+=(0<=D?D:4294967296+D)*S,S*=4294967296}return I},s.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(M(this))return"0";if(z(this))return"-"+L(this).toString(I);for(var S=y(Math.pow(I,6)),A=this,D="";;){var O=ue(A,S).g;A=J(A,O.j(S));var P=((0<A.g.length?A.g[0]:A.h)>>>0).toString(I);if(A=O,M(A))return P+D;for(;6>P.length;)P="0"+P;D=P+D}},s.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function M(I){if(I.h!=0)return!1;for(var S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function z(I){return I.h==-1}s.l=function(I){return I=J(this,I),z(I)?-1:M(I)?0:1};function L(I){for(var S=I.g.length,A=[],D=0;D<S;D++)A[D]=~I.g[D];return new h(A,~I.h).add(N)}s.abs=function(){return z(this)?L(this):this},s.add=function(I){for(var S=Math.max(this.g.length,I.g.length),A=[],D=0,O=0;O<=S;O++){var P=D+(this.i(O)&65535)+(I.i(O)&65535),R=(P>>>16)+(this.i(O)>>>16)+(I.i(O)>>>16);D=R>>>16,P&=65535,R&=65535,A[O]=R<<16|P}return new h(A,A[A.length-1]&-2147483648?-1:0)};function J(I,S){return I.add(L(S))}s.j=function(I){if(M(this)||M(I))return w;if(z(this))return z(I)?L(this).j(L(I)):L(L(this).j(I));if(z(I))return L(this.j(L(I)));if(0>this.l(V)&&0>I.l(V))return y(this.m()*I.m());for(var S=this.g.length+I.g.length,A=[],D=0;D<2*S;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(var O=0;O<I.g.length;O++){var P=this.i(D)>>>16,R=this.i(D)&65535,nt=I.i(O)>>>16,ct=I.i(O)&65535;A[2*D+2*O]+=R*ct,X(A,2*D+2*O),A[2*D+2*O+1]+=P*ct,X(A,2*D+2*O+1),A[2*D+2*O+1]+=R*nt,X(A,2*D+2*O+1),A[2*D+2*O+2]+=P*nt,X(A,2*D+2*O+2)}for(D=0;D<S;D++)A[D]=A[2*D+1]<<16|A[2*D];for(D=S;D<2*S;D++)A[D]=0;return new h(A,0)};function X(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function Z(I,S){this.g=I,this.h=S}function ue(I,S){if(M(S))throw Error("division by zero");if(M(I))return new Z(w,w);if(z(I))return S=ue(L(I),S),new Z(L(S.g),L(S.h));if(z(S))return S=ue(I,L(S)),new Z(L(S.g),S.h);if(30<I.g.length){if(z(I)||z(S))throw Error("slowDivide_ only works with positive integers.");for(var A=N,D=S;0>=D.l(I);)A=ye(A),D=ye(D);var O=ge(A,1),P=ge(D,1);for(D=ge(D,2),A=ge(A,2);!M(D);){var R=P.add(D);0>=R.l(I)&&(O=O.add(A),P=R),D=ge(D,1),A=ge(A,1)}return S=J(I,O.j(S)),new Z(O,S)}for(O=w;0<=I.l(S);){for(A=Math.max(1,Math.floor(I.m()/S.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),P=y(A),R=P.j(S);z(R)||0<R.l(I);)A-=D,P=y(A),R=P.j(S);M(P)&&(P=N),O=O.add(P),I=J(I,R)}return new Z(O,I)}s.A=function(I){return ue(this,I).h},s.and=function(I){for(var S=Math.max(this.g.length,I.g.length),A=[],D=0;D<S;D++)A[D]=this.i(D)&I.i(D);return new h(A,this.h&I.h)},s.or=function(I){for(var S=Math.max(this.g.length,I.g.length),A=[],D=0;D<S;D++)A[D]=this.i(D)|I.i(D);return new h(A,this.h|I.h)},s.xor=function(I){for(var S=Math.max(this.g.length,I.g.length),A=[],D=0;D<S;D++)A[D]=this.i(D)^I.i(D);return new h(A,this.h^I.h)};function ye(I){for(var S=I.g.length+1,A=[],D=0;D<S;D++)A[D]=I.i(D)<<1|I.i(D-1)>>>31;return new h(A,I.h)}function ge(I,S){var A=S>>5;S%=32;for(var D=I.g.length-A,O=[],P=0;P<D;P++)O[P]=0<S?I.i(P+A)>>>S|I.i(P+A+1)<<32-S:I.i(P+A);return new h(O,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ub=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=b,ia=h}).apply(typeof a_<"u"?a_:typeof self<"u"?self:typeof window<"u"?window:{});var Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var cb,ql,db,ad,Pm,hb,fb,mb;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,v,x){return c==Array.prototype||c==Object.prototype||(c[v]=x.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jc=="object"&&Jc];for(var v=0;v<c.length;++v){var x=c[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function o(c,v){if(v)e:{var x=i;c=c.split(".");for(var T=0;T<c.length-1;T++){var F=c[T];if(!(F in x))break e;x=x[F]}c=c[c.length-1],T=x[c],v=v(T),v!=T&&v!=null&&e(x,c,{configurable:!0,writable:!0,value:v})}}function u(c,v){c instanceof String&&(c+="");var x=0,T=!1,F={next:function(){if(!T&&x<c.length){var Y=x++;return{value:v(Y,c[Y]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(c){return c||function(){return u(this,function(v,x){return x})}});var h=h||{},g=this||self;function p(c){var v=typeof c;return v=v!="object"?v:c?Array.isArray(c)?"array":v:"null",v=="array"||v=="object"&&typeof c.length=="number"}function y(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function b(c,v,x){return c.call.apply(c.bind,arguments)}function w(c,v,x){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),c.apply(v,F)}}return function(){return c.apply(v,arguments)}}function N(c,v,x){return N=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:w,N.apply(null,arguments)}function V(c,v){var x=Array.prototype.slice.call(arguments,1);return function(){var T=x.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function M(c,v){function x(){}x.prototype=v.prototype,c.aa=v.prototype,c.prototype=new x,c.prototype.constructor=c,c.Qb=function(T,F,Y){for(var oe=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)oe[Ke-2]=arguments[Ke];return v.prototype[F].apply(T,oe)}}function z(c){const v=c.length;if(0<v){const x=Array(v);for(let T=0;T<v;T++)x[T]=c[T];return x}return[]}function L(c,v){for(let x=1;x<arguments.length;x++){const T=arguments[x];if(p(T)){const F=c.length||0,Y=T.length||0;c.length=F+Y;for(let oe=0;oe<Y;oe++)c[F+oe]=T[oe]}else c.push(T)}}class J{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function X(c){return/^[\s\xa0]*$/.test(c)}function Z(){var c=g.navigator;return c&&(c=c.userAgent)?c:""}function ue(c){return ue[" "](c),c}ue[" "]=function(){};var ye=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function ge(c,v,x){for(const T in c)v.call(x,c[T],T,c)}function I(c,v){for(const x in c)v.call(void 0,c[x],x,c)}function S(c){const v={};for(const x in c)v[x]=c[x];return v}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,v){let x,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(x in T)c[x]=T[x];for(let Y=0;Y<A.length;Y++)x=A[Y],Object.prototype.hasOwnProperty.call(T,x)&&(c[x]=T[x])}}function O(c){var v=1;c=c.split(":");const x=[];for(;0<v&&c.length;)x.push(c.shift()),v--;return c.length&&x.push(c.join(":")),x}function P(c){g.setTimeout(()=>{throw c},0)}function R(){var c=Oe;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class nt{constructor(){this.h=this.g=null}add(v,x){const T=ct.get();T.set(v,x),this.h?this.h.next=T:this.g=T,this.h=T}}var ct=new J(()=>new q,c=>c.reset());class q{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,pe=!1,Oe=new nt,ae=()=>{const c=g.Promise.resolve(void 0);ee=()=>{c.then(C)}};var C=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(x){P(x)}var v=ct;v.j(c),100>v.h&&(v.h++,c.next=v.g,v.g=c)}pe=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var de=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};g.addEventListener("test",x,v),g.removeEventListener("test",x,v)}catch{}return c})();function be(c,v){if(se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var x=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget){if(ye){e:{try{ue(v.nodeName);var F=!0;break e}catch{}F=!1}F||(v=null)}}else x=="mouseover"?v=c.fromElement:x=="mouseout"&&(v=c.toElement);this.relatedTarget=v,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ae[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&be.aa.h.call(this)}}M(be,se);var Ae={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),St=0;function ot(c,v,x,T,F){this.listener=c,this.proxy=null,this.src=v,this.type=x,this.capture=!!T,this.ha=F,this.key=++St,this.da=this.fa=!1}function Tn(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Jn(c){this.src=c,this.g={},this.h=0}Jn.prototype.add=function(c,v,x,T,F){var Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);var oe=ws(c,v,T,F);return-1<oe?(v=c[oe],x||(v.fa=!1)):(v=new ot(v,this.src,Y,!!T,F),v.fa=x,c.push(v)),v};function Vn(c,v){var x=v.type;if(x in c.g){var T=c.g[x],F=Array.prototype.indexOf.call(T,v,void 0),Y;(Y=0<=F)&&Array.prototype.splice.call(T,F,1),Y&&(Tn(v),c.g[x].length==0&&(delete c.g[x],c.h--))}}function ws(c,v,x,T){for(var F=0;F<c.length;++F){var Y=c[F];if(!Y.da&&Y.listener==v&&Y.capture==!!x&&Y.ha==T)return F}return-1}var en="closure_lm_"+(1e6*Math.random()|0),jr={};function Es(c,v,x,T,F){if(Array.isArray(v)){for(var Y=0;Y<v.length;Y++)Es(c,v[Y],x,T,F);return null}return x=Ts(x),c&&c[je]?c.K(v,x,y(T)?!!T.capture:!1,F):Mo(c,v,x,!1,T,F)}function Mo(c,v,x,T,F,Y){if(!v)throw Error("Invalid event type");var oe=y(F)?!!F.capture:!!F,Ke=Ci(c);if(Ke||(c[en]=Ke=new Jn(c)),x=Ke.add(v,x,T,oe,Y),x.proxy)return x;if(T=cr(),x.proxy=T,T.src=c,T.listener=x,c.addEventListener)de||(F=oe),F===void 0&&(F=!1),c.addEventListener(v.toString(),T,F);else if(c.attachEvent)c.attachEvent(kr(v.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return x}function cr(){function c(x){return v.call(c.src,c.listener,x)}const v=Vo;return c}function Dr(c,v,x,T,F){if(Array.isArray(v))for(var Y=0;Y<v.length;Y++)Dr(c,v[Y],x,T,F);else T=y(T)?!!T.capture:!!T,x=Ts(x),c&&c[je]?(c=c.i,v=String(v).toString(),v in c.g&&(Y=c.g[v],x=ws(Y,x,T,F),-1<x&&(Tn(Y[x]),Array.prototype.splice.call(Y,x,1),Y.length==0&&(delete c.g[v],c.h--)))):c&&(c=Ci(c))&&(v=c.g[v.toString()],c=-1,v&&(c=ws(v,x,T,F)),(x=-1<c?v[c]:null)&&dr(x))}function dr(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[je])Vn(v.i,c);else{var x=c.type,T=c.proxy;v.removeEventListener?v.removeEventListener(x,T,c.capture):v.detachEvent?v.detachEvent(kr(x),T):v.addListener&&v.removeListener&&v.removeListener(T),(x=Ci(v))?(Vn(x,c),x.h==0&&(x.src=null,v[en]=null)):Tn(c)}}}function kr(c){return c in jr?jr[c]:jr[c]="on"+c}function Vo(c,v){if(c.da)c=!0;else{v=new be(v,this);var x=c.listener,T=c.ha||c.src;c.fa&&dr(c),c=x.call(T,v)}return c}function Ci(c){return c=c[en],c instanceof Jn?c:null}var yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ts(c){return typeof c=="function"?c:(c[yt]||(c[yt]=function(v){return c.handleEvent(v)}),c[yt])}function ft(){Q.call(this),this.i=new Jn(this),this.M=this,this.F=null}M(ft,Q),ft.prototype[je]=!0,ft.prototype.removeEventListener=function(c,v,x,T){Dr(this,c,v,x,T)};function _t(c,v){var x,T=c.F;if(T)for(x=[];T;T=T.F)x.push(T);if(c=c.M,T=v.type||v,typeof v=="string")v=new se(v,c);else if(v instanceof se)v.target=v.target||c;else{var F=v;v=new se(T,c),D(v,F)}if(F=!0,x)for(var Y=x.length-1;0<=Y;Y--){var oe=v.g=x[Y];F=Wn(oe,T,!0,v)&&F}if(oe=v.g=c,F=Wn(oe,T,!0,v)&&F,F=Wn(oe,T,!1,v)&&F,x)for(Y=0;Y<x.length;Y++)oe=v.g=x[Y],F=Wn(oe,T,!1,v)&&F}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,v;for(v in c.g){for(var x=c.g[v],T=0;T<x.length;T++)Tn(x[T]);delete c.g[v],c.h--}}this.F=null},ft.prototype.K=function(c,v,x,T){return this.i.add(String(c),v,!1,x,T)},ft.prototype.L=function(c,v,x,T){return this.i.add(String(c),v,!0,x,T)};function Wn(c,v,x,T){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();for(var F=!0,Y=0;Y<v.length;++Y){var oe=v[Y];if(oe&&!oe.da&&oe.capture==x){var Ke=oe.listener,Nt=oe.ha||oe.src;oe.fa&&Vn(c.i,oe),F=Ke.call(Nt,T)!==!1&&F}}return F&&!T.defaultPrevented}function Ii(c,v,x){if(typeof c=="function")x&&(c=N(c,x));else if(c&&typeof c.handleEvent=="function")c=N(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:g.setTimeout(c,v||0)}function Ss(c){c.g=Ii(()=>{c.g=null,c.i&&(c.i=!1,Ss(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class Lo extends Q{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Ss(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Or(c){Q.call(this),this.h=c,this.g={}}M(Or,Q);var Ln=[];function kt(c){ge(c.g,function(v,x){this.g.hasOwnProperty(x)&&dr(v)},c),c.g={}}Or.prototype.N=function(){Or.aa.N.call(this),kt(this)},Or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pn=g.JSON.stringify,Ft=g.JSON.parse,le=class{stringify(c){return g.JSON.stringify(c,void 0)}parse(c){return g.JSON.parse(c,void 0)}};function Me(){}Me.prototype.h=null;function xt(c){return c.h||(c.h=c.i())}function ln(){}var Ot={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zn(){se.call(this,"d")}M(Zn,se);function Sn(){se.call(this,"c")}M(Sn,se);var Un={},Ns=null;function ya(){return Ns=Ns||new ft}Un.La="serverreachability";function Uo(c){se.call(this,Un.La,c)}M(Uo,se);function Mr(c){const v=ya();_t(v,new Uo(v))}Un.STAT_EVENT="statevent";function As(c,v){se.call(this,Un.STAT_EVENT,c),this.stat=v}M(As,se);function Ht(c){const v=ya();_t(v,new As(v,c))}Un.Ma="timingevent";function Po(c,v){se.call(this,Un.Ma,c),this.size=v}M(Po,se);function Rs(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){c()},v)}function Cs(){this.g=!0}Cs.prototype.xa=function(){this.g=!1};function zo(c,v,x,T,F,Y){c.info(function(){if(c.g)if(Y)for(var oe="",Ke=Y.split("&"),Nt=0;Nt<Ke.length;Nt++){var Ie=Ke[Nt].split("=");if(1<Ie.length){var Pt=Ie[0];Ie=Ie[1];var zt=Pt.split("_");oe=2<=zt.length&&zt[1]=="type"?oe+(Pt+"="+Ie+"&"):oe+(Pt+"=redacted&")}}else oe=null;else oe=Y;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+v+`
`+x+`
`+oe})}function Bo(c,v,x,T,F,Y,oe){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+v+`
`+x+`
`+Y+" "+oe})}function Vr(c,v,x,T){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+hr(c,x)+(T?" "+T:"")})}function Nu(c,v){c.info(function(){return"TIMEOUT: "+v})}Cs.prototype.info=function(){};function hr(c,v){if(!c.g)return v;if(!v)return null;try{var x=JSON.parse(v);if(x){for(c=0;c<x.length;c++)if(Array.isArray(x[c])){var T=x[c];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var Y=F[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var oe=1;oe<F.length;oe++)F[oe]=""}}}}return pn(x)}catch{return v}}var mt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fr;function Is(){}M(Is,Me),Is.prototype.g=function(){return new XMLHttpRequest},Is.prototype.i=function(){return{}},fr=new Is;function mr(c,v,x,T){this.j=c,this.i=v,this.l=x,this.R=T||1,this.U=new Or(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Au}function Au(){this.i=null,this.g="",this.h=!1}var qo={},Lr={};function ji(c,v,x){c.L=1,c.v=Oi(pt(v)),c.m=x,c.P=!0,Ur(c,null)}function Ur(c,v){c.F=Date.now(),er(c),c.A=pt(c.v);var x=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),Br(x.i,"t",T),c.C=0,x=c.j.J,c.h=new Au,c.g=Fu(c.j,x?v:null,!c.m),0<c.O&&(c.M=new Lo(N(c.Y,c,c.g),c.O)),v=c.U,x=c.g,T=c.ca;var F="readystatechange";Array.isArray(F)||(F&&(Ln[0]=F.toString()),F=Ln);for(var Y=0;Y<F.length;Y++){var oe=Es(x,F[Y],T||v.handleEvent,!1,v.h||v);if(!oe)break;v.g[oe.key]=oe}v=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,v)):(c.u="GET",c.g.ea(c.A,c.u,null,v)),Mr(),zo(c.i,c.u,c.A,c.l,c.R,c.m)}mr.prototype.ca=function(c){c=c.target;const v=this.M;v&&dn(c)==3?v.j():this.Y(c)},mr.prototype.Y=function(c){try{if(c==this.g)e:{const zt=dn(this.g);var v=this.g.Ba();const Fs=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||Li(this.g)))){this.J||zt!=4||v==7||(v==8||0>=Fs?Mr(3):Mr(2)),_a(this);var x=this.g.Z();this.X=x;t:if(Pr(this)){var T=Li(this.g);c="";var F=T.length,Y=dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){un(this),js(this);var oe="";break t}this.h.i=new g.TextDecoder}for(v=0;v<F;v++)this.h.h=!0,c+=this.h.i.decode(T[v],{stream:!(Y&&v==F-1)});T.length=0,this.h.g+=c,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=x==200,Bo(this.i,this.u,this.A,this.l,this.R,zt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Nt=this.g;if((Ke=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Ke)){var Ie=Ke;break t}}Ie=null}if(x=Ie)Vr(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pr(this,x);else{this.o=!1,this.s=3,Ht(12),un(this),js(this);break e}}if(this.P){x=!0;let vn;for(;!this.J&&this.C<oe.length;)if(vn=Di(this,oe),vn==Lr){zt==4&&(this.s=4,Ht(14),x=!1),Vr(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==qo){this.s=4,Ht(15),Vr(this.i,this.l,oe,"[Invalid Chunk]"),x=!1;break}else Vr(this.i,this.l,vn,null),pr(this,vn);if(Pr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||oe.length!=0||this.h.h||(this.s=1,Ht(16),x=!1),this.o=this.o&&x,!x)Vr(this.i,this.l,oe,"[Invalid Chunked Response]"),un(this),js(this);else if(0<oe.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Zo(Pt),Pt.M=!0,Ht(11))}}else Vr(this.i,this.l,oe,null),pr(this,oe);zt==4&&un(this),this.o&&!this.J&&(zt==4?zu(this.j,this):(this.o=!1,er(this)))}else Ou(this.g),x==400&&0<oe.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),un(this),js(this)}}}catch{}finally{}};function Pr(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Di(c,v){var x=c.C,T=v.indexOf(`
`,x);return T==-1?Lr:(x=Number(v.substring(x,T)),isNaN(x)?qo:(T+=1,T+x>v.length?Lr:(v=v.slice(T,T+x),c.C=T+x,v)))}mr.prototype.cancel=function(){this.J=!0,un(this)};function er(c){c.S=Date.now()+c.I,bt(c,c.I)}function bt(c,v){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Rs(N(c.ba,c),v)}function _a(c){c.B&&(g.clearTimeout(c.B),c.B=null)}mr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Nu(this.i,this.A),this.L!=2&&(Mr(),Ht(17)),un(this),this.s=2,js(this)):bt(this,this.S-c)};function js(c){c.j.G==0||c.J||zu(c.j,c)}function un(c){_a(c);var v=c.M;v&&typeof v.ma=="function"&&v.ma(),c.M=null,kt(c.U),c.g&&(v=c.g,c.g=null,v.abort(),v.ma())}function pr(c,v){try{var x=c.j;if(x.G!=0&&(x.g==c||Ds(x.h,c))){if(!c.K&&Ds(x.h,c)&&x.G==3){try{var T=x.Da.g.parse(v)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<c.F)Bs(x),zs(x);else break e;Wo(x),Ht(18)}}else x.za=F[1],0<x.za-x.T&&37500>F[2]&&x.F&&x.v==0&&!x.C&&(x.C=Rs(N(x.Za,x),6e3));if(1>=Ru(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Fr(x,11)}else if((c.K||x.g==c)&&Bs(x),!X(v))for(F=x.Da.g.parse(v),v=0;v<F.length;v++){let Ie=F[v];if(x.T=Ie[0],Ie=Ie[1],x.G==2)if(Ie[0]=="c"){x.K=Ie[1],x.ia=Ie[2];const Pt=Ie[3];Pt!=null&&(x.la=Pt,x.j.info("VER="+x.la));const zt=Ie[4];zt!=null&&(x.Aa=zt,x.j.info("SVER="+x.Aa));const Fs=Ie[5];Fs!=null&&typeof Fs=="number"&&0<Fs&&(T=1.5*Fs,x.L=T,x.j.info("backChannelRequestTimeoutMs_="+T)),T=x;const vn=c.g;if(vn){const zi=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zi){var Y=T.h;Y.g||zi.indexOf("spdy")==-1&&zi.indexOf("quic")==-1&&zi.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(ks(Y,Y.h),Y.h=null))}if(T.D){const Hr=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Hr&&(T.ya=Hr,Fe(T.I,T.D,Hr))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-c.F,x.j.info("Handshake RTT: "+x.R+"ms")),T=x;var oe=c;if(T.qa=qu(T,T.J?T.ia:null,T.W),oe.K){Pn(T.h,oe);var Ke=oe,Nt=T.L;Nt&&(Ke.I=Nt),Ke.B&&(_a(Ke),er(Ke)),T.g=oe}else Uu(T);0<x.i.length&&Aa(x)}else Ie[0]!="stop"&&Ie[0]!="close"||Fr(x,7);else x.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?Fr(x,7):Xo(x):Ie[0]!="noop"&&x.l&&x.l.ta(Ie),x.v=0)}}Mr(4)}catch{}}var ah=class{constructor(c,v){this.g=c,this.map=v}};function Fo(c){this.l=c||10,g.PerformanceNavigationTiming?(c=g.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ho(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ru(c){return c.h?1:c.g?c.g.size:0}function Ds(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function ks(c,v){c.g?c.g.add(v):c.h=v}function Pn(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}Fo.prototype.cancel=function(){if(this.i=cn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function cn(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const x of c.g.values())v=v.concat(x.D);return v}return z(c.i)}function Cu(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var v=[],x=c.length,T=0;T<x;T++)v.push(c[T]);return v}v=[],x=0;for(T in c)v[x++]=c[T];return v}function oh(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var v=[];c=c.length;for(var x=0;x<c;x++)v.push(x);return v}v=[],x=0;for(const T in c)v[x++]=T;return v}}}function xa(c,v){if(c.forEach&&typeof c.forEach=="function")c.forEach(v,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,v,void 0);else for(var x=oh(c),T=Cu(c),F=T.length,Y=0;Y<F;Y++)v.call(void 0,T[Y],x&&x[Y],c)}var Go=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ba(c,v){if(c){c=c.split("&");for(var x=0;x<c.length;x++){var T=c[x].indexOf("="),F=null;if(0<=T){var Y=c[x].substring(0,T);F=c[x].substring(T+1)}else Y=c[x];v(Y,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function zr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof zr){this.h=c.h,Os(this,c.j),this.o=c.o,this.g=c.g,ki(this,c.s),this.l=c.l;var v=c.i,x=new gr;x.i=v.i,v.g&&(x.g=new Map(v.g),x.h=v.h),wa(this,x),this.m=c.m}else c&&(v=String(c).match(Go))?(this.h=!1,Os(this,v[1]||"",!0),this.o=Ms(v[2]||""),this.g=Ms(v[3]||"",!0),ki(this,v[4]),this.l=Ms(v[5]||"",!0),wa(this,v[6]||"",!0),this.m=Ms(v[7]||"")):(this.h=!1,this.i=new gr(null,this.h))}zr.prototype.toString=function(){var c=[],v=this.j;v&&c.push(zn(v,$o,!0),":");var x=this.g;return(x||v=="file")&&(c.push("//"),(v=this.o)&&c.push(zn(v,$o,!0),"@"),c.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&c.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(zn(x,x.charAt(0)=="/"?Qo:Iu,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",zn(x,ch)),c.join("")};function pt(c){return new zr(c)}function Os(c,v,x){c.j=x?Ms(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function ki(c,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);c.s=v}else c.s=null}function wa(c,v,x){v instanceof gr?(c.i=v,ju(c.i,c.h)):(x||(v=zn(v,uh)),c.i=new gr(v,c.h))}function Fe(c,v,x){c.i.set(v,x)}function Oi(c){return Fe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ms(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function zn(c,v,x){return typeof c=="string"?(c=encodeURI(c).replace(v,lh),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function lh(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $o=/[#\/\?@]/g,Iu=/[#\?:]/g,Qo=/[#\?]/g,uh=/[#\?@]/g,ch=/#/g;function gr(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Ut(c){c.g||(c.g=new Map,c.h=0,c.i&&ba(c.i,function(v,x){c.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}s=gr.prototype,s.add=function(c,v){Ut(this),this.i=null,c=Nn(this,c);var x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(v),this.h+=1,this};function Ea(c,v){Ut(c),v=Nn(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function Ta(c,v){return Ut(c),v=Nn(c,v),c.g.has(v)}s.forEach=function(c,v){Ut(this),this.g.forEach(function(x,T){x.forEach(function(F){c.call(v,F,T,this)},this)},this)},s.na=function(){Ut(this);const c=Array.from(this.g.values()),v=Array.from(this.g.keys()),x=[];for(let T=0;T<v.length;T++){const F=c[T];for(let Y=0;Y<F.length;Y++)x.push(v[T])}return x},s.V=function(c){Ut(this);let v=[];if(typeof c=="string")Ta(this,c)&&(v=v.concat(this.g.get(Nn(this,c))));else{c=Array.from(this.g.values());for(let x=0;x<c.length;x++)v=v.concat(c[x])}return v},s.set=function(c,v){return Ut(this),this.i=null,c=Nn(this,c),Ta(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},s.get=function(c,v){return c?(c=this.V(c),0<c.length?String(c[0]):v):v};function Br(c,v,x){Ea(c,v),0<x.length&&(c.i=null,c.g.set(Nn(c,v),z(x)),c.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(var x=0;x<v.length;x++){var T=v[x];const Y=encodeURIComponent(String(T)),oe=this.V(T);for(T=0;T<oe.length;T++){var F=Y;oe[T]!==""&&(F+="="+encodeURIComponent(String(oe[T]))),c.push(F)}}return this.i=c.join("&")};function Nn(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function ju(c,v){v&&!c.j&&(Ut(c),c.i=null,c.g.forEach(function(x,T){var F=T.toLowerCase();T!=F&&(Ea(this,T),Br(this,F,x))},c)),c.j=v}function Ko(c,v){const x=new Cs;if(g.Image){const T=new Image;T.onload=V(gn,x,"TestLoadImage: loaded",!0,v,T),T.onerror=V(gn,x,"TestLoadImage: error",!1,v,T),T.onabort=V(gn,x,"TestLoadImage: abort",!1,v,T),T.ontimeout=V(gn,x,"TestLoadImage: timeout",!1,v,T),g.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else v(!1)}function Du(c,v){const x=new Cs,T=new AbortController,F=setTimeout(()=>{T.abort(),gn(x,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:T.signal}).then(Y=>{clearTimeout(F),Y.ok?gn(x,"TestPingServer: ok",!0,v):gn(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(F),gn(x,"TestPingServer: error",!1,v)})}function gn(c,v,x,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(x)}catch{}}function tr(){this.g=new le}function Yo(c,v,x){const T=x||"";try{xa(c,function(F,Y){let oe=F;y(F)&&(oe=pn(F)),v.push(T+Y+"="+encodeURIComponent(oe))})}catch(F){throw v.push(T+"type="+encodeURIComponent("_badmap")),F}}function vr(c){this.l=c.Ub||null,this.j=c.eb||!1}M(vr,Me),vr.prototype.g=function(){return new An(this.l,this.j)},vr.prototype.i=(function(c){return function(){return c}})({});function An(c,v){ft.call(this),this.D=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(An,ft),s=An.prototype,s.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=v,this.readyState=1,Vs(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(v.body=c),(this.D||g).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yr(this)),this.readyState=0},s.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sa(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sa(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}s.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?yr(this):Vs(this),this.readyState==3&&Sa(this)}},s.Ra=function(c){this.g&&(this.response=this.responseText=c,yr(this))},s.Qa=function(c){this.g&&(this.response=c,yr(this))},s.ga=function(){this.g&&yr(this)};function yr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Vs(c)}s.setRequestHeader=function(c,v){this.u.append(c,v)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=v.next();return c.join(`\r
`)};function Vs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(An.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Mi(c){let v="";return ge(c,function(x,T){v+=T,v+=":",v+=x,v+=`\r
`}),v}function Ls(c,v,x){e:{for(T in x){var T=!1;break e}T=!0}T||(x=Mi(x),typeof c=="string"?x!=null&&encodeURIComponent(String(x)):Fe(c,v,x))}function rt(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(rt,ft);var tn=/^https?$/i,qr=["POST","PUT"];s=rt.prototype,s.Ha=function(c){this.J=c},s.ea=function(c,v,x,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fr.g(),this.v=this.o?xt(this.o):xt(fr),this.g.onreadystatechange=N(this.Ea,this);try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(Y){Vi(this,Y);return}if(c=x||"",x=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)x.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const Y of T.keys())x.set(Y,T.get(Y));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(x.keys()).find(Y=>Y.toLowerCase()=="content-type"),F=g.FormData&&c instanceof g.FormData,!(0<=Array.prototype.indexOf.call(qr,v,void 0))||T||F||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,oe]of x)this.g.setRequestHeader(Y,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Na(this),this.u=!0,this.g.send(c),this.u=!1}catch(Y){Vi(this,Y)}};function Vi(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.m=5,Us(c),Ps(c)}function Us(c){c.A||(c.A=!0,_t(c,"complete"),_t(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,_t(this,"complete"),_t(this,"abort"),Ps(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ps(this,!0)),rt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?ku(this):this.bb())},s.bb=function(){ku(this)};function ku(c){if(c.h&&typeof h<"u"&&(!c.v[1]||dn(c)!=4||c.Z()!=2)){if(c.u&&dn(c)==4)Ii(c.Ea,0,c);else if(_t(c,"readystatechange"),dn(c)==4){c.h=!1;try{const oe=c.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var T;if(T=oe===0){var F=String(c.D).match(Go)[1]||null;!F&&g.self&&g.self.location&&(F=g.self.location.protocol.slice(0,-1)),T=!tn.test(F?F.toLowerCase():"")}x=T}if(x)_t(c,"complete"),_t(c,"success");else{c.m=6;try{var Y=2<dn(c)?c.g.statusText:""}catch{Y=""}c.l=Y+" ["+c.Z()+"]",Us(c)}}finally{Ps(c)}}}}function Ps(c,v){if(c.g){Na(c);const x=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,v||_t(c,"ready");try{x.onreadystatechange=T}catch{}}}function Na(c){c.I&&(g.clearTimeout(c.I),c.I=null)}s.isActive=function(){return!!this.g};function dn(c){return c.g?c.g.readyState:0}s.Z=function(){try{return 2<dn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Ft(v)}};function Li(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ou(c){const v={};c=(c.g&&2<=dn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(X(c[T]))continue;var x=O(c[T]);const F=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Y=v[F]||[];v[F]=Y,Y.push(x)}I(v,function(T){return T.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(c,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||v}function Mu(c){this.Aa=0,this.i=[],this.j=new Cs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ui("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ui("baseRetryDelayMs",5e3,c),this.cb=Ui("retryDelaySeedMs",1e4,c),this.Wa=Ui("forwardChannelMaxRetries",2,c),this.wa=Ui("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Fo(c&&c.concurrentRequestLimit),this.Da=new tr,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Mu.prototype,s.la=8,s.G=1,s.connect=function(c,v,x,T){Ht(0),this.W=c,this.H=v||{},x&&T!==void 0&&(this.H.OSID=x,this.H.OAID=T),this.F=this.X,this.I=qu(this,null,this.W),Aa(this)};function Xo(c){if(Vu(c),c.G==3){var v=c.U++,x=pt(c.I);if(Fe(x,"SID",c.K),Fe(x,"RID",v),Fe(x,"TYPE","terminate"),Pi(c,x),v=new mr(c,c.j,v),v.L=2,v.v=Oi(pt(x)),x=!1,g.navigator&&g.navigator.sendBeacon)try{x=g.navigator.sendBeacon(v.v.toString(),"")}catch{}!x&&g.Image&&(new Image().src=v.v,x=!0),x||(v.g=Fu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),er(v)}el(c)}function zs(c){c.g&&(Zo(c),c.g.cancel(),c.g=null)}function Vu(c){zs(c),c.u&&(g.clearTimeout(c.u),c.u=null),Bs(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&g.clearTimeout(c.s),c.s=null)}function Aa(c){if(!Ho(c.h)&&!c.s){c.s=!0;var v=c.Ga;ee||ae(),pe||(ee(),pe=!0),Oe.add(v,c),c.B=0}}function dh(c,v){return Ru(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=v.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Rs(N(c.Ga,c,v),Bu(c,c.B)),c.B++,!0)}s.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const F=new mr(this,this.j,c);let Y=this.o;if(this.S&&(Y?(Y=S(Y),D(Y,this.S)):Y=this.S),this.m!==null||this.O||(F.H=Y,Y=null),this.P)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var T=this.i[x];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(v+=T,4096<v){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=Jo(this,F,v),x=pt(this.I),Fe(x,"RID",c),Fe(x,"CVER",22),this.D&&Fe(x,"X-HTTP-Session-Id",this.D),Pi(this,x),Y&&(this.O?v="headers="+encodeURIComponent(String(Mi(Y)))+"&"+v:this.m&&Ls(x,this.m,Y)),ks(this.h,F),this.Ua&&Fe(x,"TYPE","init"),this.P?(Fe(x,"$req",v),Fe(x,"SID","null"),F.T=!0,ji(F,x,null)):ji(F,x,v),this.G=2}}else this.G==3&&(c?Lu(this,c):this.i.length==0||Ho(this.h)||Lu(this))};function Lu(c,v){var x;v?x=v.l:x=c.U++;const T=pt(c.I);Fe(T,"SID",c.K),Fe(T,"RID",x),Fe(T,"AID",c.T),Pi(c,T),c.m&&c.o&&Ls(T,c.m,c.o),x=new mr(c,c.j,x,c.B+1),c.m===null&&(x.H=c.o),v&&(c.i=v.D.concat(c.i)),v=Jo(c,x,1e3),x.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ks(c.h,x),ji(x,T,v)}function Pi(c,v){c.H&&ge(c.H,function(x,T){Fe(v,T,x)}),c.l&&xa({},function(x,T){Fe(v,T,x)})}function Jo(c,v,x){x=Math.min(c.i.length,x);var T=c.l?N(c.l.Na,c.l,c):null;e:{var F=c.i;let Y=-1;for(;;){const oe=["count="+x];Y==-1?0<x?(Y=F[0].g,oe.push("ofs="+Y)):Y=0:oe.push("ofs="+Y);let Ke=!0;for(let Nt=0;Nt<x;Nt++){let Ie=F[Nt].g;const Pt=F[Nt].map;if(Ie-=Y,0>Ie)Y=Math.max(0,F[Nt].g-100),Ke=!1;else try{Yo(Pt,oe,"req"+Ie+"_")}catch{T&&T(Pt)}}if(Ke){T=oe.join("&");break e}}}return c=c.i.splice(0,x),v.D=c,T}function Uu(c){if(!c.g&&!c.u){c.Y=1;var v=c.Fa;ee||ae(),pe||(ee(),pe=!0),Oe.add(v,c),c.v=0}}function Wo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Rs(N(c.Fa,c),Bu(c,c.v)),c.v++,!0)}s.Fa=function(){if(this.u=null,Pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Rs(N(this.ab,this),c)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),zs(this),Pu(this))};function Zo(c){c.A!=null&&(g.clearTimeout(c.A),c.A=null)}function Pu(c){c.g=new mr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var v=pt(c.qa);Fe(v,"RID","rpc"),Fe(v,"SID",c.K),Fe(v,"AID",c.T),Fe(v,"CI",c.F?"0":"1"),!c.F&&c.ja&&Fe(v,"TO",c.ja),Fe(v,"TYPE","xmlhttp"),Pi(c,v),c.m&&c.o&&Ls(v,c.m,c.o),c.L&&(c.g.I=c.L);var x=c.g;c=c.ia,x.L=1,x.v=Oi(pt(v)),x.m=null,x.P=!0,Ur(x,c)}s.Za=function(){this.C!=null&&(this.C=null,zs(this),Wo(this),Ht(19))};function Bs(c){c.C!=null&&(g.clearTimeout(c.C),c.C=null)}function zu(c,v){var x=null;if(c.g==v){Bs(c),Zo(c),c.g=null;var T=2}else if(Ds(c.h,v))x=v.D,Pn(c.h,v),T=1;else return;if(c.G!=0){if(v.o)if(T==1){x=v.m?v.m.length:0,v=Date.now()-v.F;var F=c.B;T=ya(),_t(T,new Po(T,x)),Aa(c)}else Uu(c);else if(F=v.s,F==3||F==0&&0<v.X||!(T==1&&dh(c,v)||T==2&&Wo(c)))switch(x&&0<x.length&&(v=c.h,v.i=v.i.concat(x)),F){case 1:Fr(c,5);break;case 4:Fr(c,10);break;case 3:Fr(c,6);break;default:Fr(c,2)}}}function Bu(c,v){let x=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(x*=2),x*v}function Fr(c,v){if(c.j.info("Error code "+v),v==2){var x=N(c.fb,c),T=c.Xa;const F=!T;T=new zr(T||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Os(T,"https"),Oi(T),F?Ko(T.toString(),x):Du(T.toString(),x)}else Ht(2);c.G=0,c.l&&c.l.sa(v),el(c),Vu(c)}s.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function el(c){if(c.G=0,c.ka=[],c.l){const v=cn(c.h);(v.length!=0||c.i.length!=0)&&(L(c.ka,v),L(c.ka,c.i),c.h.i.length=0,z(c.i),c.i.length=0),c.l.ra()}}function qu(c,v,x){var T=x instanceof zr?pt(x):new zr(x);if(T.g!="")v&&(T.g=v+"."+T.g),ki(T,T.s);else{var F=g.location;T=F.protocol,v=v?v+"."+F.hostname:F.hostname,F=+F.port;var Y=new zr(null);T&&Os(Y,T),v&&(Y.g=v),F&&ki(Y,F),x&&(Y.l=x),T=Y}return x=c.D,v=c.ya,x&&v&&Fe(T,x,v),Fe(T,"VER",c.la),Pi(c,T),T}function Fu(c,v,x){if(v&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Ca&&!c.pa?new rt(new vr({eb:x})):new rt(c.pa),v.Ha(c.J),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hu(){}s=Hu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ra(){}Ra.prototype.g=function(c,v){return new hn(c,v)};function hn(c,v){ft.call(this),this.g=new Mu(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(c?c["X-WebChannel-Client-Profile"]=v.va:c={"X-WebChannel-Client-Profile":v.va}),this.g.S=c,(c=v&&v.Sb)&&!X(c)&&(this.g.m=c),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!X(v)&&(this.g.D=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new qs(this)}M(hn,ft),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Xo(this.g)},hn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.u&&(x={},x.__data__=pn(c),c=x);v.i.push(new ah(v.Ya++,c)),v.G==3&&Aa(v)},hn.prototype.N=function(){this.g.l=null,delete this.j,Xo(this.g),delete this.g,hn.aa.N.call(this)};function Gu(c){Zn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const x in v){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}M(Gu,Zn);function $u(){Sn.call(this),this.status=1}M($u,Sn);function qs(c){this.g=c}M(qs,Hu),qs.prototype.ua=function(){_t(this.g,"a")},qs.prototype.ta=function(c){_t(this.g,new Gu(c))},qs.prototype.sa=function(c){_t(this.g,new $u)},qs.prototype.ra=function(){_t(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,mb=function(){return new Ra},fb=function(){return ya()},hb=Un,Pm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mt.NO_ERROR=0,mt.TIMEOUT=8,mt.HTTP_ERROR=6,ad=mt,Gt.COMPLETE="complete",db=Gt,ln.EventType=Ot,Ot.OPEN="a",Ot.CLOSE="b",Ot.ERROR="c",Ot.MESSAGE="d",ft.prototype.listen=ft.prototype.K,ql=ln,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,cb=rt}).apply(typeof Jc<"u"?Jc:typeof self<"u"?self:typeof window<"u"?window:{});const o_="@firebase/firestore";let sn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");let No="10.14.0";const da=new sp("@firebase/firestore");function Ll(){return da.logLevel}function fe(s,...e){if(da.logLevel<=ze.DEBUG){const n=e.map(gp);da.debug(`Firestore (${No}): ${s}`,...n)}}function ps(s,...e){if(da.logLevel<=ze.ERROR){const n=e.map(gp);da.error(`Firestore (${No}): ${s}`,...n)}}function po(s,...e){if(da.logLevel<=ze.WARN){const n=e.map(gp);da.warn(`Firestore (${No}): ${s}`,...n)}}function gp(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function Ee(s="Unexpected state"){const e=`FIRESTORE (${No}) INTERNAL ASSERTION FAILED: `+s;throw ps(e),new Error(e)}function Je(s,e){s||Ee()}function Ne(s,e){return s}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends _s{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ds{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class pb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(sn.UNAUTHENTICATED)))}shutdown(){}}class kN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class ON{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Je(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,n(p)):Promise.resolve();let u=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ds,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ds)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Je(typeof i.accessToken=="string"),new pb(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string"),new sn(e)}}class MN{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class VN{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new MN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class LN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Je(this.o===void 0);const i=u=>{u.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,fe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const o=u=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Je(typeof n.token=="string"),this.R=n.token,new LN(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function PN(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}class gb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=PN(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<n&&(i+=e.charAt(o[u]%e.length))}return i}}function $e(s,e){return s<e?-1:s>e?1:0}function go(s,e,n){return s.length===e.length&&s.every(((i,o)=>n(i,e[o])))}class Vt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ce(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Vt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Vt(0,0))}static max(){return new Se(new Vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class eu{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ee(),i===void 0?i=e.length-n:i>e.length-n&&Ee(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return eu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof eu?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const u=e.get(o),h=n.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class at extends eu{construct(e,n,i){return new at(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new at(n)}static emptyPath(){return new at([])}}const zN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends eu{construct(e,n,i){return new Jt(e,n,i)}static isValidIdentifier(e){return zN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Jt(["__name__"])}static fromServerFormat(e){const n=[];let i="",o=0;const u=()=>{if(i.length===0)throw new ce(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new ce(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(i+=g,o++):(u(),o++)}if(u(),h)throw new ce(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(n)}static emptyPath(){return new Jt([])}}class _e{constructor(e){this.path=e}static fromPath(e){return new _e(at.fromString(e))}static fromName(e){return new _e(at.fromString(e).popFirst(5))}static empty(){return new _e(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new at(e.slice()))}}function BN(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(i===1e9?new Vt(n+1,0):new Vt(n,i));return new Ei(o,_e.empty(),e)}function qN(s){return new Ei(s.readTime,s.key,-1)}class Ei{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ei(Se.min(),_e.empty(),-1)}static max(){return new Ei(Se.max(),_e.empty(),-1)}}function FN(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(s.documentKey,e.documentKey),n!==0?n:$e(s.largestBatchId,e.largestBatchId))}const HN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function gu(s){if(s.code!==re.FAILED_PRECONDITION||s.message!==HN)throw s;fe("LocalStore","Unexpectedly lost primary lease")}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie(((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.reject(n)}static resolve(e){return new ie(((n,i)=>{n(e)}))}static reject(e){return new ie(((n,i)=>{i(e)}))}static waitFor(e){return new ie(((n,i)=>{let o=0,u=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++u,h&&u===o&&n()}),(p=>i(p)))})),h=!0,u===o&&n()}))}static or(e){let n=ie.resolve(!1);for(const i of e)n=n.next((o=>o?ie.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,u)=>{i.push(n.call(this,o,u))})),this.waitFor(i)}static mapArray(e,n){return new ie(((i,o)=>{const u=e.length,h=new Array(u);let g=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next((b=>{h[y]=b,++g,g===u&&i(h)}),(b=>o(b)))}}))}static doWhile(e,n){return new ie(((i,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):i()};u()}))}}function $N(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vu(s){return s.name==="IndexedDbTransactionError"}class vp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}vp.oe=-1;function Bd(s){return s==null}function bd(s){return s===0&&1/s==-1/0}function QN(s){return typeof s=="number"&&Number.isInteger(s)&&!bd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}function l_(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function pa(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function vb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class ht{constructor(e,n){this.comparator=e,this.root=n||Xt.EMPTY}insert(e,n){return new ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wc(this.root,e,this.comparator,!0)}}class Wc{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,n,i,o,u){this.key=e,this.value=n,this.color=i??Xt.RED,this.left=o??Xt.EMPTY,this.right=u??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,u){return new Xt(e??this.key,n??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,i),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,n,i,o,u){return this}insert(e,n,i){return new Xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new u_(this.data.getIterator())}getIteratorFrom(e){return new u_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Wt(this.comparator);return n.data=e,n}}class u_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Mn{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new Mn([])}unionWith(e){let n=new Wt(Jt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class yb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new yb("Invalid base64 string: "+u):u}})(e);return new Zt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const KN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ti(s){if(Je(!!s),typeof s=="string"){let e=0;const n=KN.exec(s);if(Je(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(s.seconds),nanos:Tt(s.nanos)}}function Tt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ha(s){return typeof s=="string"?Zt.fromBase64String(s):Zt.fromUint8Array(s)}function yp(s){var e,n;return((n=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function _p(s){const e=s.mapValue.fields.__previous_value__;return yp(e)?_p(e):e}function tu(s){const e=Ti(s.mapValue.fields.__local_write_time__.timestampValue);return new Vt(e.seconds,e.nanos)}class YN{constructor(e,n,i,o,u,h,g,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y}}class nu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new nu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}const Zc={mapValue:{}};function fa(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?yp(s)?4:JN(s)?9007199254740991:XN(s)?10:11:Ee()}function Rr(s,e){if(s===e)return!0;const n=fa(s);if(n!==fa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return tu(s).isEqual(tu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Ti(o.timestampValue),g=Ti(u.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return ha(o.bytesValue).isEqual(ha(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return Tt(o.geoPointValue.latitude)===Tt(u.geoPointValue.latitude)&&Tt(o.geoPointValue.longitude)===Tt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Tt(o.integerValue)===Tt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=Tt(o.doubleValue),g=Tt(u.doubleValue);return h===g?bd(h)===bd(g):isNaN(h)&&isNaN(g)}return!1})(s,e);case 9:return go(s.arrayValue.values||[],e.arrayValue.values||[],Rr);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},g=u.mapValue.fields||{};if(l_(h)!==l_(g))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(g[p]===void 0||!Rr(h[p],g[p])))return!1;return!0})(s,e);default:return Ee()}}function ru(s,e){return(s.values||[]).find((n=>Rr(n,e)))!==void 0}function vo(s,e){if(s===e)return 0;const n=fa(s),i=fa(e);if(n!==i)return $e(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const g=Tt(u.integerValue||u.doubleValue),p=Tt(h.integerValue||h.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(s,e);case 3:return c_(s.timestampValue,e.timestampValue);case 4:return c_(tu(s),tu(e));case 5:return $e(s.stringValue,e.stringValue);case 6:return(function(u,h){const g=ha(u),p=ha(h);return g.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const g=u.split("/"),p=h.split("/");for(let y=0;y<g.length&&y<p.length;y++){const b=$e(g[y],p[y]);if(b!==0)return b}return $e(g.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const g=$e(Tt(u.latitude),Tt(h.latitude));return g!==0?g:$e(Tt(u.longitude),Tt(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return d_(s.arrayValue,e.arrayValue);case 10:return(function(u,h){var g,p,y,b;const w=u.fields||{},N=h.fields||{},V=(g=w.value)===null||g===void 0?void 0:g.arrayValue,M=(p=N.value)===null||p===void 0?void 0:p.arrayValue,z=$e(((y=V?.values)===null||y===void 0?void 0:y.length)||0,((b=M?.values)===null||b===void 0?void 0:b.length)||0);return z!==0?z:d_(V,M)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Zc.mapValue&&h===Zc.mapValue)return 0;if(u===Zc.mapValue)return 1;if(h===Zc.mapValue)return-1;const g=u.fields||{},p=Object.keys(g),y=h.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let w=0;w<p.length&&w<b.length;++w){const N=$e(p[w],b[w]);if(N!==0)return N;const V=vo(g[p[w]],y[b[w]]);if(V!==0)return V}return $e(p.length,b.length)})(s.mapValue,e.mapValue);default:throw Ee()}}function c_(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return $e(s,e);const n=Ti(s),i=Ti(e),o=$e(n.seconds,i.seconds);return o!==0?o:$e(n.nanos,i.nanos)}function d_(s,e){const n=s.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const u=vo(n[o],i[o]);if(u)return u}return $e(n.length,i.length)}function yo(s){return zm(s)}function zm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=Ti(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return ha(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return _e.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",o=!0;for(const u of n.values||[])o?o=!1:i+=",",i+=zm(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of i)u?u=!1:o+=",",o+=`${h}:${zm(n.fields[h])}`;return o+"}"})(s.mapValue):Ee()}function h_(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Bm(s){return!!s&&"integerValue"in s}function xp(s){return!!s&&"arrayValue"in s}function f_(s){return!!s&&"nullValue"in s}function m_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function od(s){return!!s&&"mapValue"in s}function XN(s){var e,n;return((n=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ql(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return pa(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Ql(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ql(s.arrayValue.values[n]);return e}return Object.assign({},s)}function JN(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!od(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ql(n)}setAll(e){let n=Jt.emptyPath(),i={},o=[];e.forEach(((h,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,i,o),i={},o=[],n=g.popLast()}h?i[g.lastSegment()]=Ql(h):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,o)}delete(e){const n=this.field(e.popLast());od(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];od(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){pa(n,((o,u)=>e[o]=u));for(const o of i)delete e[o]}clone(){return new En(Ql(this.value))}}function _b(s){const e=[];return pa(s.fields,((n,i)=>{const o=new Jt([n]);if(od(i)){const u=_b(i.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Mn(e)}class an{constructor(e,n,i,o,u,h,g){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=u,this.data=h,this.documentState=g}static newInvalidDocument(e){return new an(e,0,Se.min(),Se.min(),Se.min(),En.empty(),0)}static newFoundDocument(e,n,i,o){return new an(e,1,n,Se.min(),i,o,0)}static newNoDocument(e,n){return new an(e,2,n,Se.min(),Se.min(),En.empty(),0)}static newUnknownDocument(e,n){return new an(e,3,n,Se.min(),Se.min(),En.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wd{constructor(e,n){this.position=e,this.inclusive=n}}function p_(s,e,n){let i=0;for(let o=0;o<s.position.length;o++){const u=e[o],h=s.position[o];if(u.field.isKeyField()?i=_e.comparator(_e.fromName(h.referenceValue),n.key):i=vo(h,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function g_(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Rr(s.position[n],e.position[n]))return!1;return!0}class su{constructor(e,n="asc"){this.field=e,this.dir=n}}function WN(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class xb{}class Dt extends xb{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new eA(e,n,i):n==="array-contains"?new rA(e,i):n==="in"?new sA(e,i):n==="not-in"?new iA(e,i):n==="array-contains-any"?new aA(e,i):new Dt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new tA(e,i):new nA(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vo(n,this.value)):n!==null&&fa(this.value)===fa(n)&&this.matchesComparison(vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class or extends xb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new or(e,n)}matches(e){return bb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bb(s){return s.op==="and"}function wb(s){return ZN(s)&&bb(s)}function ZN(s){for(const e of s.filters)if(e instanceof or)return!1;return!0}function qm(s){if(s instanceof Dt)return s.field.canonicalString()+s.op.toString()+yo(s.value);if(wb(s))return s.filters.map((e=>qm(e))).join(",");{const e=s.filters.map((n=>qm(n))).join(",");return`${s.op}(${e})`}}function Eb(s,e){return s instanceof Dt?(function(i,o){return o instanceof Dt&&i.op===o.op&&i.field.isEqual(o.field)&&Rr(i.value,o.value)})(s,e):s instanceof or?(function(i,o){return o instanceof or&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((u,h,g)=>u&&Eb(h,o.filters[g])),!0):!1})(s,e):void Ee()}function Tb(s){return s instanceof Dt?(function(n){return`${n.field.canonicalString()} ${n.op} ${yo(n.value)}`})(s):s instanceof or?(function(n){return n.op.toString()+" {"+n.getFilters().map(Tb).join(" ,")+"}"})(s):"Filter"}class eA extends Dt{constructor(e,n,i){super(e,n,i),this.key=_e.fromName(i.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class tA extends Dt{constructor(e,n){super(e,"in",n),this.keys=Sb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class nA extends Dt{constructor(e,n){super(e,"not-in",n),this.keys=Sb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Sb(s,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>_e.fromName(i.referenceValue)))}class rA extends Dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xp(n)&&ru(n.arrayValue,this.value)}}class sA extends Dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ru(this.value.arrayValue,n)}}class iA extends Dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ru(this.value.arrayValue,n)}}class aA extends Dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>ru(this.value.arrayValue,i)))}}class oA{constructor(e,n=null,i=[],o=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=h,this.endAt=g,this.ue=null}}function v_(s,e=null,n=[],i=[],o=null,u=null,h=null){return new oA(s,e,n,i,o,u,h)}function bp(s){const e=Ne(s);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>qm(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Bd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>yo(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>yo(i))).join(",")),e.ue=n}return e.ue}function wp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!WN(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Eb(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!g_(s.startAt,e.startAt)&&g_(s.endAt,e.endAt)}function Fm(s){return _e.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Ao{constructor(e,n=null,i=[],o=[],u=null,h="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function lA(s,e,n,i,o,u,h,g){return new Ao(s,e,n,i,o,u,h,g)}function Ep(s){return new Ao(s)}function y_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Nb(s){return s.collectionGroup!==null}function Kl(s){const e=Ne(s);if(e.ce===null){e.ce=[];const n=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new Wt(Jt.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.ce.push(new su(u,i))})),n.has(Jt.keyField().canonicalString())||e.ce.push(new su(Jt.keyField(),i))}return e.ce}function Nr(s){const e=Ne(s);return e.le||(e.le=uA(e,Kl(s))),e.le}function uA(s,e){if(s.limitType==="F")return v_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new su(o.field,u)}));const n=s.endAt?new wd(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new wd(s.startAt.position,s.startAt.inclusive):null;return v_(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Hm(s,e){const n=s.filters.concat([e]);return new Ao(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Ed(s,e,n){return new Ao(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function qd(s,e){return wp(Nr(s),Nr(e))&&s.limitType===e.limitType}function Ab(s){return`${bp(Nr(s))}|lt:${s.limitType}`}function ro(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>Tb(o))).join(", ")}]`),Bd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>yo(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>yo(o))).join(",")),`Target(${i})`})(Nr(s))}; limitType=${s.limitType})`}function Fd(s,e){return e.isFoundDocument()&&(function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):_e.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,o){for(const u of Kl(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(h,g,p){const y=p_(h,g,p);return h.inclusive?y<=0:y<0})(i.startAt,Kl(i),o)||i.endAt&&!(function(h,g,p){const y=p_(h,g,p);return h.inclusive?y>=0:y>0})(i.endAt,Kl(i),o))})(s,e)}function cA(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Rb(s){return(e,n)=>{let i=!1;for(const o of Kl(s)){const u=dA(o,e,n);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function dA(s,e,n){const i=s.field.isKeyField()?_e.comparator(e.key,n.key):(function(u,h,g){const p=h.data.field(u),y=g.data.field(u);return p!==null&&y!==null?vo(p,y):Ee()})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ee()}}class Ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){pa(this.inner,((n,i)=>{for(const[o,u]of i)e(o,u)}))}isEmpty(){return vb(this.inner)}size(){return this.innerSize}}const hA=new ht(_e.comparator);function gs(){return hA}const Cb=new ht(_e.comparator);function Fl(...s){let e=Cb;for(const n of s)e=e.insert(n.key,n);return e}function Ib(s){let e=Cb;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ra(){return Yl()}function jb(){return Yl()}function Yl(){return new Ro((s=>s.toString()),((s,e)=>s.isEqual(e)))}const fA=new ht(_e.comparator),mA=new Wt(_e.comparator);function Ue(...s){let e=mA;for(const n of s)e=e.add(n);return e}const pA=new Wt($e);function gA(){return pA}function Tp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bd(e)?"-0":e}}function Db(s){return{integerValue:""+s}}function vA(s,e){return QN(e)?Db(e):Tp(s,e)}class Hd{constructor(){this._=void 0}}function yA(s,e,n){return s instanceof iu?(function(o,u){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&yp(u)&&(u=_p(u)),u&&(h.fields.__previous_value__=u),{mapValue:h}})(n,e):s instanceof au?Ob(s,e):s instanceof ou?Mb(s,e):(function(o,u){const h=kb(o,u),g=__(h)+__(o.Pe);return Bm(h)&&Bm(o.Pe)?Db(g):Tp(o.serializer,g)})(s,e)}function _A(s,e,n){return s instanceof au?Ob(s,e):s instanceof ou?Mb(s,e):n}function kb(s,e){return s instanceof Td?(function(i){return Bm(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class iu extends Hd{}class au extends Hd{constructor(e){super(),this.elements=e}}function Ob(s,e){const n=Vb(e);for(const i of s.elements)n.some((o=>Rr(o,i)))||n.push(i);return{arrayValue:{values:n}}}class ou extends Hd{constructor(e){super(),this.elements=e}}function Mb(s,e){let n=Vb(e);for(const i of s.elements)n=n.filter((o=>!Rr(o,i)));return{arrayValue:{values:n}}}class Td extends Hd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function __(s){return Tt(s.integerValue||s.doubleValue)}function Vb(s){return xp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class xA{constructor(e,n){this.field=e,this.transform=n}}function bA(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof au&&o instanceof au||i instanceof ou&&o instanceof ou?go(i.elements,o.elements,Rr):i instanceof Td&&o instanceof Td?Rr(i.Pe,o.Pe):i instanceof iu&&o instanceof iu})(s.transform,e.transform)}class wA{constructor(e,n){this.version=e,this.transformResults=n}}class ir{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ld(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Gd{}function Lb(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Pb(s.key,ir.none()):new yu(s.key,s.data,ir.none());{const n=s.data,i=En.empty();let o=new Wt(Jt.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?i.delete(u):i.set(u,h),o=o.add(u)}return new Ai(s.key,i,new Mn(o.toArray()),ir.none())}}function EA(s,e,n){s instanceof yu?(function(o,u,h){const g=o.value.clone(),p=b_(o.fieldTransforms,u,h.transformResults);g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):s instanceof Ai?(function(o,u,h){if(!ld(o.precondition,u))return void u.convertToUnknownDocument(h.version);const g=b_(o.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(Ub(o)),p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Xl(s,e,n,i){return s instanceof yu?(function(u,h,g,p){if(!ld(u.precondition,h))return g;const y=u.value.clone(),b=w_(u.fieldTransforms,p,h);return y.setAll(b),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(s,e,n,i):s instanceof Ai?(function(u,h,g,p){if(!ld(u.precondition,h))return g;const y=w_(u.fieldTransforms,p,h),b=h.data;return b.setAll(Ub(u)),b.setAll(y),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,e,n,i):(function(u,h,g){return ld(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(s,e,n)}function TA(s,e){let n=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),u=kb(i.transform,o||null);u!=null&&(n===null&&(n=En.empty()),n.set(i.field,u))}return n||null}function x_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&go(i,o,((u,h)=>bA(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class yu extends Gd{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ai extends Gd{constructor(e,n,i,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Ub(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function b_(s,e,n){const i=new Map;Je(s.length===n.length);for(let o=0;o<n.length;o++){const u=s[o],h=u.transform,g=e.data.field(u.field);i.set(u.field,_A(h,g,n[o]))}return i}function w_(s,e,n){const i=new Map;for(const o of s){const u=o.transform,h=n.data.field(o.field);i.set(o.field,yA(u,h,e))}return i}class Pb extends Gd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SA extends Gd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class NA{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&EA(u,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Xl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Xl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=jb();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let g=this.applyToLocalView(h,u.mutatedFields);g=n.has(o.key)?null:g;const p=Lb(h,g);p!==null&&i.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Se.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,((n,i)=>x_(n,i)))&&go(this.baseMutations,e.baseMutations,((n,i)=>x_(n,i)))}}class Sp{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){Je(e.mutations.length===i.length);let o=(function(){return fA})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,i[h].version);return new Sp(e,n,i,o)}}class AA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class RA{constructor(e,n){this.count=e,this.unchangedNames=n}}var jt,qe;function CA(s){switch(s){default:return Ee();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function zb(s){if(s===void 0)return ps("GRPC error has no .code"),re.UNKNOWN;switch(s){case jt.OK:return re.OK;case jt.CANCELLED:return re.CANCELLED;case jt.UNKNOWN:return re.UNKNOWN;case jt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case jt.INTERNAL:return re.INTERNAL;case jt.UNAVAILABLE:return re.UNAVAILABLE;case jt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case jt.NOT_FOUND:return re.NOT_FOUND;case jt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case jt.ABORTED:return re.ABORTED;case jt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case jt.DATA_LOSS:return re.DATA_LOSS;default:return Ee()}}(qe=jt||(jt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";function IA(){return new TextEncoder}const jA=new ia([4294967295,4294967295],0);function E_(s){const e=IA().encode(s),n=new ub;return n.update(e),new Uint8Array(n.digest())}function T_(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ia([n,i],0),new ia([o,u],0)]}class Np{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Hl(`Invalid padding: ${n}`);if(i<0)throw new Hl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Hl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Hl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ia.fromNumber(this.Ie)}Ee(e,n,i){let o=e.add(n.multiply(ia.fromNumber(i)));return o.compare(jA)===1&&(o=new ia([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=E_(e),[i,o]=T_(n);for(let u=0;u<this.hashCount;u++){const h=this.Ee(i,o,u);if(!this.de(h))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Np(u,o,n);return i.forEach((g=>h.insert(g))),h}insert(e){if(this.Ie===0)return;const n=E_(e),[i,o]=T_(n);for(let u=0;u<this.hashCount;u++){const h=this.Ee(i,o,u);this.Ae(h)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class $d{constructor(e,n,i,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new $d(Se.min(),o,new ht($e),gs(),Ue())}}class _u{constructor(e,n,i,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new _u(i,n,Ue(),Ue(),Ue())}}class ud{constructor(e,n,i,o){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=o}}class Bb{constructor(e,n){this.targetId=e,this.me=n}}class qb{constructor(e,n,i=Zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class S_{constructor(){this.fe=0,this.ge=A_(),this.pe=Zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ue(),n=Ue(),i=Ue();return this.ge.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Ee()}})),new _u(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=A_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class DA{constructor(e){this.Le=e,this.Be=new Map,this.ke=gs(),this.qe=N_(),this.Qe=new ht($e)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Ee()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((i,o)=>{this.ze(o)&&n(o)}))}He(e){const n=e.targetId,i=e.me.count,o=this.Je(n);if(o){const u=o.target;if(Fm(u))if(i===0){const h=new _e(u.path);this.Ue(n,h,an.newNoDocument(h,Se.min()))}else Je(i===1);else{const h=this.Ye(n);if(h!==i){const g=this.Ze(e),p=g?this.Xe(g,e,h):1;if(p!==0){this.je(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,y)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=n;let h,g;try{h=ha(i).toUint8Array()}catch(p){if(p instanceof yb)return po("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Np(h,o,u)}catch(p){return po(p instanceof Hl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.Ie===0?null:g}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let o=0;return i.forEach((u=>{const h=this.Le.tt(),g=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.Ue(n,u,null),o++)})),o}rt(e){const n=new Map;this.Be.forEach(((u,h)=>{const g=this.Je(h);if(g){if(u.current&&Fm(g.target)){const p=new _e(g.target.path);this.ke.get(p)!==null||this.it(h,p)||this.Ue(h,p,an.newNoDocument(p,e))}u.be&&(n.set(h,u.ve()),u.Ce())}}));let i=Ue();this.qe.forEach(((u,h)=>{let g=!0;h.forEachWhile((p=>{const y=this.Je(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(i=i.add(u))})),this.ke.forEach(((u,h)=>h.setReadTime(e)));const o=new $d(e,n,this.Qe,this.ke,i);return this.ke=gs(),this.qe=N_(),this.Qe=new ht($e),o}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new S_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Wt($e),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new S_),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function N_(){return new ht(_e.comparator)}function A_(){return new ht(_e.comparator)}const kA={asc:"ASCENDING",desc:"DESCENDING"},OA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MA={and:"AND",or:"OR"};class VA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gm(s,e){return s.useProto3Json||Bd(e)?e:{value:e}}function Sd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fb(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function LA(s,e){return Sd(s,e.toTimestamp())}function Ar(s){return Je(!!s),Se.fromTimestamp((function(n){const i=Ti(n);return new Vt(i.seconds,i.nanos)})(s))}function Ap(s,e){return $m(s,e).canonicalString()}function $m(s,e){const n=(function(o){return new at(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function Hb(s){const e=at.fromString(s);return Je(Yb(e)),e}function Qm(s,e){return Ap(s.databaseId,e.path)}function mm(s,e){const n=Hb(e);if(n.get(1)!==s.databaseId.projectId)throw new ce(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ce(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new _e($b(n))}function Gb(s,e){return Ap(s.databaseId,e)}function UA(s){const e=Hb(s);return e.length===4?at.emptyPath():$b(e)}function Km(s){return new at(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function $b(s){return Je(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function R_(s,e,n){return{name:Qm(s,e),fields:n.value.mapValue.fields}}function PA(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ee()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,b){return y.useProto3Json?(Je(b===void 0||typeof b=="string"),Zt.fromBase64String(b||"")):(Je(b===void 0||b instanceof Buffer||b instanceof Uint8Array),Zt.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(y){const b=y.code===void 0?re.UNKNOWN:zb(y.code);return new ce(b,y.message||"")})(h);n=new qb(i,o,u,g||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=mm(s,i.document.name),u=Ar(i.document.updateTime),h=i.document.createTime?Ar(i.document.createTime):Se.min(),g=new En({mapValue:{fields:i.document.fields}}),p=an.newFoundDocument(o,u,h,g),y=i.targetIds||[],b=i.removedTargetIds||[];n=new ud(y,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=mm(s,i.document),u=i.readTime?Ar(i.readTime):Se.min(),h=an.newNoDocument(o,u),g=i.removedTargetIds||[];n=new ud([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=mm(s,i.document),u=i.removedTargetIds||[];n=new ud([],u,o,null)}else{if(!("filter"in e))return Ee();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,h=new RA(o,u),g=i.targetId;n=new Bb(g,h)}}return n}function zA(s,e){let n;if(e instanceof yu)n={update:R_(s,e.key,e.value)};else if(e instanceof Pb)n={delete:Qm(s,e.key)};else if(e instanceof Ai)n={update:R_(s,e.key,e.data),updateMask:YA(e.fieldMask)};else{if(!(e instanceof SA))return Ee();n={verify:Qm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,h){const g=h.transform;if(g instanceof iu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof au)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof ou)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Td)return{fieldPath:h.field.canonicalString(),increment:g.Pe};throw Ee()})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:LA(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ee()})(s,e.precondition)),n}function BA(s,e){return s&&s.length>0?(Je(e!==void 0),s.map((n=>(function(o,u){let h=o.updateTime?Ar(o.updateTime):Ar(u);return h.isEqual(Se.min())&&(h=Ar(u)),new wA(h,o.transformResults||[])})(n,e)))):[]}function qA(s,e){return{documents:[Gb(s,e.path)]}}function FA(s,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Gb(s,o);const u=(function(y){if(y.length!==0)return Kb(or.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(y){if(y.length!==0)return y.map((b=>(function(N){return{field:so(N.field),direction:$A(N.dir)}})(b)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const g=Gm(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{_t:n,parent:o}}function HA(s){let e=UA(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){Je(i===1);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=(function(w){const N=Qb(w);return N instanceof or&&wb(N)?N.getFilters():[N]})(n.where));let h=[];n.orderBy&&(h=(function(w){return w.map((N=>(function(M){return new su(io(M.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(N)))})(n.orderBy));let g=null;n.limit&&(g=(function(w){let N;return N=typeof w=="object"?w.value:w,Bd(N)?null:N})(n.limit));let p=null;n.startAt&&(p=(function(w){const N=!!w.before,V=w.values||[];return new wd(V,N)})(n.startAt));let y=null;return n.endAt&&(y=(function(w){const N=!w.before,V=w.values||[];return new wd(V,N)})(n.endAt)),lA(e,o,h,u,g,"F",p,y)}function GA(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Qb(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=io(n.unaryFilter.field);return Dt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=io(n.unaryFilter.field);return Dt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=io(n.unaryFilter.field);return Dt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=io(n.unaryFilter.field);return Dt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}})(s):s.fieldFilter!==void 0?(function(n){return Dt.create(io(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return or.create(n.compositeFilter.filters.map((i=>Qb(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee()}})(n.compositeFilter.op))})(s):Ee()}function $A(s){return kA[s]}function QA(s){return OA[s]}function KA(s){return MA[s]}function so(s){return{fieldPath:s.canonicalString()}}function io(s){return Jt.fromServerFormat(s.fieldPath)}function Kb(s){return s instanceof Dt?(function(n){if(n.op==="=="){if(m_(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NAN"}};if(f_(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(m_(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NAN"}};if(f_(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:so(n.field),op:QA(n.op),value:n.value}}})(s):s instanceof or?(function(n){const i=n.getFilters().map((o=>Kb(o)));return i.length===1?i[0]:{compositeFilter:{op:KA(n.op),filters:i}}})(s):Ee()}function YA(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Yb(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class vi{constructor(e,n,i,o,u=Se.min(),h=Se.min(),g=Zt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class XA{constructor(e){this.ct=e}}function JA(s){const e=HA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Ed(e,e.limit,"L"):e}class WA{constructor(){this.un=new ZA}addToCollectionParentIndex(e,n){return this.un.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(Ei.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(Ei.min())}updateCollectionGroup(e,n,i){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class ZA{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Wt(at.comparator),u=!o.has(i);return this.index[n]=o.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Wt(at.comparator)).toArray()}}class _o{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new _o(0)}static kn(){return new _o(-1)}}class eR{constructor(){this.changes=new Ro((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ie.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class nR{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&Xl(i.mutation,o,Mn.empty(),Vt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ue()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ue()){const o=ra();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((u=>{let h=Fl();return u.forEach(((g,p)=>{h=h.insert(g,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const i=ra();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ue())))}populateOverlays(e,n,i){const o=[];return i.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,g)=>{n.set(h,g)}))}))}computeViews(e,n,i,o){let u=gs();const h=Yl(),g=(function(){return Yl()})();return n.forEach(((p,y)=>{const b=i.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof Ai)?u=u.insert(y.key,y):b!==void 0?(h.set(y.key,b.mutation.getFieldMask()),Xl(b.mutation,y,b.mutation.getFieldMask(),Vt.now())):h.set(y.key,Mn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((y,b)=>h.set(y,b))),n.forEach(((y,b)=>{var w;return g.set(y,new tR(b,(w=h.get(y))!==null&&w!==void 0?w:null))})),g)))}recalculateAndSaveOverlays(e,n){const i=Yl();let o=new ht(((h,g)=>h-g)),u=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const g of h)g.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let b=i.get(p)||Mn.empty();b=g.applyToLocalView(y,b),i.set(p,b);const w=(o.get(g.batchId)||Ue()).add(p);o=o.insert(g.batchId,w)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,b=p.value,w=jb();b.forEach((N=>{if(!u.has(N)){const V=Lb(n.get(N),i.get(N));V!==null&&w.set(N,V),u=u.add(N)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,w))}return ie.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(h){return _e.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Nb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-u.size):ie.resolve(ra());let g=-1,p=u;return h.next((y=>ie.forEach(y,((b,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),u.get(b)?ie.resolve():this.remoteDocumentCache.getEntry(e,b).next((N=>{p=p.insert(b,N)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,p,y,Ue()))).next((b=>({batchId:g,changes:Ib(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next((i=>{let o=Fl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const u=n.collectionGroup;let h=Fl();return this.indexManager.getCollectionParents(e,u).next((g=>ie.forEach(g,(p=>{const y=(function(w,N){return new Ao(N,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((b=>{b.forEach(((w,N)=>{h=h.insert(w,N)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,o)))).next((h=>{u.forEach(((p,y)=>{const b=y.getKey();h.get(b)===null&&(h=h.insert(b,an.newInvalidDocument(b)))}));let g=Fl();return h.forEach(((p,y)=>{const b=u.get(p);b!==void 0&&Xl(b.mutation,y,Mn.empty(),Vt.now()),Fd(n,y)&&(g=g.insert(p,y))})),g}))}}class rR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ie.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ar(o.createTime)}})(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(o){return{name:o.name,query:JA(o.bundledQuery),readTime:Ar(o.readTime)}})(n)),ie.resolve()}}class sR{constructor(){this.overlays=new ht(_e.comparator),this.Ir=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ra();return ie.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&i.set(o,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,u)=>{this.ht(e,n,u)})),ie.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Ir.delete(i)),ie.resolve()}getOverlaysForCollection(e,n,i){const o=ra(),u=n.length+1,h=new _e(n.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>i&&o.set(p.getKey(),p)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let u=new ht(((y,b)=>y-b));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let b=u.get(y.largestBatchId);b===null&&(b=ra(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const g=ra(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,b)=>g.set(y,b))),!(g.size()>=o)););return ie.resolve(g)}ht(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new AA(n,i));let u=this.Ir.get(n);u===void 0&&(u=Ue(),this.Ir.set(n,u)),this.Ir.set(n,u.add(i.key))}}class iR{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}class Rp{constructor(){this.Tr=new Wt(qt.Er),this.dr=new Wt(qt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new qt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Vr(new qt(e,n))}mr(e,n){e.forEach((i=>this.removeReference(i,n)))}gr(e){const n=new _e(new at([])),i=new qt(n,e),o=new qt(n,e+1),u=[];return this.dr.forEachInRange([i,o],(h=>{this.Vr(h),u.push(h.key)})),u}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new _e(new at([])),i=new qt(n,e),o=new qt(n,e+1);let u=Ue();return this.dr.forEachInRange([i,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new qt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class qt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return _e.comparator(e.key,n.key)||$e(e.wr,n.wr)}static Ar(e,n){return $e(e.wr,n.wr)||_e.comparator(e.key,n.key)}}class aR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Wt(qt.Er)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const u=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new NA(u,n,i,o);this.mutationQueue.push(h);for(const g of o)this.br=this.br.add(new qt(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ie.resolve(h)}lookupMutationBatch(e,n){return ie.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.vr(i),u=o<0?0:o;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new qt(n,0),o=new qt(n,Number.POSITIVE_INFINITY),u=[];return this.br.forEachInRange([i,o],(h=>{const g=this.Dr(h.wr);u.push(g)})),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Wt($e);return n.forEach((o=>{const u=new qt(o,0),h=new qt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([u,h],(g=>{i=i.add(g.wr)}))})),ie.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let u=i;_e.isDocumentKey(u)||(u=u.child(""));const h=new qt(new _e(u),0);let g=new Wt($e);return this.br.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(g=g.add(p.wr)),!0)}),h),ie.resolve(this.Cr(g))}Cr(e){const n=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Je(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ie.forEach(n.mutations,(o=>{const u=new qt(o.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,n){const i=new qt(n,0),o=this.br.firstAfterOrEqual(i);return ie.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class oR{constructor(e){this.Mr=e,this.docs=(function(){return new ht(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),u=o?o.size:0,h=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ie.resolve(i?i.document.mutableCopy():an.newInvalidDocument(n))}getEntries(e,n){let i=gs();return n.forEach((o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():an.newInvalidDocument(o))})),ie.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let u=gs();const h=n.path,g=new _e(h.child("")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:b}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||FN(qN(b),i)<=0||(o.has(b.key)||Fd(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return ie.resolve(u)}getAllFromCollectionGroup(e,n,i,o){Ee()}Or(e,n){return ie.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new lR(this)}getSize(e){return ie.resolve(this.size)}}class lR extends eR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),ie.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}class uR{constructor(e){this.persistence=e,this.Nr=new Ro((n=>bp(n)),wp),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Rp,this.targetCount=0,this.kr=_o.Bn()}forEachTarget(e,n){return this.Nr.forEach(((i,o)=>n(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),ie.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new _o(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Kn(n),ie.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,i){let o=0;const u=[];return this.Nr.forEach(((h,g)=>{g.sequenceNumber<=n&&i.get(g.targetId)===null&&(this.Nr.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ie.waitFor(u).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return ie.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),ie.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),ie.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return ie.resolve(i)}containsKey(e,n){return ie.resolve(this.Br.containsKey(n))}}class cR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new vp(0),this.Kr=!1,this.Kr=!0,this.$r=new iR,this.referenceDelegate=e(this),this.Ur=new uR(this),this.indexManager=new WA,this.remoteDocumentCache=(function(o){return new oR(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new XA(n),this.Gr=new rR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new aR(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){fe("MemoryPersistence","Starting transaction:",e);const o=new dR(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((u=>this.referenceDelegate.jr(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Hr(e,n){return ie.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,n))))}}class dR extends GN{constructor(e){super(),this.currentSequenceNumber=e}}class Cp{constructor(e){this.persistence=e,this.Jr=new Rp,this.Yr=null}static Zr(e){return new Cp(e)}get Xr(){if(this.Yr)return this.Yr;throw Ee()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),ie.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.Xr.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Xr,(i=>{const o=_e.fromPath(i);return this.ei(e,o).next((u=>{u||n.removeEntry(o,Se.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return ie.or([()=>ie.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class Ip{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=o}static Wi(e,n){let i=Ue(),o=Ue();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ip(e,n.fromCache,i,o)}}class hR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class fR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return tT()?8:$N(on())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,o){const u={result:null};return this.Yi(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.Zi(e,n,o,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new hR;return this.Xi(e,n,h).next((g=>{if(u.result=g,this.zi)return this.es(e,n,h,g.size)}))})).next((()=>u.result))}es(e,n,i,o){return i.documentReadCount<this.ji?(Ll()<=ze.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",ro(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ie.resolve()):(Ll()<=ze.DEBUG&&fe("QueryEngine","Query:",ro(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Ll()<=ze.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",ro(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(n))):ie.resolve())}Yi(e,n){if(y_(n))return ie.resolve(null);let i=Nr(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Ed(n,null,"F"),i=Nr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=Ue(...u);return this.Ji.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.ts(n,g);return this.ns(n,y,h,p.readTime)?this.Yi(e,Ed(n,null,"F")):this.rs(e,y,n,p)}))))})))))}Zi(e,n,i,o){return y_(n)||o.isEqual(Se.min())?ie.resolve(null):this.Ji.getDocuments(e,i).next((u=>{const h=this.ts(n,u);return this.ns(n,h,i,o)?ie.resolve(null):(Ll()<=ze.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ro(n)),this.rs(e,h,n,BN(o,-1)).next((g=>g)))}))}ts(e,n){let i=new Wt(Rb(e));return n.forEach(((o,u)=>{Fd(e,u)&&(i=i.add(u))})),i}ns(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Xi(e,n,i){return Ll()<=ze.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",ro(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ei.min(),i)}rs(e,n,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}class mR{constructor(e,n,i,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new ht($e),this._s=new Ro((u=>bp(u)),wp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function pR(s,e,n,i){return new mR(s,e,n,i)}async function Xb(s,e){const n=Ne(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((u=>(o=u,n.ls(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],g=[];let p=Ue();for(const y of o){h.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}for(const y of u){g.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}return n.localDocuments.getDocuments(i,p).next((y=>({hs:y,removedBatchIds:h,addedBatchIds:g})))}))}))}function gR(s,e){const n=Ne(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),u=n.cs.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,b){const w=y.batch,N=w.keys();let V=ie.resolve();return N.forEach((M=>{V=V.next((()=>b.getEntry(p,M))).next((z=>{const L=y.docVersions.get(M);Je(L!==null),z.version.compareTo(L)<0&&(w.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),b.addEntry(z)))}))})),V.next((()=>g.mutationQueue.removeMutationBatch(p,w)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(g){let p=Ue();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function Jb(s){const e=Ne(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function vR(s,e){const n=Ne(s),i=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const g=[];e.targetChanges.forEach(((b,w)=>{const N=o.get(w);if(!N)return;g.push(n.Ur.removeMatchingKeys(u,b.removedDocuments,w).next((()=>n.Ur.addMatchingKeys(u,b.addedDocuments,w))));let V=N.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?V=V.withResumeToken(Zt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):b.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(b.resumeToken,i)),o=o.insert(w,V),(function(z,L,J){return z.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(N,V,b)&&g.push(n.Ur.updateTargetData(u,V))}));let p=gs(),y=Ue();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))})),g.push(yR(u,h,e.documentUpdates).next((b=>{p=b.Ps,y=b.Is}))),!i.isEqual(Se.min())){const b=n.Ur.getLastRemoteSnapshotVersion(u).next((w=>n.Ur.setTargetsMetadata(u,u.currentSequenceNumber,i)));g.push(b)}return ie.waitFor(g).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,y))).next((()=>p))})).then((u=>(n.os=o,u)))}function yR(s,e,n){let i=Ue(),o=Ue();return n.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=gs();return n.forEach(((g,p)=>{const y=u.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(g,p.readTime),h=h.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(g,p)):fe("LocalStore","Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{Ps:h,Is:o}}))}function _R(s,e){const n=Ne(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function xR(s,e){const n=Ne(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Ur.getTargetData(i,e).next((u=>u?(o=u,ie.resolve(o)):n.Ur.allocateTargetId(i).next((h=>(o=new vi(e,h,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i}))}async function Ym(s,e,n){const i=Ne(s),o=i.os.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!vu(h))throw h;fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function C_(s,e,n){const i=Ne(s);let o=Se.min(),u=Ue();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,y,b){const w=Ne(p),N=w._s.get(b);return N!==void 0?ie.resolve(w.os.get(N)):w.Ur.getTargetData(y,b)})(i,h,Nr(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(h,g.targetId).next((p=>{u=p}))})).next((()=>i.ss.getDocumentsMatchingQuery(h,e,n?o:Se.min(),n?u:Ue()))).next((g=>(bR(i,cA(e),g),{documents:g,Ts:u})))))}function bR(s,e,n){let i=s.us.get(e)||Se.min();n.forEach(((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.us.set(e,i)}class I_{constructor(){this.activeTargetIds=gA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wR{constructor(){this.so=new I_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new I_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ER{_o(e){}shutdown(){}}class j_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ed=null;function pm(){return ed===null?ed=(function(){return 268435456+Math.round(2147483648*Math.random())})():ed++,"0x"+ed.toString(16)}const TR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const nn="WebChannelConnection";class NR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${o}/databases/${u}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}get Fo(){return!1}Mo(n,i,o,u,h){const g=pm(),p=this.xo(n,i.toUriEncodedString());fe("RestConnection",`Sending RPC '${n}' ${g}:`,p,o);const y={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(y,u,h),this.No(n,p,y,o).then((b=>(fe("RestConnection",`Received RPC '${n}' ${g}: `,b),b)),(b=>{throw po("RestConnection",`RPC '${n}' ${g} failed with error: `,b,"url: ",p,"request:",o),b}))}Lo(n,i,o,u,h,g){return this.Mo(n,i,o,u,h)}Oo(n,i,o){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+No})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((u,h)=>n[h]=u)),o&&o.headers.forEach(((u,h)=>n[h]=u))}xo(n,i){const o=TR[n];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,o){const u=pm();return new Promise(((h,g)=>{const p=new cb;p.setWithCredentials(!0),p.listenOnce(db.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case ad.NO_ERROR:const b=p.getResponseJson();fe(nn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),h(b);break;case ad.TIMEOUT:fe(nn,`RPC '${e}' ${u} timed out`),g(new ce(re.DEADLINE_EXCEEDED,"Request time out"));break;case ad.HTTP_ERROR:const w=p.getStatus();if(fe(nn,`RPC '${e}' ${u} failed with status:`,w,"response text:",p.getResponseText()),w>0){let N=p.getResponseJson();Array.isArray(N)&&(N=N[0]);const V=N?.error;if(V&&V.status&&V.message){const M=(function(L){const J=L.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(J)>=0?J:re.UNKNOWN})(V.status);g(new ce(M,V.message))}else g(new ce(re.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ce(re.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{fe(nn,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(o);fe(nn,`RPC '${e}' ${u} sending request:`,o),p.send(n,"POST",y,i,15)}))}Bo(e,n,i){const o=pm(),u=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=mb(),g=fb(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const b=u.join("");fe(nn,`Creating RPC '${e}' stream ${o}: ${b}`,p);const w=h.createWebChannel(b,p);let N=!1,V=!1;const M=new SR({Io:L=>{V?fe(nn,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(N||(fe(nn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),N=!0),fe(nn,`RPC '${e}' stream ${o} sending:`,L),w.send(L))},To:()=>w.close()}),z=(L,J,X)=>{L.listen(J,(Z=>{try{X(Z)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return z(w,ql.EventType.OPEN,(()=>{V||(fe(nn,`RPC '${e}' stream ${o} transport opened.`),M.yo())})),z(w,ql.EventType.CLOSE,(()=>{V||(V=!0,fe(nn,`RPC '${e}' stream ${o} transport closed`),M.So())})),z(w,ql.EventType.ERROR,(L=>{V||(V=!0,po(nn,`RPC '${e}' stream ${o} transport errored:`,L),M.So(new ce(re.UNAVAILABLE,"The operation could not be completed")))})),z(w,ql.EventType.MESSAGE,(L=>{var J;if(!V){const X=L.data[0];Je(!!X);const Z=X,ue=Z.error||((J=Z[0])===null||J===void 0?void 0:J.error);if(ue){fe(nn,`RPC '${e}' stream ${o} received error:`,ue);const ye=ue.status;let ge=(function(A){const D=jt[A];if(D!==void 0)return zb(D)})(ye),I=ue.message;ge===void 0&&(ge=re.INTERNAL,I="Unknown error status: "+ye+" with message "+ue.message),V=!0,M.So(new ce(ge,I)),w.close()}else fe(nn,`RPC '${e}' stream ${o} received:`,X),M.bo(X)}})),z(g,hb.STAT_EVENT,(L=>{L.stat===Pm.PROXY?fe(nn,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===Pm.NOPROXY&&fe(nn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{M.wo()}),0),M}}function gm(){return typeof document<"u"?document:null}function Qd(s){return new VA(s,!0)}class Wb{constructor(e,n,i=1e3,o=1.5,u=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=o,this.Qo=u,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-i);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Zb{constructor(e,n,i,o,u,h,g,p){this.ui=e,this.Ho=i,this.Jo=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Wb(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(ps(n.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===n&&this.P_(i,o)}),(i=>{e((()=>{const o=new ce(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class AR extends Zb{constructor(e,n,i,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,h),this.serializer=u}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=PA(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Se.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Se.min():h.readTime?Ar(h.readTime):Se.min()})(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Km(this.serializer),n.addTarget=(function(u,h){let g;const p=h.target;if(g=Fm(p)?{documents:qA(u,p)}:{query:FA(u,p)._t},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=Fb(u,h.resumeToken);const y=Gm(u,h.expectedCount);y!==null&&(g.expectedCount=y)}else if(h.snapshotVersion.compareTo(Se.min())>0){g.readTime=Sd(u,h.snapshotVersion.toTimestamp());const y=Gm(u,h.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const i=GA(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Km(this.serializer),n.removeTarget=e,this.a_(n)}}class RR extends Zb{constructor(e,n,i,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,h),this.serializer=u}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Je(!!e.streamToken),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=BA(e.writeResults,e.commitTime),i=Ar(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Km(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>zA(this.serializer,i)))};this.a_(n)}}class CR extends class{}{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ce(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Mo(e,$m(n,i),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(re.UNKNOWN,u.toString())}))}Lo(e,n,i,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Lo(e,$m(n,i),o,h,g,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ce(re.UNKNOWN,h.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class IR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ps(n),this.D_=!1):fe("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class jR{constructor(e,n,i,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=u,this.k_._o((h=>{i.enqueueAndForget((async()=>{ga(this)&&(fe("RemoteStore","Restarting streams for network reachability change."),await(async function(p){const y=Ne(p);y.L_.add(4),await xu(y),y.q_.set("Unknown"),y.L_.delete(4),await Kd(y)})(this))}))})),this.q_=new IR(i,o)}}async function Kd(s){if(ga(s))for(const e of s.B_)await e(!0)}async function xu(s){for(const e of s.B_)await e(!1)}function ew(s,e){const n=Ne(s);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Op(n)?kp(n):Co(n).r_()&&Dp(n,e))}function jp(s,e){const n=Ne(s),i=Co(n);n.N_.delete(e),i.r_()&&tw(n,e),n.N_.size===0&&(i.r_()?i.o_():ga(n)&&n.q_.set("Unknown"))}function Dp(s,e){if(s.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Co(s).A_(e)}function tw(s,e){s.Q_.xe(e),Co(s).R_(e)}function kp(s){s.Q_=new DA({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>s.N_.get(e)||null,tt:()=>s.datastore.serializer.databaseId}),Co(s).start(),s.q_.v_()}function Op(s){return ga(s)&&!Co(s).n_()&&s.N_.size>0}function ga(s){return Ne(s).L_.size===0}function nw(s){s.Q_=void 0}async function DR(s){s.q_.set("Online")}async function kR(s){s.N_.forEach(((e,n)=>{Dp(s,e)}))}async function OR(s,e){nw(s),Op(s)?(s.q_.M_(e),kp(s)):s.q_.set("Unknown")}async function MR(s,e,n){if(s.q_.set("Online"),e instanceof qb&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const g of u.targetIds)o.N_.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.N_.delete(g),o.Q_.removeTarget(g))})(s,e)}catch(i){fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Nd(s,i)}else if(e instanceof ud?s.Q_.Ke(e):e instanceof Bb?s.Q_.He(e):s.Q_.We(e),!n.isEqual(Se.min()))try{const i=await Jb(s.localStore);n.compareTo(i)>=0&&await(function(u,h){const g=u.Q_.rt(h);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=u.N_.get(y);b&&u.N_.set(y,b.withResumeToken(p.resumeToken,h))}})),g.targetMismatches.forEach(((p,y)=>{const b=u.N_.get(p);if(!b)return;u.N_.set(p,b.withResumeToken(Zt.EMPTY_BYTE_STRING,b.snapshotVersion)),tw(u,p);const w=new vi(b.target,p,y,b.sequenceNumber);Dp(u,w)})),u.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(i){fe("RemoteStore","Failed to raise snapshot:",i),await Nd(s,i)}}async function Nd(s,e,n){if(!vu(e))throw e;s.L_.add(1),await xu(s),s.q_.set("Offline"),n||(n=()=>Jb(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{fe("RemoteStore","Retrying IndexedDB access"),await n(),s.L_.delete(1),await Kd(s)}))}function rw(s,e){return e().catch((n=>Nd(s,n,e)))}async function Yd(s){const e=Ne(s),n=Si(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;VR(e);)try{const o=await _R(e.localStore,i);if(o===null){e.O_.length===0&&n.o_();break}i=o.batchId,LR(e,o)}catch(o){await Nd(e,o)}sw(e)&&iw(e)}function VR(s){return ga(s)&&s.O_.length<10}function LR(s,e){s.O_.push(e);const n=Si(s);n.r_()&&n.V_&&n.m_(e.mutations)}function sw(s){return ga(s)&&!Si(s).n_()&&s.O_.length>0}function iw(s){Si(s).start()}async function UR(s){Si(s).p_()}async function PR(s){const e=Si(s);for(const n of s.O_)e.m_(n.mutations)}async function zR(s,e,n){const i=s.O_.shift(),o=Sp.from(i,e,n);await rw(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Yd(s)}async function BR(s,e){e&&Si(s).V_&&await(async function(i,o){if((function(h){return CA(h)&&h!==re.ABORTED})(o.code)){const u=i.O_.shift();Si(i).s_(),await rw(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Yd(i)}})(s,e),sw(s)&&iw(s)}async function D_(s,e){const n=Ne(s);n.asyncQueue.verifyOperationInProgress(),fe("RemoteStore","RemoteStore received new credentials");const i=ga(n);n.L_.add(3),await xu(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Kd(n)}async function qR(s,e){const n=Ne(s);e?(n.L_.delete(2),await Kd(n)):e||(n.L_.add(2),await xu(n),n.q_.set("Unknown"))}function Co(s){return s.K_||(s.K_=(function(n,i,o){const u=Ne(n);return u.w_(),new AR(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Eo:DR.bind(null,s),Ro:kR.bind(null,s),mo:OR.bind(null,s),d_:MR.bind(null,s)}),s.B_.push((async e=>{e?(s.K_.s_(),Op(s)?kp(s):s.q_.set("Unknown")):(await s.K_.stop(),nw(s))}))),s.K_}function Si(s){return s.U_||(s.U_=(function(n,i,o){const u=Ne(n);return u.w_(),new RR(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:UR.bind(null,s),mo:BR.bind(null,s),f_:PR.bind(null,s),g_:zR.bind(null,s)}),s.B_.push((async e=>{e?(s.U_.s_(),await Yd(s)):(await s.U_.stop(),s.O_.length>0&&(fe("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))}))),s.U_}class Mp{constructor(e,n,i,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,u){const h=Date.now()+i,g=new Mp(e,n,h,o,u);return g.start(i),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vp(s,e){if(ps("AsyncQueue",`${e}: ${s}`),vu(s))return new ce(re.UNAVAILABLE,`${e}: ${s}`);throw s}class ho{constructor(e){this.comparator=e?(n,i)=>e(n,i)||_e.comparator(n.key,i.key):(n,i)=>_e.comparator(n.key,i.key),this.keyedMap=Fl(),this.sortedSet=new ht(this.comparator)}static emptySet(e){return new ho(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ho;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class k_{constructor(){this.W_=new ht(_e.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,i)=>{e.push(i)})),e}}class xo{constructor(e,n,i,o,u,h,g,p,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,o,u){const h=[];return n.forEach((g=>{h.push({type:0,doc:g})})),new xo(e,n,ho.emptySet(n),h,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}class FR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class HR{constructor(){this.queries=O_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const o=Ne(n),u=o.queries;o.queries=O_(),u.forEach(((h,g)=>{for(const p of g.j_)p.onError(i)}))})(this,new ce(re.ABORTED,"Firestore shutting down"))}}function O_(){return new Ro((s=>Ab(s)),qd)}async function aw(s,e){const n=Ne(s);let i=3;const o=e.query;let u=n.queries.get(o);u?!u.H_()&&e.J_()&&(i=2):(u=new FR,i=e.J_()?0:1);try{switch(i){case 0:u.z_=await n.onListen(o,!0);break;case 1:u.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const g=Vp(h,`Initialization of query '${ro(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.j_.push(e),e.Z_(n.onlineState),u.z_&&e.X_(u.z_)&&Lp(n)}async function ow(s,e){const n=Ne(s),i=e.query;let o=3;const u=n.queries.get(i);if(u){const h=u.j_.indexOf(e);h>=0&&(u.j_.splice(h,1),u.j_.length===0?o=e.J_()?0:1:!u.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function GR(s,e){const n=Ne(s);let i=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const g of h.j_)g.X_(o)&&(i=!0);h.z_=o}}i&&Lp(n)}function $R(s,e,n){const i=Ne(s),o=i.queries.get(e);if(o)for(const u of o.j_)u.onError(n);i.queries.delete(e)}function Lp(s){s.Y_.forEach((e=>{e.next()}))}var Xm,M_;(M_=Xm||(Xm={})).ea="default",M_.Cache="cache";class lw{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new xo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Xm.Cache}}class uw{constructor(e){this.key=e}}class cw{constructor(e){this.key=e}}class QR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ue(),this.mutatedKeys=Ue(),this.Aa=Rb(e),this.Ra=new ho(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new k_,o=n?n.Ra:this.Ra;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,w)=>{const N=o.get(b),V=Fd(this.query,w)?w:null,M=!!N&&this.mutatedKeys.has(N.key),z=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let L=!1;N&&V?N.data.isEqual(V.data)?M!==z&&(i.track({type:3,doc:V}),L=!0):this.ga(N,V)||(i.track({type:2,doc:V}),L=!0,(p&&this.Aa(V,p)>0||y&&this.Aa(V,y)<0)&&(g=!0)):!N&&V?(i.track({type:0,doc:V}),L=!0):N&&!V&&(i.track({type:1,doc:N}),L=!0,(p||y)&&(g=!0)),L&&(V?(h=h.add(V),u=z?u.add(b):u.delete(b)):(h=h.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const b=this.query.limitType==="F"?h.last():h.first();h=h.delete(b.key),u=u.delete(b.key),i.track({type:1,doc:b})}return{Ra:h,fa:i,ns:g,mutatedKeys:u}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const u=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort(((b,w)=>(function(V,M){const z=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return z(V)-z(M)})(b.type,w.type)||this.Aa(b.doc,w.doc))),this.pa(i),o=o!=null&&o;const g=n&&!o?this.ya():[],p=this.da.size===0&&this.current&&!o?1:0,y=p!==this.Ea;return this.Ea=p,h.length!==0||y?{snapshot:new xo(this.query,e.Ra,u,h,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:g}:{wa:g}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new k_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ue(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const n=[];return e.forEach((i=>{this.da.has(i)||n.push(new cw(i))})),this.da.forEach((i=>{e.has(i)||n.push(new uw(i))})),n}ba(e){this.Ta=e.Ts,this.da=Ue();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return xo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class KR{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class YR{constructor(e){this.key=e,this.va=!1}}class XR{constructor(e,n,i,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new Ro((g=>Ab(g)),qd),this.Ma=new Map,this.xa=new Set,this.Oa=new ht(_e.comparator),this.Na=new Map,this.La=new Rp,this.Ba={},this.ka=new Map,this.qa=_o.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function JR(s,e,n=!0){const i=gw(s);let o;const u=i.Fa.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Da()):o=await dw(i,e,n,!0),o}async function WR(s,e){const n=gw(s);await dw(n,e,!0,!1)}async function dw(s,e,n,i){const o=await xR(s.localStore,Nr(e)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let g;return i&&(g=await ZR(s,e,u,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&ew(s.remoteStore,o),g}async function ZR(s,e,n,i,o){s.Ka=(w,N,V)=>(async function(z,L,J,X){let Z=L.view.ma(J);Z.ns&&(Z=await C_(z.localStore,L.query,!1).then((({documents:I})=>L.view.ma(I,Z))));const ue=X&&X.targetChanges.get(L.targetId),ye=X&&X.targetMismatches.get(L.targetId)!=null,ge=L.view.applyChanges(Z,z.isPrimaryClient,ue,ye);return L_(z,L.targetId,ge.wa),ge.snapshot})(s,w,N,V);const u=await C_(s.localStore,e,!0),h=new QR(e,u.Ts),g=h.ma(u.documents),p=_u.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),y=h.applyChanges(g,s.isPrimaryClient,p);L_(s,n,y.wa);const b=new KR(e,n,h);return s.Fa.set(e,b),s.Ma.has(n)?s.Ma.get(n).push(e):s.Ma.set(n,[e]),y.snapshot}async function eC(s,e,n){const i=Ne(s),o=i.Fa.get(e),u=i.Ma.get(o.targetId);if(u.length>1)return i.Ma.set(o.targetId,u.filter((h=>!qd(h,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Ym(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&jp(i.remoteStore,o.targetId),Jm(i,o.targetId)})).catch(gu)):(Jm(i,o.targetId),await Ym(i.localStore,o.targetId,!0))}async function tC(s,e){const n=Ne(s),i=n.Fa.get(e),o=n.Ma.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),jp(n.remoteStore,i.targetId))}async function nC(s,e,n){const i=uC(s);try{const o=await(function(h,g){const p=Ne(h),y=Vt.now(),b=g.reduce(((V,M)=>V.add(M.key)),Ue());let w,N;return p.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let M=gs(),z=Ue();return p.cs.getEntries(V,b).next((L=>{M=L,M.forEach(((J,X)=>{X.isValidDocument()||(z=z.add(J))}))})).next((()=>p.localDocuments.getOverlayedDocuments(V,M))).next((L=>{w=L;const J=[];for(const X of g){const Z=TA(X,w.get(X.key).overlayedDocument);Z!=null&&J.push(new Ai(X.key,Z,_b(Z.value.mapValue),ir.exists(!0)))}return p.mutationQueue.addMutationBatch(V,y,J,g)})).next((L=>{N=L;const J=L.applyToLocalDocumentSet(w,z);return p.documentOverlayCache.saveOverlays(V,L.batchId,J)}))})).then((()=>({batchId:N.batchId,changes:Ib(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,g,p){let y=h.Ba[h.currentUser.toKey()];y||(y=new ht($e)),y=y.insert(g,p),h.Ba[h.currentUser.toKey()]=y})(i,o.batchId,n),await bu(i,o.changes),await Yd(i.remoteStore)}catch(o){const u=Vp(o,"Failed to persist write");n.reject(u)}}async function hw(s,e){const n=Ne(s);try{const i=await vR(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Na.get(u);h&&(Je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?Je(h.va):o.removedDocuments.size>0&&(Je(h.va),h.va=!1))})),await bu(n,i,e)}catch(i){await gu(i)}}function V_(s,e,n){const i=Ne(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Fa.forEach(((u,h)=>{const g=h.view.Z_(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const p=Ne(h);p.onlineState=g;let y=!1;p.queries.forEach(((b,w)=>{for(const N of w.j_)N.Z_(g)&&(y=!0)})),y&&Lp(p)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function rC(s,e,n){const i=Ne(s);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Na.get(e),u=o&&o.key;if(u){let h=new ht(_e.comparator);h=h.insert(u,an.newNoDocument(u,Se.min()));const g=Ue().add(u),p=new $d(Se.min(),new Map,new ht($e),h,g);await hw(i,p),i.Oa=i.Oa.remove(u),i.Na.delete(e),Up(i)}else await Ym(i.localStore,e,!1).then((()=>Jm(i,e,n))).catch(gu)}async function sC(s,e){const n=Ne(s),i=e.batch.batchId;try{const o=await gR(n.localStore,e);mw(n,i,null),fw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await bu(n,o)}catch(o){await gu(o)}}async function iC(s,e,n){const i=Ne(s);try{const o=await(function(h,g){const p=Ne(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return p.mutationQueue.lookupMutationBatch(y,g).next((w=>(Je(w!==null),b=w.keys(),p.mutationQueue.removeMutationBatch(y,w)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,b,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>p.localDocuments.getDocuments(y,b)))}))})(i.localStore,e);mw(i,e,n),fw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await bu(i,o)}catch(o){await gu(o)}}function fw(s,e){(s.ka.get(e)||[]).forEach((n=>{n.resolve()})),s.ka.delete(e)}function mw(s,e,n){const i=Ne(s);let o=i.Ba[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function Jm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Ma.get(e))s.Fa.delete(i),n&&s.Ca.$a(i,n);s.Ma.delete(e),s.isPrimaryClient&&s.La.gr(e).forEach((i=>{s.La.containsKey(i)||pw(s,i)}))}function pw(s,e){s.xa.delete(e.path.canonicalString());const n=s.Oa.get(e);n!==null&&(jp(s.remoteStore,n),s.Oa=s.Oa.remove(e),s.Na.delete(n),Up(s))}function L_(s,e,n){for(const i of n)i instanceof uw?(s.La.addReference(i.key,e),aC(s,i)):i instanceof cw?(fe("SyncEngine","Document no longer in limbo: "+i.key),s.La.removeReference(i.key,e),s.La.containsKey(i.key)||pw(s,i.key)):Ee()}function aC(s,e){const n=e.key,i=n.path.canonicalString();s.Oa.get(n)||s.xa.has(i)||(fe("SyncEngine","New document in limbo: "+n),s.xa.add(i),Up(s))}function Up(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const e=s.xa.values().next().value;s.xa.delete(e);const n=new _e(at.fromString(e)),i=s.qa.next();s.Na.set(i,new YR(n)),s.Oa=s.Oa.insert(n,i),ew(s.remoteStore,new vi(Nr(Ep(n.path)),i,"TargetPurposeLimboResolution",vp.oe))}}async function bu(s,e,n){const i=Ne(s),o=[],u=[],h=[];i.Fa.isEmpty()||(i.Fa.forEach(((g,p)=>{h.push(i.Ka(p,e,n).then((y=>{var b;if((y||n)&&i.isPrimaryClient){const w=y?!y.fromCache:(b=n?.targetChanges.get(p.targetId))===null||b===void 0?void 0:b.current;i.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Ip.Wi(p.targetId,y);u.push(w)}})))})),await Promise.all(h),i.Ca.d_(o),await(async function(p,y){const b=Ne(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ie.forEach(y,(N=>ie.forEach(N.$i,(V=>b.persistence.referenceDelegate.addReference(w,N.targetId,V))).next((()=>ie.forEach(N.Ui,(V=>b.persistence.referenceDelegate.removeReference(w,N.targetId,V)))))))))}catch(w){if(!vu(w))throw w;fe("LocalStore","Failed to update sequence numbers: "+w)}for(const w of y){const N=w.targetId;if(!w.fromCache){const V=b.os.get(N),M=V.snapshotVersion,z=V.withLastLimboFreeSnapshotVersion(M);b.os=b.os.insert(N,z)}}})(i.localStore,u))}async function oC(s,e){const n=Ne(s);if(!n.currentUser.isEqual(e)){fe("SyncEngine","User change. New user:",e.toKey());const i=await Xb(n.localStore,e);n.currentUser=e,(function(u,h){u.ka.forEach((g=>{g.forEach((p=>{p.reject(new ce(re.CANCELLED,h))}))})),u.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await bu(n,i.hs)}}function lC(s,e){const n=Ne(s),i=n.Na.get(e);if(i&&i.va)return Ue().add(i.key);{let o=Ue();const u=n.Ma.get(e);if(!u)return o;for(const h of u){const g=n.Fa.get(h);o=o.unionWith(g.view.Va)}return o}}function gw(s){const e=Ne(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=hw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rC.bind(null,e),e.Ca.d_=GR.bind(null,e.eventManager),e.Ca.$a=$R.bind(null,e.eventManager),e}function uC(s){const e=Ne(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iC.bind(null,e),e}class Ad{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return pR(this.persistence,new fR,e.initialUser,this.serializer)}Ga(e){return new cR(Cp.Zr,this.serializer)}Wa(e){return new wR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ad.provider={build:()=>new Ad};class Wm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>V_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oC.bind(null,this.syncEngine),await qR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new HR})()}createDatastore(e){const n=Qd(e.databaseInfo.databaseId),i=(function(u){return new NR(u)})(e.databaseInfo);return(function(u,h,g,p){return new CR(u,h,g,p)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,u,h,g){return new jR(i,o,u,h,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>V_(this.syncEngine,n,0)),(function(){return j_.D()?new j_:new ER})())}createSyncEngine(e,n){return(function(o,u,h,g,p,y,b){const w=new XR(o,u,h,g,p,y);return b&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=Ne(o);fe("RemoteStore","RemoteStore shutting down."),u.L_.add(5),await xu(u),u.k_.shutdown(),u.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Wm.provider={build:()=>new Wm};class vw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ps("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class cC{constructor(e,n,i,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=sn.UNAUTHENTICATED,this.clientId=gb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{fe("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(fe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Vp(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function vm(s,e){s.asyncQueue.verifyOperationInProgress(),fe("FirestoreClient","Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Xb(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function U_(s,e){s.asyncQueue.verifyOperationInProgress();const n=await dC(s);fe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>D_(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>D_(e.remoteStore,o))),s._onlineComponents=e}async function dC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){fe("FirestoreClient","Using user provided OfflineComponentProvider");try{await vm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;po("Error using user provided cache. Falling back to memory cache: "+n),await vm(s,new Ad)}}else fe("FirestoreClient","Using default OfflineComponentProvider"),await vm(s,new Ad);return s._offlineComponents}async function yw(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(fe("FirestoreClient","Using user provided OnlineComponentProvider"),await U_(s,s._uninitializedComponentsProvider._online)):(fe("FirestoreClient","Using default OnlineComponentProvider"),await U_(s,new Wm))),s._onlineComponents}function hC(s){return yw(s).then((e=>e.syncEngine))}async function _w(s){const e=await yw(s),n=e.eventManager;return n.onListen=JR.bind(null,e.syncEngine),n.onUnlisten=eC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=WR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tC.bind(null,e.syncEngine),n}function fC(s,e,n={}){const i=new ds;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,p,y){const b=new vw({next:N=>{b.Za(),h.enqueueAndForget((()=>ow(u,w)));const V=N.docs.has(g);!V&&N.fromCache?y.reject(new ce(re.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&N.fromCache&&p&&p.source==="server"?y.reject(new ce(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(N)},error:N=>y.reject(N)}),w=new lw(Ep(g.path),b,{includeMetadataChanges:!0,_a:!0});return aw(u,w)})(await _w(s),s.asyncQueue,e,n,i))),i.promise}function mC(s,e,n={}){const i=new ds;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,p,y){const b=new vw({next:N=>{b.Za(),h.enqueueAndForget((()=>ow(u,w))),N.fromCache&&p.source==="server"?y.reject(new ce(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(N)},error:N=>y.reject(N)}),w=new lw(g,b,{includeMetadataChanges:!0,_a:!0});return aw(u,w)})(await _w(s),s.asyncQueue,e,n,i))),i.promise}function xw(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const P_=new Map;function bw(s,e,n){if(!n)throw new ce(re.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function pC(s,e,n,i){if(e===!0&&i===!0)throw new ce(re.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function z_(s){if(!_e.isDocumentKey(s))throw new ce(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function B_(s){if(_e.isDocumentKey(s))throw new ce(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Xd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ee()}function Cr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ce(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xd(s);throw new ce(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function gC(s,e){if(e<=0)throw new ce(re.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}class q_{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ce(re.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ce(re.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ce(re.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q_(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new DN;switch(i.type){case"firstParty":return new VN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=P_.get(n);i&&(fe("ComponentProvider","Removing Datastore"),P_.delete(n),i.terminate())})(this),Promise.resolve()}}function vC(s,e,n,i={}){var o;const u=(s=Cr(s,Jd))._getSettings(),h=`${e}:${n}`;if(u.host!=="firestore.googleapis.com"&&u.host!==h&&po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),i.mockUserToken){let g,p;if(typeof i.mockUserToken=="string")g=i.mockUserToken,p=sn.MOCK_USER;else{g=K1(i.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new ce(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new sn(y)}s._authCredentials=new kN(new pb(g,p))}}class Ri{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ri(this.firestore,e,this._query)}}class mn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class wi extends Ri{constructor(e,n,i){super(e,n,Ep(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new _e(e))}withConverter(e){return new wi(this.firestore,e,this._path)}}function bo(s,e,...n){if(s=Lt(s),bw("collection","path",e),s instanceof Jd){const i=at.fromString(e,...n);return B_(i),new wi(s,null,i)}{if(!(s instanceof mn||s instanceof wi))throw new ce(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(at.fromString(e,...n));return B_(i),new wi(s.firestore,null,i)}}function aa(s,e,...n){if(s=Lt(s),arguments.length===1&&(e=gb.newId()),bw("doc","path",e),s instanceof Jd){const i=at.fromString(e,...n);return z_(i),new mn(s,null,new _e(i))}{if(!(s instanceof mn||s instanceof wi))throw new ce(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(at.fromString(e,...n));return z_(i),new mn(s.firestore,s instanceof wi?s.converter:null,new _e(i))}}class F_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Wb(this,"async_queue_retry"),this.Vu=()=>{const i=gm();i&&fe("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=gm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=gm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new ds;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!vu(e))throw e;fe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(h){let g=h.message||"";return h.stack&&(g=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),g})(i);throw ps("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=Mp.createAndSchedule(this,e,n,i,(u=>this.yu(u)));return this.Tu.push(o),o}fu(){this.Eu&&Ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Io extends Jd{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new F_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new F_(e),this._firestoreClient=void 0,await e}}}function yC(s,e){const n=typeof s=="object"?s:Ex(),i=typeof s=="string"?s:"(default)",o=ap(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=$1("firestore");u&&vC(o,...u)}return o}function Pp(s){if(s._terminated)throw new ce(re.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||_C(s),s._firestoreClient}function _C(s){var e,n,i;const o=s._freezeSettings(),u=(function(g,p,y,b){return new YN(g,p,y,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,xw(b.experimentalLongPollingOptions),b.useFetchStreams)})(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new cC(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&(function(g){const p=g?._online.build();return{_offline:g?._offline.build(p),_online:p}})(s._componentsProvider))}class wo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wo(Zt.fromBase64String(e))}catch(n){throw new ce(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wo(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zd{constructor(e){this._methodName=e}}class zp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}class Bp{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}}const xC=/^__.*__$/;class bC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ai(e,this.data,this.fieldMask,n,this.fieldTransforms):new yu(e,this.data,n,this.fieldTransforms)}}class ww{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ai(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ew(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class qp{constructor(e,n,i,o,u,h){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new qp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Rd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Ew(this.Cu)&&xC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class wC{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Qd(e)}Qu(e,n,i,o=!1){return new qp({Cu:e,methodName:n,qu:i,path:Jt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eh(s){const e=s._freezeSettings(),n=Qd(s._databaseId);return new wC(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Tw(s,e,n,i,o,u={}){const h=s.Qu(u.merge||u.mergeFields?2:0,e,n,o);Hp("Data must be an object, but it was:",h,i);const g=Sw(i,h);let p,y;if(u.merge)p=new Mn(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const b=[];for(const w of u.mergeFields){const N=Zm(e,w,n);if(!h.contains(N))throw new ce(re.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);Aw(b,N)||b.push(N)}p=new Mn(b),y=h.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,y=h.fieldTransforms;return new bC(new En(g),p,y)}class th extends Zd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof th}}class Fp extends Zd{_toFieldTransform(e){return new xA(e.path,new iu)}isEqual(e){return e instanceof Fp}}function EC(s,e,n,i){const o=s.Qu(1,e,n);Hp("Data must be an object, but it was:",o,i);const u=[],h=En.empty();pa(i,((p,y)=>{const b=Gp(e,p,n);y=Lt(y);const w=o.Nu(b);if(y instanceof th)u.push(b);else{const N=wu(y,w);N!=null&&(u.push(b),h.set(b,N))}}));const g=new Mn(u);return new ww(h,g,o.fieldTransforms)}function TC(s,e,n,i,o,u){const h=s.Qu(1,e,n),g=[Zm(e,i,n)],p=[o];if(u.length%2!=0)throw new ce(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<u.length;N+=2)g.push(Zm(e,u[N])),p.push(u[N+1]);const y=[],b=En.empty();for(let N=g.length-1;N>=0;--N)if(!Aw(y,g[N])){const V=g[N];let M=p[N];M=Lt(M);const z=h.Nu(V);if(M instanceof th)y.push(V);else{const L=wu(M,z);L!=null&&(y.push(V),b.set(V,L))}}const w=new Mn(y);return new ww(b,w,h.fieldTransforms)}function SC(s,e,n,i=!1){return wu(n,s.Qu(i?4:3,e))}function wu(s,e){if(Nw(s=Lt(s)))return Hp("Unsupported field value:",e,s),Sw(s,e);if(s instanceof Zd)return(function(i,o){if(!Ew(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const u=[];let h=0;for(const g of i){let p=wu(g,o.Lu(h));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),h++}return{arrayValue:{values:u}}})(s,e)}return(function(i,o){if((i=Lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return vA(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=Vt.fromDate(i);return{timestampValue:Sd(o.serializer,u)}}if(i instanceof Vt){const u=new Vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Sd(o.serializer,u)}}if(i instanceof zp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof wo)return{bytesValue:Fb(o.serializer,i._byteString)};if(i instanceof mn){const u=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Ap(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Bp)return(function(h,g){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map((p=>{if(typeof p!="number")throw g.Bu("VectorValues must only contain numeric values.");return Tp(g.serializer,p)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${Xd(i)}`)})(s,e)}function Sw(s,e){const n={};return vb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pa(s,((i,o)=>{const u=wu(o,e.Mu(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function Nw(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Vt||s instanceof zp||s instanceof wo||s instanceof mn||s instanceof Zd||s instanceof Bp)}function Hp(s,e,n){if(!Nw(n)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(n)){const i=Xd(n);throw i==="an object"?e.Bu(s+" a custom object"):e.Bu(s+" "+i)}}function Zm(s,e,n){if((e=Lt(e))instanceof Wd)return e._internalPath;if(typeof e=="string")return Gp(s,e);throw Rd("Field path arguments must be of type string or ",s,!1,void 0,n)}const NC=new RegExp("[~\\*/\\[\\]]");function Gp(s,e,n){if(e.search(NC)>=0)throw Rd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Wd(...e.split("."))._internalPath}catch{throw Rd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Rd(s,e,n,i,o){const u=i&&!i.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(u||h)&&(p+=" (found",u&&(p+=` in field ${i}`),h&&(p+=` in document ${o}`),p+=")"),new ce(re.INVALID_ARGUMENT,g+s+p)}function Aw(s,e){return s.some((n=>n.isEqual(e)))}class Rw{constructor(e,n,i,o,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AC extends Rw{data(){return super.data()}}function nh(s,e){return typeof e=="string"?Gp(s,e):e instanceof Wd?e._internalPath:e._delegate._internalPath}function RC(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ce(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $p{}class Qp extends $p{}function Cd(s,e,...n){let i=[];e instanceof $p&&i.push(e),i=i.concat(n),(function(u){const h=u.filter((p=>p instanceof Kp)).length,g=u.filter((p=>p instanceof rh)).length;if(h>1||h>0&&g>0)throw new ce(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class rh extends Qp{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new rh(e,n,i)}_apply(e){const n=this._parse(e);return Iw(e._query,n),new Ri(e.firestore,e.converter,Hm(e._query,n))}_parse(e){const n=eh(e.firestore);return(function(u,h,g,p,y,b,w){let N;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ce(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){G_(w,b);const V=[];for(const M of w)V.push(H_(p,u,M));N={arrayValue:{values:V}}}else N=H_(p,u,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||G_(w,b),N=SC(g,h,w,b==="in"||b==="not-in");return Dt.create(y,b,N)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Jl(s,e,n){const i=e,o=nh("where",s);return rh._create(o,i,n)}class Kp extends $p{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Kp(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:or.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const g=u.getFlattenedFilters();for(const p of g)Iw(h,p),h=Hm(h,p)})(e._query,n),new Ri(e.firestore,e.converter,Hm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yp extends Qp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Yp(e,n)}_apply(e){const n=(function(o,u,h){if(o.startAt!==null)throw new ce(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new su(u,h)})(e._query,this._field,this._direction);return new Ri(e.firestore,e.converter,(function(o,u){const h=o.explicitOrderBy.concat([u]);return new Ao(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Cw(s,e="asc"){const n=e,i=nh("orderBy",s);return Yp._create(i,n)}class Xp extends Qp{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Xp(e,n,i)}_apply(e){return new Ri(e.firestore,e.converter,Ed(e._query,this._limit,this._limitType))}}function Id(s){return gC("limit",s),Xp._create("limit",s,"F")}function H_(s,e,n){if(typeof(n=Lt(n))=="string"){if(n==="")throw new ce(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nb(e)&&n.indexOf("/")!==-1)throw new ce(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(at.fromString(n));if(!_e.isDocumentKey(i))throw new ce(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return h_(s,new _e(i))}if(n instanceof mn)return h_(s,n._key);throw new ce(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xd(n)}.`)}function G_(s,e){if(!Array.isArray(s)||s.length===0)throw new ce(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Iw(s,e){const n=(function(o,u){for(const h of o)for(const g of h.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ce(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class CC{convertValue(e,n="none"){switch(fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return pa(e,((o,u)=>{i[o]=this.convertValue(u,n)})),i}convertVectorValue(e){var n,i,o;const u=(o=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>Tt(h.doubleValue)));return new Bp(u)}convertGeoPoint(e){return new zp(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=_p(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){const n=Ti(e);return new Vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=at.fromString(e);Je(Yb(i));const o=new nu(i.get(1),i.get(3)),u=new _e(i.popFirst(5));return o.isEqual(n)||ps(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function jw(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}class Gl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dw extends Rw{constructor(e,n,i,o,u,h){super(e,n,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(nh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class cd extends Dw{data(e={}){return super.data(e)}}class IC{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Gl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new cd(this._firestore,this._userDataWriter,i.key,i,new Gl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const p=new cd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Gl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const p=new cd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Gl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return g.type!==0&&(y=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),b=h.indexOf(g.doc.key)),{type:jC(g.type),doc:p,oldIndex:y,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function jC(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}function DC(s){s=Cr(s,mn);const e=Cr(s.firestore,Io);return fC(Pp(e),s._key).then((n=>kC(e,s,n)))}class kw extends CC{constructor(e){super(),this.firestore=e}convertBytes(e){return new wo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,n)}}function jd(s){s=Cr(s,Ri);const e=Cr(s.firestore,Io),n=Pp(e),i=new kw(e);return RC(s._query),mC(n,s._query).then((o=>new IC(e,i,s,o)))}function ep(s,e,n){s=Cr(s,mn);const i=Cr(s.firestore,Io),o=jw(s.converter,e,n);return Jp(i,[Tw(eh(i),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,ir.none())])}function Ow(s,e,n,...i){s=Cr(s,mn);const o=Cr(s.firestore,Io),u=eh(o);let h;return h=typeof(e=Lt(e))=="string"||e instanceof Wd?TC(u,"updateDoc",s._key,e,n,i):EC(u,"updateDoc",s._key,e),Jp(o,[h.toMutation(s._key,ir.exists(!0))])}function Mw(s,e){const n=Cr(s.firestore,Io),i=aa(s),o=jw(s.converter,e);return Jp(n,[Tw(eh(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,ir.exists(!1))]).then((()=>i))}function Jp(s,e){return(function(i,o){const u=new ds;return i.asyncQueue.enqueueAndForget((async()=>nC(await hC(i),o,u))),u.promise})(Pp(s),e)}function kC(s,e,n){const i=n.docs.get(e._key),o=new kw(s);return new Dw(s,o,e._key,i,new Gl(n.hasPendingWrites,n.fromCache),e.converter)}function Eo(){return new Fp("serverTimestamp")}(function(e,n=!0){(function(o){No=o})(To),fo(new la("firestore",((i,{instanceIdentifier:o,options:u})=>{const h=i.getProvider("app").getImmediate(),g=new Io(new ON(i.getProvider("auth-internal")),new UN(i.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ce(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(y.options.projectId,b)})(h,o),h);return u=Object.assign({useFetchStreams:n},u),g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),bi(o_,"4.7.3",e),bi(o_,"4.7.3","esm2017")})();const OC={apiKey:"AIzaSyBradkEr4X14nCns2vP3lVgZ7l0q0ijzNg",authDomain:"cookmate-cc941.firebaseapp.com",projectId:"cookmate-cc941",storageBucket:"cookmate-cc941.firebasestorage.app",messagingSenderId:"436913801412",appId:"1:436913801412:web:4160b5acb5a7cc36c6a191"},Vw=wx(OC),sa=IN(Vw),Yn=yC(Vw);var ym={exports:{}},Te={};var $_;function MC(){if($_)return Te;$_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.iterator;function V(C){return C===null||typeof C!="object"?null:(C=N&&C[N]||C["@@iterator"],typeof C=="function"?C:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,L={};function J(C,Q,se){this.props=C,this.context=Q,this.refs=L,this.updater=se||M}J.prototype.isReactComponent={},J.prototype.setState=function(C,Q){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,Q,"setState")},J.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function X(){}X.prototype=J.prototype;function Z(C,Q,se){this.props=C,this.context=Q,this.refs=L,this.updater=se||M}var ue=Z.prototype=new X;ue.constructor=Z,z(ue,J.prototype),ue.isPureReactComponent=!0;var ye=Array.isArray;function ge(){}var I={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function A(C,Q,se){var de=se.ref;return{$$typeof:s,type:C,key:Q,ref:de!==void 0?de:null,props:se}}function D(C,Q){return A(C.type,Q,C.props)}function O(C){return typeof C=="object"&&C!==null&&C.$$typeof===s}function P(C){var Q={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(se){return Q[se]})}var R=/\/+/g;function nt(C,Q){return typeof C=="object"&&C!==null&&C.key!=null?P(""+C.key):Q.toString(36)}function ct(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(ge,ge):(C.status="pending",C.then(function(Q){C.status==="pending"&&(C.status="fulfilled",C.value=Q)},function(Q){C.status==="pending"&&(C.status="rejected",C.reason=Q)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function q(C,Q,se,de,be){var Ae=typeof C;(Ae==="undefined"||Ae==="boolean")&&(C=null);var je=!1;if(C===null)je=!0;else switch(Ae){case"bigint":case"string":case"number":je=!0;break;case"object":switch(C.$$typeof){case s:case e:je=!0;break;case b:return je=C._init,q(je(C._payload),Q,se,de,be)}}if(je)return be=be(C),je=de===""?"."+nt(C,0):de,ye(be)?(se="",je!=null&&(se=je.replace(R,"$&/")+"/"),q(be,Q,se,"",function(Tn){return Tn})):be!=null&&(O(be)&&(be=D(be,se+(be.key==null||C&&C.key===be.key?"":(""+be.key).replace(R,"$&/")+"/")+je)),Q.push(be)),1;je=0;var St=de===""?".":de+":";if(ye(C))for(var ot=0;ot<C.length;ot++)de=C[ot],Ae=St+nt(de,ot),je+=q(de,Q,se,Ae,be);else if(ot=V(C),typeof ot=="function")for(C=ot.call(C),ot=0;!(de=C.next()).done;)de=de.value,Ae=St+nt(de,ot++),je+=q(de,Q,se,Ae,be);else if(Ae==="object"){if(typeof C.then=="function")return q(ct(C),Q,se,de,be);throw Q=String(C),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return je}function ee(C,Q,se){if(C==null)return C;var de=[],be=0;return q(C,de,"","",function(Ae){return Q.call(se,Ae,be++)}),de}function pe(C){if(C._status===-1){var Q=C._result;Q=Q(),Q.then(function(se){(C._status===0||C._status===-1)&&(C._status=1,C._result=se)},function(se){(C._status===0||C._status===-1)&&(C._status=2,C._result=se)}),C._status===-1&&(C._status=0,C._result=Q)}if(C._status===1)return C._result.default;throw C._result}var Oe=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},ae={map:ee,forEach:function(C,Q,se){ee(C,function(){Q.apply(this,arguments)},se)},count:function(C){var Q=0;return ee(C,function(){Q++}),Q},toArray:function(C){return ee(C,function(Q){return Q})||[]},only:function(C){if(!O(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Te.Activity=w,Te.Children=ae,Te.Component=J,Te.Fragment=n,Te.Profiler=o,Te.PureComponent=Z,Te.StrictMode=i,Te.Suspense=p,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Te.__COMPILER_RUNTIME={__proto__:null,c:function(C){return I.H.useMemoCache(C)}},Te.cache=function(C){return function(){return C.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(C,Q,se){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var de=z({},C.props),be=C.key;if(Q!=null)for(Ae in Q.key!==void 0&&(be=""+Q.key),Q)!S.call(Q,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&Q.ref===void 0||(de[Ae]=Q[Ae]);var Ae=arguments.length-2;if(Ae===1)de.children=se;else if(1<Ae){for(var je=Array(Ae),St=0;St<Ae;St++)je[St]=arguments[St+2];de.children=je}return A(C.type,be,de)},Te.createContext=function(C){return C={$$typeof:h,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},Te.createElement=function(C,Q,se){var de,be={},Ae=null;if(Q!=null)for(de in Q.key!==void 0&&(Ae=""+Q.key),Q)S.call(Q,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(be[de]=Q[de]);var je=arguments.length-2;if(je===1)be.children=se;else if(1<je){for(var St=Array(je),ot=0;ot<je;ot++)St[ot]=arguments[ot+2];be.children=St}if(C&&C.defaultProps)for(de in je=C.defaultProps,je)be[de]===void 0&&(be[de]=je[de]);return A(C,Ae,be)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(C){return{$$typeof:g,render:C}},Te.isValidElement=O,Te.lazy=function(C){return{$$typeof:b,_payload:{_status:-1,_result:C},_init:pe}},Te.memo=function(C,Q){return{$$typeof:y,type:C,compare:Q===void 0?null:Q}},Te.startTransition=function(C){var Q=I.T,se={};I.T=se;try{var de=C(),be=I.S;be!==null&&be(se,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ge,Oe)}catch(Ae){Oe(Ae)}finally{Q!==null&&se.types!==null&&(Q.types=se.types),I.T=Q}},Te.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Te.use=function(C){return I.H.use(C)},Te.useActionState=function(C,Q,se){return I.H.useActionState(C,Q,se)},Te.useCallback=function(C,Q){return I.H.useCallback(C,Q)},Te.useContext=function(C){return I.H.useContext(C)},Te.useDebugValue=function(){},Te.useDeferredValue=function(C,Q){return I.H.useDeferredValue(C,Q)},Te.useEffect=function(C,Q){return I.H.useEffect(C,Q)},Te.useEffectEvent=function(C){return I.H.useEffectEvent(C)},Te.useId=function(){return I.H.useId()},Te.useImperativeHandle=function(C,Q,se){return I.H.useImperativeHandle(C,Q,se)},Te.useInsertionEffect=function(C,Q){return I.H.useInsertionEffect(C,Q)},Te.useLayoutEffect=function(C,Q){return I.H.useLayoutEffect(C,Q)},Te.useMemo=function(C,Q){return I.H.useMemo(C,Q)},Te.useOptimistic=function(C,Q){return I.H.useOptimistic(C,Q)},Te.useReducer=function(C,Q,se){return I.H.useReducer(C,Q,se)},Te.useRef=function(C){return I.H.useRef(C)},Te.useState=function(C){return I.H.useState(C)},Te.useSyncExternalStore=function(C,Q,se){return I.H.useSyncExternalStore(C,Q,se)},Te.useTransition=function(){return I.H.useTransition()},Te.version="19.2.0",Te}var Q_;function Wp(){return Q_||(Q_=1,ym.exports=MC()),ym.exports}var k=Wp(),_m={exports:{}},Ul={},xm={exports:{}},bm={};var K_;function VC(){return K_||(K_=1,(function(s){function e(q,ee){var pe=q.length;q.push(ee);e:for(;0<pe;){var Oe=pe-1>>>1,ae=q[Oe];if(0<o(ae,ee))q[Oe]=ee,q[pe]=ae,pe=Oe;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var ee=q[0],pe=q.pop();if(pe!==ee){q[0]=pe;e:for(var Oe=0,ae=q.length,C=ae>>>1;Oe<C;){var Q=2*(Oe+1)-1,se=q[Q],de=Q+1,be=q[de];if(0>o(se,pe))de<ae&&0>o(be,se)?(q[Oe]=be,q[de]=pe,Oe=de):(q[Oe]=se,q[Q]=pe,Oe=Q);else if(de<ae&&0>o(be,pe))q[Oe]=be,q[de]=pe,Oe=de;else break e}}return ee}function o(q,ee){var pe=q.sortIndex-ee.sortIndex;return pe!==0?pe:q.id-ee.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();s.unstable_now=function(){return h.now()-g}}var p=[],y=[],b=1,w=null,N=3,V=!1,M=!1,z=!1,L=!1,J=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ue(q){for(var ee=n(y);ee!==null;){if(ee.callback===null)i(y);else if(ee.startTime<=q)i(y),ee.sortIndex=ee.expirationTime,e(p,ee);else break;ee=n(y)}}function ye(q){if(z=!1,ue(q),!M)if(n(p)!==null)M=!0,ge||(ge=!0,P());else{var ee=n(y);ee!==null&&ct(ye,ee.startTime-q)}}var ge=!1,I=-1,S=5,A=-1;function D(){return L?!0:!(s.unstable_now()-A<S)}function O(){if(L=!1,ge){var q=s.unstable_now();A=q;var ee=!0;try{e:{M=!1,z&&(z=!1,X(I),I=-1),V=!0;var pe=N;try{t:{for(ue(q),w=n(p);w!==null&&!(w.expirationTime>q&&D());){var Oe=w.callback;if(typeof Oe=="function"){w.callback=null,N=w.priorityLevel;var ae=Oe(w.expirationTime<=q);if(q=s.unstable_now(),typeof ae=="function"){w.callback=ae,ue(q),ee=!0;break t}w===n(p)&&i(p),ue(q)}else i(p);w=n(p)}if(w!==null)ee=!0;else{var C=n(y);C!==null&&ct(ye,C.startTime-q),ee=!1}}break e}finally{w=null,N=pe,V=!1}ee=void 0}}finally{ee?P():ge=!1}}}var P;if(typeof Z=="function")P=function(){Z(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,nt=R.port2;R.port1.onmessage=O,P=function(){nt.postMessage(null)}}else P=function(){J(O,0)};function ct(q,ee){I=J(function(){q(s.unstable_now())},ee)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(q){q.callback=null},s.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_next=function(q){switch(N){case 1:case 2:case 3:var ee=3;break;default:ee=N}var pe=N;N=ee;try{return q()}finally{N=pe}},s.unstable_requestPaint=function(){L=!0},s.unstable_runWithPriority=function(q,ee){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var pe=N;N=q;try{return ee()}finally{N=pe}},s.unstable_scheduleCallback=function(q,ee,pe){var Oe=s.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Oe+pe:Oe):pe=Oe,q){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=pe+ae,q={id:b++,callback:ee,priorityLevel:q,startTime:pe,expirationTime:ae,sortIndex:-1},pe>Oe?(q.sortIndex=pe,e(y,q),n(p)===null&&q===n(y)&&(z?(X(I),I=-1):z=!0,ct(ye,pe-Oe))):(q.sortIndex=ae,e(p,q),M||V||(M=!0,ge||(ge=!0,P()))),q},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(q){var ee=N;return function(){var pe=N;N=ee;try{return q.apply(this,arguments)}finally{N=pe}}}})(bm)),bm}var Y_;function LC(){return Y_||(Y_=1,xm.exports=VC()),xm.exports}var wm={exports:{}},rn={};var X_;function UC(){if(X_)return rn;X_=1;var s=Wp();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:y,implementation:b}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,rn.createPortal=function(p,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,b)},rn.flushSync=function(p){var y=h.T,b=i.p;try{if(h.T=null,i.p=2,p)return p()}finally{h.T=y,i.p=b,i.d.f()}},rn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(p,y))},rn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},rn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var b=y.as,w=g(b,y.crossOrigin),N=typeof y.integrity=="string"?y.integrity:void 0,V=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:N,fetchPriority:V}):b==="script"&&i.d.X(p,{crossOrigin:w,integrity:N,fetchPriority:V,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},rn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=g(y.as,y.crossOrigin);i.d.M(p,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(p)},rn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,w=g(b,y.crossOrigin);i.d.L(p,b,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},rn.preloadModule=function(p,y){if(typeof p=="string")if(y){var b=g(y.as,y.crossOrigin);i.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(p)},rn.requestFormReset=function(p){i.d.r(p)},rn.unstable_batchedUpdates=function(p,y){return p(y)},rn.useFormState=function(p,y,b){return h.H.useFormState(p,y,b)},rn.useFormStatus=function(){return h.H.useHostTransitionStatus()},rn.version="19.2.0",rn}var J_;function PC(){if(J_)return wm.exports;J_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),wm.exports=UC(),wm.exports}var W_;function zC(){if(W_)return Ul;W_=1;var s=LC(),e=Wp(),n=PC();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(i(188))}function y(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(i(188));return r!==t?null:t}for(var a=t,l=r;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return p(d),t;if(m===l)return p(d),r;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=d,l=m;else{for(var _=!1,E=d.child;E;){if(E===a){_=!0,a=d,l=m;break}if(E===l){_=!0,l=d,a=m;break}E=E.sibling}if(!_){for(E=m.child;E;){if(E===a){_=!0,a=m,l=d;break}if(E===l){_=!0,l=m,a=d;break}E=E.sibling}if(!_)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:r}function b(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=b(t),r!==null)return r;t=t.sibling}return null}var w=Object.assign,N=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function nt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case J:return"Profiler";case L:return"StrictMode";case ye:return"Suspense";case ge:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case M:return"Portal";case Z:return t.displayName||"Context";case X:return(t._context.displayName||"Context")+".Consumer";case ue:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return r=t.displayName||null,r!==null?r:nt(t.type)||"Memo";case S:r=t._payload,t=t._init;try{return nt(t(r))}catch{}}return null}var ct=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Oe=[],ae=-1;function C(t){return{current:t}}function Q(t){0>ae||(t.current=Oe[ae],Oe[ae]=null,ae--)}function se(t,r){ae++,Oe[ae]=t.current,t.current=r}var de=C(null),be=C(null),Ae=C(null),je=C(null);function St(t,r){switch(se(Ae,r),se(be,t),se(de,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Wv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Wv(r),t=Zv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Q(de),se(de,t)}function ot(){Q(de),Q(be),Q(Ae)}function Tn(t){t.memoizedState!==null&&se(je,t);var r=de.current,a=Zv(r,t.type);r!==a&&(se(be,t),se(de,a))}function Jn(t){be.current===t&&(Q(de),Q(be)),je.current===t&&(Q(je),Dl._currentValue=pe)}var Vn,ws;function en(t){if(Vn===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Vn=r&&r[1]||"",ws=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vn+t+ws}var jr=!1;function Es(t,r){if(!t||jr)return"";jr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(K){var $=K}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(K){$=K}t.call(ne.prototype)}}else{try{throw Error()}catch(K){$=K}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(K){if(K&&$&&typeof K.stack=="string")return[K.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],E=m[1];if(_&&E){var j=_.split(`
`),G=E.split(`
`);for(d=l=0;l<j.length&&!j[l].includes("DetermineComponentFrameRoot");)l++;for(;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;if(l===j.length||d===G.length)for(l=j.length-1,d=G.length-1;1<=l&&0<=d&&j[l]!==G[d];)d--;for(;1<=l&&0<=d;l--,d--)if(j[l]!==G[d]){if(l!==1||d!==1)do if(l--,d--,0>d||j[l]!==G[d]){var W=`
`+j[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=d);break}}}finally{jr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?en(a):""}function Mo(t,r){switch(t.tag){case 26:case 27:case 5:return en(t.type);case 16:return en("Lazy");case 13:return t.child!==r&&r!==null?en("Suspense Fallback"):en("Suspense");case 19:return en("SuspenseList");case 0:case 15:return Es(t.type,!1);case 11:return Es(t.type.render,!1);case 1:return Es(t.type,!0);case 31:return en("Activity");default:return""}}function cr(t){try{var r="",a=null;do r+=Mo(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Dr=Object.prototype.hasOwnProperty,dr=s.unstable_scheduleCallback,kr=s.unstable_cancelCallback,Vo=s.unstable_shouldYield,Ci=s.unstable_requestPaint,yt=s.unstable_now,Ts=s.unstable_getCurrentPriorityLevel,ft=s.unstable_ImmediatePriority,_t=s.unstable_UserBlockingPriority,Wn=s.unstable_NormalPriority,Ii=s.unstable_LowPriority,Ss=s.unstable_IdlePriority,Lo=s.log,Or=s.unstable_setDisableYieldValue,Ln=null,kt=null;function pn(t){if(typeof Lo=="function"&&Or(t),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(Ln,t)}catch{}}var Ft=Math.clz32?Math.clz32:xt,le=Math.log,Me=Math.LN2;function xt(t){return t>>>=0,t===0?32:31-(le(t)/Me|0)|0}var ln=256,Ot=262144,Zn=4194304;function Sn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Un(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~m,l!==0?d=Sn(l):(_&=E,_!==0?d=Sn(_):a||(a=E&~t,a!==0&&(d=Sn(a))))):(E=l&~m,E!==0?d=Sn(E):_!==0?d=Sn(_):a||(a=l&~t,a!==0&&(d=Sn(a)))),d===0?0:r!==0&&r!==d&&(r&m)===0&&(m=d&-d,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:d}function Ns(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function ya(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uo(){var t=Zn;return Zn<<=1,(Zn&62914560)===0&&(Zn=4194304),t}function Mr(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function As(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ht(t,r,a,l,d,m){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,j=t.expirationTimes,G=t.hiddenUpdates;for(a=_&~a;0<a;){var W=31-Ft(a),ne=1<<W;E[W]=0,j[W]=-1;var $=G[W];if($!==null)for(G[W]=null,W=0;W<$.length;W++){var K=$[W];K!==null&&(K.lane&=-536870913)}a&=~ne}l!==0&&Po(t,l,0),m!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~r))}function Po(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Ft(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Rs(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Ft(a),d=1<<l;d&r|t[l]&r&&(t[l]|=r),a&=~d}}function Cs(t,r){var a=r&-r;return a=(a&42)!==0?1:zo(a),(a&(t.suspendedLanes|r))!==0?0:a}function zo(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Bo(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Vr(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:wy(t.type))}function Nu(t,r){var a=ee.p;try{return ee.p=t,r()}finally{ee.p=a}}var hr=Math.random().toString(36).slice(2),mt="__reactFiber$"+hr,Gt="__reactProps$"+hr,fr="__reactContainer$"+hr,Is="__reactEvents$"+hr,mr="__reactListeners$"+hr,Au="__reactHandles$"+hr,qo="__reactResources$"+hr,Lr="__reactMarker$"+hr;function ji(t){delete t[mt],delete t[Gt],delete t[Is],delete t[mr],delete t[Au]}function Ur(t){var r=t[mt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[fr]||a[mt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=ay(t);t!==null;){if(a=t[mt])return a;t=ay(t)}return r}t=a,a=t.parentNode}return null}function Pr(t){if(t=t[mt]||t[fr]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Di(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function er(t){var r=t[qo];return r||(r=t[qo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function bt(t){t[Lr]=!0}var _a=new Set,js={};function un(t,r){pr(t,r),pr(t+"Capture",r)}function pr(t,r){for(js[t]=r,t=0;t<r.length;t++)_a.add(r[t])}var ah=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fo={},Ho={};function Ru(t){return Dr.call(Ho,t)?!0:Dr.call(Fo,t)?!1:ah.test(t)?Ho[t]=!0:(Fo[t]=!0,!1)}function Ds(t,r,a){if(Ru(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function ks(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Pn(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function cn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cu(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function oh(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,m=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function xa(t){if(!t._valueTracker){var r=Cu(t)?"checked":"value";t._valueTracker=oh(t,r,""+t[r])}}function Go(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Cu(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function ba(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zr=/[\n"\\]/g;function pt(t){return t.replace(zr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Os(t,r,a,l,d,m,_,E){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+cn(r)):t.value!==""+cn(r)&&(t.value=""+cn(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?wa(t,_,cn(r)):a!=null?wa(t,_,cn(a)):l!=null&&t.removeAttribute("value"),d==null&&m!=null&&(t.defaultChecked=!!m),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+cn(E):t.removeAttribute("name")}function ki(t,r,a,l,d,m,_,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){xa(t);return}a=a!=null?""+cn(a):"",r=r!=null?""+cn(r):a,E||r===t.value||(t.value=r),t.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),xa(t)}function wa(t,r,a){r==="number"&&ba(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Fe(t,r,a,l){if(t=t.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=r.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+cn(a),r=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}r!==null||t[d].disabled||(r=t[d])}r!==null&&(r.selected=!0)}}function Oi(t,r,a){if(r!=null&&(r=""+cn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+cn(a):""}function Ms(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(ct(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=cn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),xa(t)}function zn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var lh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $o(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||lh.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Iu(t,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&a[d]!==l&&$o(t,d,l)}else for(var m in r)r.hasOwnProperty(m)&&$o(t,m,r[m])}function Qo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ch=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gr(t){return ch.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ut(){}var Ea=null;function Ta(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Br=null,Nn=null;function ju(t){var r=Pr(t);if(r&&(t=r.stateNode)){var a=t[Gt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Os(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+pt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var d=l[Gt]||null;if(!d)throw Error(i(90));Os(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Go(l)}break e;case"textarea":Oi(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Fe(t,!!a.multiple,r,!1)}}}var Ko=!1;function Du(t,r,a){if(Ko)return t(r,a);Ko=!0;try{var l=t(r);return l}finally{if(Ko=!1,(Br!==null||Nn!==null)&&(Rc(),Br&&(r=Br,t=Nn,Nn=Br=null,ju(r),t)))for(r=0;r<t.length;r++)ju(t[r])}}function gn(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Gt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yo=!1;if(tr)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){Yo=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{Yo=!1}var An=null,Sa=null,yr=null;function Vs(){if(yr)return yr;var t,r=Sa,a=r.length,l,d="value"in An?An.value:An.textContent,m=d.length;for(t=0;t<a&&r[t]===d[t];t++);var _=a-t;for(l=1;l<=_&&r[a-l]===d[m-l];l++);return yr=d.slice(t,1<l?1-l:void 0)}function Mi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ls(){return!0}function rt(){return!1}function tn(t){function r(a,l,d,m,_){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ls:rt,this.isPropagationStopped=rt,this}return w(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),r}var qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=tn(qr),Us=w({},qr,{view:0,detail:0}),ku=tn(Us),Ps,Na,dn,Li=w({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==dn&&(dn&&t.type==="mousemove"?(Ps=t.screenX-dn.screenX,Na=t.screenY-dn.screenY):Na=Ps=0,dn=t),Ps)},movementY:function(t){return"movementY"in t?t.movementY:Na}}),Ou=tn(Li),Ui=w({},Li,{dataTransfer:0}),Mu=tn(Ui),Xo=w({},Us,{relatedTarget:0}),zs=tn(Xo),Vu=w({},qr,{animationName:0,elapsedTime:0,pseudoElement:0}),Aa=tn(Vu),dh=w({},qr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lu=tn(dh),Pi=w({},qr,{data:0}),Jo=tn(Pi),Uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Zo[t])?!!r[t]:!1}function Bs(){return Pu}var zu=w({},Us,{key:function(t){if(t.key){var r=Uu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Mi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wo[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bs,charCode:function(t){return t.type==="keypress"?Mi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bu=tn(zu),Fr=w({},Li,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),el=tn(Fr),qu=w({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bs}),Fu=tn(qu),Hu=w({},qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ra=tn(Hu),hn=w({},Li,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gu=tn(hn),$u=w({},qr,{newState:0,oldState:0}),qs=tn($u),c=[9,13,27,32],v=tr&&"CompositionEvent"in window,x=null;tr&&"documentMode"in document&&(x=document.documentMode);var T=tr&&"TextEvent"in window&&!x,F=tr&&(!v||x&&8<x&&11>=x),Y=" ",oe=!1;function Ke(t,r){switch(t){case"keyup":return c.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nt(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ie=!1;function Pt(t,r){switch(t){case"compositionend":return Nt(r);case"keypress":return r.which!==32?null:(oe=!0,Y);case"textInput":return t=r.data,t===Y&&oe?null:t;default:return null}}function zt(t,r){if(Ie)return t==="compositionend"||!v&&Ke(t,r)?(t=Vs(),yr=Sa=An=null,Ie=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return F&&r.locale!=="ko"?null:r.data;default:return null}}var Fs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vn(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Fs[t.type]:r==="textarea"}function zi(t,r,a,l){Br?Nn?Nn.push(l):Nn=[l]:Br=l,r=Mc(r,"onChange"),0<r.length&&(a=new Vi("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Hr=null,tl=null;function cE(t){$v(t,0)}function Qu(t){var r=Di(t);if(Go(r))return t}function dg(t,r){if(t==="change")return r}var hg=!1;if(tr){var hh;if(tr){var fh="oninput"in document;if(!fh){var fg=document.createElement("div");fg.setAttribute("oninput","return;"),fh=typeof fg.oninput=="function"}hh=fh}else hh=!1;hg=hh&&(!document.documentMode||9<document.documentMode)}function mg(){Hr&&(Hr.detachEvent("onpropertychange",pg),tl=Hr=null)}function pg(t){if(t.propertyName==="value"&&Qu(tl)){var r=[];zi(r,tl,t,Ta(t)),Du(cE,r)}}function dE(t,r,a){t==="focusin"?(mg(),Hr=r,tl=a,Hr.attachEvent("onpropertychange",pg)):t==="focusout"&&mg()}function hE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qu(tl)}function fE(t,r){if(t==="click")return Qu(r)}function mE(t,r){if(t==="input"||t==="change")return Qu(r)}function pE(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Rn=typeof Object.is=="function"?Object.is:pE;function nl(t,r){if(Rn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Dr.call(r,d)||!Rn(t[d],r[d]))return!1}return!0}function gg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vg(t,r){var a=gg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=gg(a)}}function yg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?yg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function _g(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=ba(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=ba(t.document)}return r}function mh(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var gE=tr&&"documentMode"in document&&11>=document.documentMode,Ca=null,ph=null,rl=null,gh=!1;function xg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;gh||Ca==null||Ca!==ba(l)||(l=Ca,"selectionStart"in l&&mh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),rl&&nl(rl,l)||(rl=l,l=Mc(ph,"onSelect"),0<l.length&&(r=new Vi("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Ca)))}function Bi(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Ia={animationend:Bi("Animation","AnimationEnd"),animationiteration:Bi("Animation","AnimationIteration"),animationstart:Bi("Animation","AnimationStart"),transitionrun:Bi("Transition","TransitionRun"),transitionstart:Bi("Transition","TransitionStart"),transitioncancel:Bi("Transition","TransitionCancel"),transitionend:Bi("Transition","TransitionEnd")},vh={},bg={};tr&&(bg=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function qi(t){if(vh[t])return vh[t];if(!Ia[t])return t;var r=Ia[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in bg)return vh[t]=r[a];return t}var wg=qi("animationend"),Eg=qi("animationiteration"),Tg=qi("animationstart"),vE=qi("transitionrun"),yE=qi("transitionstart"),_E=qi("transitioncancel"),Sg=qi("transitionend"),Ng=new Map,yh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yh.push("scrollEnd");function nr(t,r){Ng.set(t,r),un(r,[t])}var Ku=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Bn=[],ja=0,_h=0;function Yu(){for(var t=ja,r=_h=ja=0;r<t;){var a=Bn[r];Bn[r++]=null;var l=Bn[r];Bn[r++]=null;var d=Bn[r];Bn[r++]=null;var m=Bn[r];if(Bn[r++]=null,l!==null&&d!==null){var _=l.pending;_===null?d.next=d:(d.next=_.next,_.next=d),l.pending=d}m!==0&&Ag(a,d,m)}}function Xu(t,r,a,l){Bn[ja++]=t,Bn[ja++]=r,Bn[ja++]=a,Bn[ja++]=l,_h|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function xh(t,r,a,l){return Xu(t,r,a,l),Ju(t)}function Fi(t,r){return Xu(t,null,null,r),Ju(t)}function Ag(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(d=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,d&&r!==null&&(d=31-Ft(a),t=m.hiddenUpdates,l=t[d],l===null?t[d]=[r]:l.push(r),r.lane=a|536870912),m):null}function Ju(t){if(50<Sl)throw Sl=0,If=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Da={};function xE(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,r,a,l){return new xE(t,r,a,l)}function bh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gr(t,r){var a=t.alternate;return a===null?(a=Cn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Rg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Wu(t,r,a,l,d,m){var _=0;if(l=t,typeof t=="function")bh(t)&&(_=1);else if(typeof t=="string")_=S1(t,a,de.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=Cn(31,a,r,d),t.elementType=A,t.lanes=m,t;case z:return Hi(a.children,d,m,r);case L:_=8,d|=24;break;case J:return t=Cn(12,a,r,d|2),t.elementType=J,t.lanes=m,t;case ye:return t=Cn(13,a,r,d),t.elementType=ye,t.lanes=m,t;case ge:return t=Cn(19,a,r,d),t.elementType=ge,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z:_=10;break e;case X:_=9;break e;case ue:_=11;break e;case I:_=14;break e;case S:_=16,l=null;break e}_=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return r=Cn(_,a,r,d),r.elementType=t,r.type=l,r.lanes=m,r}function Hi(t,r,a,l){return t=Cn(7,t,l,r),t.lanes=a,t}function wh(t,r,a){return t=Cn(6,t,null,r),t.lanes=a,t}function Cg(t){var r=Cn(18,null,null,0);return r.stateNode=t,r}function Eh(t,r,a){return r=Cn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ig=new WeakMap;function qn(t,r){if(typeof t=="object"&&t!==null){var a=Ig.get(t);return a!==void 0?a:(r={value:t,source:r,stack:cr(r)},Ig.set(t,r),r)}return{value:t,source:r,stack:cr(r)}}var ka=[],Oa=0,Zu=null,sl=0,Fn=[],Hn=0,Hs=null,_r=1,xr="";function $r(t,r){ka[Oa++]=sl,ka[Oa++]=Zu,Zu=t,sl=r}function jg(t,r,a){Fn[Hn++]=_r,Fn[Hn++]=xr,Fn[Hn++]=Hs,Hs=t;var l=_r;t=xr;var d=32-Ft(l)-1;l&=~(1<<d),a+=1;var m=32-Ft(r)+d;if(30<m){var _=d-d%5;m=(l&(1<<_)-1).toString(32),l>>=_,d-=_,_r=1<<32-Ft(r)+d|a<<d|l,xr=m+t}else _r=1<<m|a<<d|l,xr=t}function Th(t){t.return!==null&&($r(t,1),jg(t,1,0))}function Sh(t){for(;t===Zu;)Zu=ka[--Oa],ka[Oa]=null,sl=ka[--Oa],ka[Oa]=null;for(;t===Hs;)Hs=Fn[--Hn],Fn[Hn]=null,xr=Fn[--Hn],Fn[Hn]=null,_r=Fn[--Hn],Fn[Hn]=null}function Dg(t,r){Fn[Hn++]=_r,Fn[Hn++]=xr,Fn[Hn++]=Hs,_r=r.id,xr=r.overflow,Hs=t}var $t=null,st=null,Pe=!1,Gs=null,Gn=!1,Nh=Error(i(519));function $s(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw il(qn(r,t)),Nh}function kg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[mt]=t,r[Gt]=l,a){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(a=0;a<Al.length;a++)ke(Al[a],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":ke("invalid",r),ki(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ke("invalid",r);break;case"textarea":ke("invalid",r),Ms(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Xv(r.textContent,a)?(l.popover!=null&&(ke("beforetoggle",r),ke("toggle",r)),l.onScroll!=null&&ke("scroll",r),l.onScrollEnd!=null&&ke("scrollend",r),l.onClick!=null&&(r.onclick=Ut),r=!0):r=!1,r||$s(t,!0)}function Og(t){for($t=t.return;$t;)switch($t.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:$t=$t.return}}function Ma(t){if(t!==$t)return!1;if(!Pe)return Og(t),Pe=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Gf(t.type,t.memoizedProps)),a=!a),a&&st&&$s(t),Og(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));st=iy(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));st=iy(t)}else r===27?(r=st,ai(t.type)?(t=Xf,Xf=null,st=t):st=r):st=$t?Qn(t.stateNode.nextSibling):null;return!0}function Gi(){st=$t=null,Pe=!1}function Ah(){var t=Gs;return t!==null&&(bn===null?bn=t:bn.push.apply(bn,t),Gs=null),t}function il(t){Gs===null?Gs=[t]:Gs.push(t)}var Rh=C(null),$i=null,Qr=null;function Qs(t,r,a){se(Rh,r._currentValue),r._currentValue=a}function Kr(t){t._currentValue=Rh.current,Q(Rh)}function Ch(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Ih(t,r,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var m=d.dependencies;if(m!==null){var _=d.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=d;for(var j=0;j<r.length;j++)if(E.context===r[j]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),Ch(m.return,a,t),l||(_=null);break e}m=E.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(i(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),Ch(_,a,t),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===t){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function Va(t,r,a,l){t=null;for(var d=r,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var E=d.type;Rn(d.pendingProps.value,_.value)||(t!==null?t.push(E):t=[E])}}else if(d===je.current){if(_=d.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Dl):t=[Dl])}d=d.return}t!==null&&Ih(r,t,a,l),r.flags|=262144}function ec(t){for(t=t.firstContext;t!==null;){if(!Rn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Qi(t){$i=t,Qr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qt(t){return Mg($i,t)}function tc(t,r){return $i===null&&Qi(t),Mg(t,r)}function Mg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Qr===null){if(t===null)throw Error(i(308));Qr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Qr=Qr.next=r;return a}var bE=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},wE=s.unstable_scheduleCallback,EE=s.unstable_NormalPriority,At={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jh(){return{controller:new bE,data:new Map,refCount:0}}function al(t){t.refCount--,t.refCount===0&&wE(EE,function(){t.controller.abort()})}var ol=null,Dh=0,La=0,Ua=null;function TE(t,r){if(ol===null){var a=ol=[];Dh=0,La=Vf(),Ua={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Dh++,r.then(Vg,Vg),r}function Vg(){if(--Dh===0&&ol!==null){Ua!==null&&(Ua.status="fulfilled");var t=ol;ol=null,La=0,Ua=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function SE(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Lg=q.S;q.S=function(t,r){xv=yt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&TE(t,r),Lg!==null&&Lg(t,r)};var Ki=C(null);function kh(){var t=Ki.current;return t!==null?t:tt.pooledCache}function nc(t,r){r===null?se(Ki,Ki.current):se(Ki,r.pool)}function Ug(){var t=kh();return t===null?null:{parent:At._currentValue,pool:t}}var Pa=Error(i(460)),Oh=Error(i(474)),rc=Error(i(542)),sc={then:function(){}};function Pg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function zg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(Ut,Ut),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,qg(t),t;default:if(typeof r.status=="string")r.then(Ut,Ut);else{if(t=tt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,qg(t),t}throw Xi=r,Pa}}function Yi(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Xi=a,Pa):a}}var Xi=null;function Bg(){if(Xi===null)throw Error(i(459));var t=Xi;return Xi=null,t}function qg(t){if(t===Pa||t===rc)throw Error(i(483))}var za=null,ll=0;function ic(t){var r=ll;return ll+=1,za===null&&(za=[]),zg(za,t,r)}function ul(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function ac(t,r){throw r.$$typeof===N?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Fg(t){function r(B,U){if(t){var H=B.deletions;H===null?(B.deletions=[U],B.flags|=16):H.push(U)}}function a(B,U){if(!t)return null;for(;U!==null;)r(B,U),U=U.sibling;return null}function l(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function d(B,U){return B=Gr(B,U),B.index=0,B.sibling=null,B}function m(B,U,H){return B.index=H,t?(H=B.alternate,H!==null?(H=H.index,H<U?(B.flags|=67108866,U):H):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function _(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function E(B,U,H,te){return U===null||U.tag!==6?(U=wh(H,B.mode,te),U.return=B,U):(U=d(U,H),U.return=B,U)}function j(B,U,H,te){var ve=H.type;return ve===z?W(B,U,H.props.children,te,H.key):U!==null&&(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===S&&Yi(ve)===U.type)?(U=d(U,H.props),ul(U,H),U.return=B,U):(U=Wu(H.type,H.key,H.props,null,B.mode,te),ul(U,H),U.return=B,U)}function G(B,U,H,te){return U===null||U.tag!==4||U.stateNode.containerInfo!==H.containerInfo||U.stateNode.implementation!==H.implementation?(U=Eh(H,B.mode,te),U.return=B,U):(U=d(U,H.children||[]),U.return=B,U)}function W(B,U,H,te,ve){return U===null||U.tag!==7?(U=Hi(H,B.mode,te,ve),U.return=B,U):(U=d(U,H),U.return=B,U)}function ne(B,U,H){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=wh(""+U,B.mode,H),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case V:return H=Wu(U.type,U.key,U.props,null,B.mode,H),ul(H,U),H.return=B,H;case M:return U=Eh(U,B.mode,H),U.return=B,U;case S:return U=Yi(U),ne(B,U,H)}if(ct(U)||P(U))return U=Hi(U,B.mode,H,null),U.return=B,U;if(typeof U.then=="function")return ne(B,ic(U),H);if(U.$$typeof===Z)return ne(B,tc(B,U),H);ac(B,U)}return null}function $(B,U,H,te){var ve=U!==null?U.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ve!==null?null:E(B,U,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case V:return H.key===ve?j(B,U,H,te):null;case M:return H.key===ve?G(B,U,H,te):null;case S:return H=Yi(H),$(B,U,H,te)}if(ct(H)||P(H))return ve!==null?null:W(B,U,H,te,null);if(typeof H.then=="function")return $(B,U,ic(H),te);if(H.$$typeof===Z)return $(B,U,tc(B,H),te);ac(B,H)}return null}function K(B,U,H,te,ve){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return B=B.get(H)||null,E(U,B,""+te,ve);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case V:return B=B.get(te.key===null?H:te.key)||null,j(U,B,te,ve);case M:return B=B.get(te.key===null?H:te.key)||null,G(U,B,te,ve);case S:return te=Yi(te),K(B,U,H,te,ve)}if(ct(te)||P(te))return B=B.get(H)||null,W(U,B,te,ve,null);if(typeof te.then=="function")return K(B,U,H,ic(te),ve);if(te.$$typeof===Z)return K(B,U,H,tc(U,te),ve);ac(U,te)}return null}function he(B,U,H,te){for(var ve=null,He=null,me=U,Ce=U=0,Le=null;me!==null&&Ce<H.length;Ce++){me.index>Ce?(Le=me,me=null):Le=me.sibling;var Ge=$(B,me,H[Ce],te);if(Ge===null){me===null&&(me=Le);break}t&&me&&Ge.alternate===null&&r(B,me),U=m(Ge,U,Ce),He===null?ve=Ge:He.sibling=Ge,He=Ge,me=Le}if(Ce===H.length)return a(B,me),Pe&&$r(B,Ce),ve;if(me===null){for(;Ce<H.length;Ce++)me=ne(B,H[Ce],te),me!==null&&(U=m(me,U,Ce),He===null?ve=me:He.sibling=me,He=me);return Pe&&$r(B,Ce),ve}for(me=l(me);Ce<H.length;Ce++)Le=K(me,B,Ce,H[Ce],te),Le!==null&&(t&&Le.alternate!==null&&me.delete(Le.key===null?Ce:Le.key),U=m(Le,U,Ce),He===null?ve=Le:He.sibling=Le,He=Le);return t&&me.forEach(function(di){return r(B,di)}),Pe&&$r(B,Ce),ve}function xe(B,U,H,te){if(H==null)throw Error(i(151));for(var ve=null,He=null,me=U,Ce=U=0,Le=null,Ge=H.next();me!==null&&!Ge.done;Ce++,Ge=H.next()){me.index>Ce?(Le=me,me=null):Le=me.sibling;var di=$(B,me,Ge.value,te);if(di===null){me===null&&(me=Le);break}t&&me&&di.alternate===null&&r(B,me),U=m(di,U,Ce),He===null?ve=di:He.sibling=di,He=di,me=Le}if(Ge.done)return a(B,me),Pe&&$r(B,Ce),ve;if(me===null){for(;!Ge.done;Ce++,Ge=H.next())Ge=ne(B,Ge.value,te),Ge!==null&&(U=m(Ge,U,Ce),He===null?ve=Ge:He.sibling=Ge,He=Ge);return Pe&&$r(B,Ce),ve}for(me=l(me);!Ge.done;Ce++,Ge=H.next())Ge=K(me,B,Ce,Ge.value,te),Ge!==null&&(t&&Ge.alternate!==null&&me.delete(Ge.key===null?Ce:Ge.key),U=m(Ge,U,Ce),He===null?ve=Ge:He.sibling=Ge,He=Ge);return t&&me.forEach(function(V1){return r(B,V1)}),Pe&&$r(B,Ce),ve}function et(B,U,H,te){if(typeof H=="object"&&H!==null&&H.type===z&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case V:e:{for(var ve=H.key;U!==null;){if(U.key===ve){if(ve=H.type,ve===z){if(U.tag===7){a(B,U.sibling),te=d(U,H.props.children),te.return=B,B=te;break e}}else if(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===S&&Yi(ve)===U.type){a(B,U.sibling),te=d(U,H.props),ul(te,H),te.return=B,B=te;break e}a(B,U);break}else r(B,U);U=U.sibling}H.type===z?(te=Hi(H.props.children,B.mode,te,H.key),te.return=B,B=te):(te=Wu(H.type,H.key,H.props,null,B.mode,te),ul(te,H),te.return=B,B=te)}return _(B);case M:e:{for(ve=H.key;U!==null;){if(U.key===ve)if(U.tag===4&&U.stateNode.containerInfo===H.containerInfo&&U.stateNode.implementation===H.implementation){a(B,U.sibling),te=d(U,H.children||[]),te.return=B,B=te;break e}else{a(B,U);break}else r(B,U);U=U.sibling}te=Eh(H,B.mode,te),te.return=B,B=te}return _(B);case S:return H=Yi(H),et(B,U,H,te)}if(ct(H))return he(B,U,H,te);if(P(H)){if(ve=P(H),typeof ve!="function")throw Error(i(150));return H=ve.call(H),xe(B,U,H,te)}if(typeof H.then=="function")return et(B,U,ic(H),te);if(H.$$typeof===Z)return et(B,U,tc(B,H),te);ac(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,U!==null&&U.tag===6?(a(B,U.sibling),te=d(U,H),te.return=B,B=te):(a(B,U),te=wh(H,B.mode,te),te.return=B,B=te),_(B)):a(B,U)}return function(B,U,H,te){try{ll=0;var ve=et(B,U,H,te);return za=null,ve}catch(me){if(me===Pa||me===rc)throw me;var He=Cn(29,me,null,B.mode);return He.lanes=te,He.return=B,He}finally{}}}var Ji=Fg(!0),Hg=Fg(!1),Ks=!1;function Mh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vh(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ys(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Xs(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Qe&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=Ju(t),Ag(t,null,a),r}return Xu(t,l,r,a),Ju(t)}function cl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Rs(t,a)}}function Lh(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?d=m=r:m=m.next=r}else d=m=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Uh=!1;function dl(){if(Uh){var t=Ua;if(t!==null)throw t}}function hl(t,r,a,l){Uh=!1;var d=t.updateQueue;Ks=!1;var m=d.firstBaseUpdate,_=d.lastBaseUpdate,E=d.shared.pending;if(E!==null){d.shared.pending=null;var j=E,G=j.next;j.next=null,_===null?m=G:_.next=G,_=j;var W=t.alternate;W!==null&&(W=W.updateQueue,E=W.lastBaseUpdate,E!==_&&(E===null?W.firstBaseUpdate=G:E.next=G,W.lastBaseUpdate=j))}if(m!==null){var ne=d.baseState;_=0,W=G=j=null,E=m;do{var $=E.lane&-536870913,K=$!==E.lane;if(K?(Ve&$)===$:(l&$)===$){$!==0&&$===La&&(Uh=!0),W!==null&&(W=W.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var he=t,xe=E;$=r;var et=a;switch(xe.tag){case 1:if(he=xe.payload,typeof he=="function"){ne=he.call(et,ne,$);break e}ne=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=xe.payload,$=typeof he=="function"?he.call(et,ne,$):he,$==null)break e;ne=w({},ne,$);break e;case 2:Ks=!0}}$=E.callback,$!==null&&(t.flags|=64,K&&(t.flags|=8192),K=d.callbacks,K===null?d.callbacks=[$]:K.push($))}else K={lane:$,tag:E.tag,payload:E.payload,callback:E.callback,next:null},W===null?(G=W=K,j=ne):W=W.next=K,_|=$;if(E=E.next,E===null){if(E=d.shared.pending,E===null)break;K=E,E=K.next,K.next=null,d.lastBaseUpdate=K,d.shared.pending=null}}while(!0);W===null&&(j=ne),d.baseState=j,d.firstBaseUpdate=G,d.lastBaseUpdate=W,m===null&&(d.shared.lanes=0),ti|=_,t.lanes=_,t.memoizedState=ne}}function Gg(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function $g(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Gg(a[t],r)}var Ba=C(null),oc=C(0);function Qg(t,r){t=rs,se(oc,t),se(Ba,r),rs=t|r.baseLanes}function Ph(){se(oc,rs),se(Ba,Ba.current)}function zh(){rs=oc.current,Q(Ba),Q(oc)}var In=C(null),$n=null;function Js(t){var r=t.alternate;se(wt,wt.current&1),se(In,t),$n===null&&(r===null||Ba.current!==null||r.memoizedState!==null)&&($n=t)}function Bh(t){se(wt,wt.current),se(In,t),$n===null&&($n=t)}function Kg(t){t.tag===22?(se(wt,wt.current),se(In,t),$n===null&&($n=t)):Ws()}function Ws(){se(wt,wt.current),se(In,In.current)}function jn(t){Q(In),$n===t&&($n=null),Q(wt)}var wt=C(0);function lc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Kf(a)||Yf(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Yr=0,Re=null,We=null,Rt=null,uc=!1,qa=!1,Wi=!1,cc=0,fl=0,Fa=null,NE=0;function gt(){throw Error(i(321))}function qh(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Rn(t[a],r[a]))return!1;return!0}function Fh(t,r,a,l,d,m){return Yr=m,Re=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,q.H=t===null||t.memoizedState===null?j0:sf,Wi=!1,m=a(l,d),Wi=!1,qa&&(m=Xg(r,a,l,d)),Yg(t),m}function Yg(t){q.H=gl;var r=We!==null&&We.next!==null;if(Yr=0,Rt=We=Re=null,uc=!1,fl=0,Fa=null,r)throw Error(i(300));t===null||Ct||(t=t.dependencies,t!==null&&ec(t)&&(Ct=!0))}function Xg(t,r,a,l){Re=t;var d=0;do{if(qa&&(Fa=null),fl=0,qa=!1,25<=d)throw Error(i(301));if(d+=1,Rt=We=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}q.H=D0,m=r(a,l)}while(qa);return m}function AE(){var t=q.H,r=t.useState()[0];return r=typeof r.then=="function"?ml(r):r,t=t.useState()[0],(We!==null?We.memoizedState:null)!==t&&(Re.flags|=1024),r}function Hh(){var t=cc!==0;return cc=0,t}function Gh(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function $h(t){if(uc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}uc=!1}Yr=0,Rt=We=Re=null,qa=!1,fl=cc=0,Fa=null}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Re.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Et(){if(We===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var r=Rt===null?Re.memoizedState:Rt.next;if(r!==null)Rt=r,We=t;else{if(t===null)throw Re.alternate===null?Error(i(467)):Error(i(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Rt===null?Re.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ml(t){var r=fl;return fl+=1,Fa===null&&(Fa=[]),t=zg(Fa,t,r),r=Re,(Rt===null?r.memoizedState:Rt.next)===null&&(r=r.alternate,q.H=r===null||r.memoizedState===null?j0:sf),t}function hc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ml(t);if(t.$$typeof===Z)return Qt(t)}throw Error(i(438,String(t)))}function Qh(t){var r=null,a=Re.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=dc(),Re.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=D;return r.index++,a}function Xr(t,r){return typeof r=="function"?r(t):r}function fc(t){var r=Et();return Kh(r,We,t)}function Kh(t,r,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var d=t.baseQueue,m=l.pending;if(m!==null){if(d!==null){var _=d.next;d.next=m.next,m.next=_}r.baseQueue=d=m,l.pending=null}if(m=t.baseState,d===null)t.memoizedState=m;else{r=d.next;var E=_=null,j=null,G=r,W=!1;do{var ne=G.lane&-536870913;if(ne!==G.lane?(Ve&ne)===ne:(Yr&ne)===ne){var $=G.revertLane;if($===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ne===La&&(W=!0);else if((Yr&$)===$){G=G.next,$===La&&(W=!0);continue}else ne={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},j===null?(E=j=ne,_=m):j=j.next=ne,Re.lanes|=$,ti|=$;ne=G.action,Wi&&a(m,ne),m=G.hasEagerState?G.eagerState:a(m,ne)}else $={lane:ne,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},j===null?(E=j=$,_=m):j=j.next=$,Re.lanes|=ne,ti|=ne;G=G.next}while(G!==null&&G!==r);if(j===null?_=m:j.next=E,!Rn(m,t.memoizedState)&&(Ct=!0,W&&(a=Ua,a!==null)))throw a;t.memoizedState=m,t.baseState=_,t.baseQueue=j,l.lastRenderedState=m}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Yh(t){var r=Et(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,m=r.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do m=t(m,_.action),_=_.next;while(_!==d);Rn(m,r.memoizedState)||(Ct=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function Jg(t,r,a){var l=Re,d=Et(),m=Pe;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=r();var _=!Rn((We||d).memoizedState,a);if(_&&(d.memoizedState=a,Ct=!0),d=d.queue,Wh(e0.bind(null,l,d,t),[t]),d.getSnapshot!==r||_||Rt!==null&&Rt.memoizedState.tag&1){if(l.flags|=2048,Ha(9,{destroy:void 0},Zg.bind(null,l,d,a,r),null),tt===null)throw Error(i(349));m||(Yr&127)!==0||Wg(l,r,a)}return a}function Wg(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Re.updateQueue,r===null?(r=dc(),Re.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Zg(t,r,a,l){r.value=a,r.getSnapshot=l,t0(r)&&n0(t)}function e0(t,r,a){return a(function(){t0(r)&&n0(t)})}function t0(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Rn(t,a)}catch{return!0}}function n0(t){var r=Fi(t,2);r!==null&&wn(r,t,2)}function Xh(t){var r=fn();if(typeof t=="function"){var a=t;if(t=a(),Wi){pn(!0);try{a()}finally{pn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xr,lastRenderedState:t},r}function r0(t,r,a,l){return t.baseState=a,Kh(t,We,typeof l=="function"?l:Xr)}function RE(t,r,a,l,d){if(gc(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};q.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,s0(r,m)):(m.next=a.next,r.pending=a.next=m)}}function s0(t,r){var a=r.action,l=r.payload,d=t.state;if(r.isTransition){var m=q.T,_={};q.T=_;try{var E=a(d,l),j=q.S;j!==null&&j(_,E),i0(t,r,E)}catch(G){Jh(t,r,G)}finally{m!==null&&_.types!==null&&(m.types=_.types),q.T=m}}else try{m=a(d,l),i0(t,r,m)}catch(G){Jh(t,r,G)}}function i0(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){a0(t,r,l)},function(l){return Jh(t,r,l)}):a0(t,r,a)}function a0(t,r,a){r.status="fulfilled",r.value=a,o0(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,s0(t,a)))}function Jh(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,o0(r),r=r.next;while(r!==l)}t.action=null}function o0(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function l0(t,r){return r}function u0(t,r){if(Pe){var a=tt.formState;if(a!==null){e:{var l=Re;if(Pe){if(st){t:{for(var d=st,m=Gn;d.nodeType!==8;){if(!m){d=null;break t}if(d=Qn(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){st=Qn(d.nextSibling),l=d.data==="F!";break e}}$s(l)}l=!1}l&&(r=a[0])}}return a=fn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l0,lastRenderedState:r},a.queue=l,a=R0.bind(null,Re,l),l.dispatch=a,l=Xh(!1),m=rf.bind(null,Re,!1,l.queue),l=fn(),d={state:r,dispatch:null,action:t,pending:null},l.queue=d,a=RE.bind(null,Re,d,m,a),d.dispatch=a,l.memoizedState=t,[r,a,!1]}function c0(t){var r=Et();return d0(r,We,t)}function d0(t,r,a){if(r=Kh(t,r,l0)[0],t=fc(Xr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=ml(r)}catch(_){throw _===Pa?rc:_}else l=r;r=Et();var d=r.queue,m=d.dispatch;return a!==r.memoizedState&&(Re.flags|=2048,Ha(9,{destroy:void 0},CE.bind(null,d,a),null)),[l,m,t]}function CE(t,r){t.action=r}function h0(t){var r=Et(),a=We;if(a!==null)return d0(r,a,t);Et(),r=r.memoizedState,a=Et();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Ha(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Re.updateQueue,r===null&&(r=dc(),Re.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function f0(){return Et().memoizedState}function mc(t,r,a,l){var d=fn();Re.flags|=t,d.memoizedState=Ha(1|r,{destroy:void 0},a,l===void 0?null:l)}function pc(t,r,a,l){var d=Et();l=l===void 0?null:l;var m=d.memoizedState.inst;We!==null&&l!==null&&qh(l,We.memoizedState.deps)?d.memoizedState=Ha(r,m,a,l):(Re.flags|=t,d.memoizedState=Ha(1|r,m,a,l))}function m0(t,r){mc(8390656,8,t,r)}function Wh(t,r){pc(2048,8,t,r)}function IE(t){Re.flags|=4;var r=Re.updateQueue;if(r===null)r=dc(),Re.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function p0(t){var r=Et().memoizedState;return IE({ref:r,nextImpl:t}),function(){if((Qe&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function g0(t,r){return pc(4,2,t,r)}function v0(t,r){return pc(4,4,t,r)}function y0(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function _0(t,r,a){a=a!=null?a.concat([t]):null,pc(4,4,y0.bind(null,r,t),a)}function Zh(){}function x0(t,r){var a=Et();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&qh(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function b0(t,r){var a=Et();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&qh(r,l[1]))return l[0];if(l=t(),Wi){pn(!0);try{t()}finally{pn(!1)}}return a.memoizedState=[l,r],l}function ef(t,r,a){return a===void 0||(Yr&1073741824)!==0&&(Ve&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=wv(),Re.lanes|=t,ti|=t,a)}function w0(t,r,a,l){return Rn(a,r)?a:Ba.current!==null?(t=ef(t,a,l),Rn(t,r)||(Ct=!0),t):(Yr&42)===0||(Yr&1073741824)!==0&&(Ve&261930)===0?(Ct=!0,t.memoizedState=a):(t=wv(),Re.lanes|=t,ti|=t,r)}function E0(t,r,a,l,d){var m=ee.p;ee.p=m!==0&&8>m?m:8;var _=q.T,E={};q.T=E,rf(t,!1,r,a);try{var j=d(),G=q.S;if(G!==null&&G(E,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var W=SE(j,l);pl(t,r,W,On(t))}else pl(t,r,l,On(t))}catch(ne){pl(t,r,{then:function(){},status:"rejected",reason:ne},On())}finally{ee.p=m,_!==null&&E.types!==null&&(_.types=E.types),q.T=_}}function jE(){}function tf(t,r,a,l){if(t.tag!==5)throw Error(i(476));var d=T0(t).queue;E0(t,d,r,pe,a===null?jE:function(){return S0(t),a(l)})}function T0(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xr,lastRenderedState:pe},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xr,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function S0(t){var r=T0(t);r.next===null&&(r=t.alternate.memoizedState),pl(t,r.next.queue,{},On())}function nf(){return Qt(Dl)}function N0(){return Et().memoizedState}function A0(){return Et().memoizedState}function DE(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=On();t=Ys(a);var l=Xs(r,t,a);l!==null&&(wn(l,r,a),cl(l,r,a)),r={cache:jh()},t.payload=r;return}r=r.return}}function kE(t,r,a){var l=On();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},gc(t)?C0(r,a):(a=xh(t,r,a,l),a!==null&&(wn(a,t,l),I0(a,r,l)))}function R0(t,r,a){var l=On();pl(t,r,a,l)}function pl(t,r,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(gc(t))C0(r,d);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var _=r.lastRenderedState,E=m(_,a);if(d.hasEagerState=!0,d.eagerState=E,Rn(E,_))return Xu(t,r,d,0),tt===null&&Yu(),!1}catch{}finally{}if(a=xh(t,r,d,l),a!==null)return wn(a,t,l),I0(a,r,l),!0}return!1}function rf(t,r,a,l){if(l={lane:2,revertLane:Vf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},gc(t)){if(r)throw Error(i(479))}else r=xh(t,a,l,2),r!==null&&wn(r,t,2)}function gc(t){var r=t.alternate;return t===Re||r!==null&&r===Re}function C0(t,r){qa=uc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function I0(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Rs(t,a)}}var gl={readContext:Qt,use:hc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};gl.useEffectEvent=gt;var j0={readContext:Qt,use:hc,useCallback:function(t,r){return fn().memoizedState=[t,r===void 0?null:r],t},useContext:Qt,useEffect:m0,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,mc(4194308,4,y0.bind(null,r,t),a)},useLayoutEffect:function(t,r){return mc(4194308,4,t,r)},useInsertionEffect:function(t,r){mc(4,2,t,r)},useMemo:function(t,r){var a=fn();r=r===void 0?null:r;var l=t();if(Wi){pn(!0);try{t()}finally{pn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=fn();if(a!==void 0){var d=a(r);if(Wi){pn(!0);try{a(r)}finally{pn(!1)}}}else d=r;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=kE.bind(null,Re,t),[l.memoizedState,t]},useRef:function(t){var r=fn();return t={current:t},r.memoizedState=t},useState:function(t){t=Xh(t);var r=t.queue,a=R0.bind(null,Re,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Zh,useDeferredValue:function(t,r){var a=fn();return ef(a,t,r)},useTransition:function(){var t=Xh(!1);return t=E0.bind(null,Re,t.queue,!0,!1),fn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Re,d=fn();if(Pe){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),tt===null)throw Error(i(349));(Ve&127)!==0||Wg(l,r,a)}d.memoizedState=a;var m={value:a,getSnapshot:r};return d.queue=m,m0(e0.bind(null,l,m,t),[t]),l.flags|=2048,Ha(9,{destroy:void 0},Zg.bind(null,l,m,a,r),null),a},useId:function(){var t=fn(),r=tt.identifierPrefix;if(Pe){var a=xr,l=_r;a=(l&~(1<<32-Ft(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=cc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=NE++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:nf,useFormState:u0,useActionState:u0,useOptimistic:function(t){var r=fn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=rf.bind(null,Re,!0,a),a.dispatch=r,[t,r]},useMemoCache:Qh,useCacheRefresh:function(){return fn().memoizedState=DE.bind(null,Re)},useEffectEvent:function(t){var r=fn(),a={impl:t};return r.memoizedState=a,function(){if((Qe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},sf={readContext:Qt,use:hc,useCallback:x0,useContext:Qt,useEffect:Wh,useImperativeHandle:_0,useInsertionEffect:g0,useLayoutEffect:v0,useMemo:b0,useReducer:fc,useRef:f0,useState:function(){return fc(Xr)},useDebugValue:Zh,useDeferredValue:function(t,r){var a=Et();return w0(a,We.memoizedState,t,r)},useTransition:function(){var t=fc(Xr)[0],r=Et().memoizedState;return[typeof t=="boolean"?t:ml(t),r]},useSyncExternalStore:Jg,useId:N0,useHostTransitionStatus:nf,useFormState:c0,useActionState:c0,useOptimistic:function(t,r){var a=Et();return r0(a,We,t,r)},useMemoCache:Qh,useCacheRefresh:A0};sf.useEffectEvent=p0;var D0={readContext:Qt,use:hc,useCallback:x0,useContext:Qt,useEffect:Wh,useImperativeHandle:_0,useInsertionEffect:g0,useLayoutEffect:v0,useMemo:b0,useReducer:Yh,useRef:f0,useState:function(){return Yh(Xr)},useDebugValue:Zh,useDeferredValue:function(t,r){var a=Et();return We===null?ef(a,t,r):w0(a,We.memoizedState,t,r)},useTransition:function(){var t=Yh(Xr)[0],r=Et().memoizedState;return[typeof t=="boolean"?t:ml(t),r]},useSyncExternalStore:Jg,useId:N0,useHostTransitionStatus:nf,useFormState:h0,useActionState:h0,useOptimistic:function(t,r){var a=Et();return We!==null?r0(a,We,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Qh,useCacheRefresh:A0};D0.useEffectEvent=p0;function af(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:w({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var of={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=On(),d=Ys(l);d.payload=r,a!=null&&(d.callback=a),r=Xs(t,d,l),r!==null&&(wn(r,t,l),cl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=On(),d=Ys(l);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=Xs(t,d,l),r!==null&&(wn(r,t,l),cl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=On(),l=Ys(a);l.tag=2,r!=null&&(l.callback=r),r=Xs(t,l,a),r!==null&&(wn(r,t,a),cl(r,t,a))}};function k0(t,r,a,l,d,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,_):r.prototype&&r.prototype.isPureReactComponent?!nl(a,l)||!nl(d,m):!0}function O0(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&of.enqueueReplaceState(r,r.state,null)}function Zi(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=w({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}function M0(t){Ku(t)}function V0(t){console.error(t)}function L0(t){Ku(t)}function vc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function U0(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function lf(t,r,a){return a=Ys(a),a.tag=3,a.payload={element:null},a.callback=function(){vc(t,r)},a}function P0(t){return t=Ys(t),t.tag=3,t}function z0(t,r,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=l.value;t.payload=function(){return d(m)},t.callback=function(){U0(r,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){U0(r,a,l),typeof d!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function OE(t,r,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&Va(r,a,d,!0),a=In.current,a!==null){switch(a.tag){case 31:case 13:return $n===null?Cc():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===sc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),kf(t,l,d)),!1;case 22:return a.flags|=65536,l===sc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),kf(t,l,d)),!1}throw Error(i(435,a.tag))}return kf(t,l,d),Cc(),!1}if(Pe)return r=In.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==Nh&&(t=Error(i(422),{cause:l}),il(qn(t,a)))):(l!==Nh&&(r=Error(i(423),{cause:l}),il(qn(r,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=qn(l,a),d=lf(t.stateNode,l,d),Lh(t,d),vt!==4&&(vt=2)),!1;var m=Error(i(520),{cause:l});if(m=qn(m,a),Tl===null?Tl=[m]:Tl.push(m),vt!==4&&(vt=2),r===null)return!0;l=qn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=lf(a.stateNode,l,t),Lh(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ni===null||!ni.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=P0(d),z0(d,t,a,l),Lh(a,d),!1}a=a.return}while(a!==null);return!1}var uf=Error(i(461)),Ct=!1;function Kt(t,r,a,l){r.child=t===null?Hg(r,null,a,l):Ji(r,t.child,a,l)}function B0(t,r,a,l,d){a=a.render;var m=r.ref;if("ref"in l){var _={};for(var E in l)E!=="ref"&&(_[E]=l[E])}else _=l;return Qi(r),l=Fh(t,r,a,_,m,d),E=Hh(),t!==null&&!Ct?(Gh(t,r,d),Jr(t,r,d)):(Pe&&E&&Th(r),r.flags|=1,Kt(t,r,l,d),r.child)}function q0(t,r,a,l,d){if(t===null){var m=a.type;return typeof m=="function"&&!bh(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,F0(t,r,m,l,d)):(t=Wu(a.type,null,l,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!vf(t,d)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:nl,a(_,l)&&t.ref===r.ref)return Jr(t,r,d)}return r.flags|=1,t=Gr(m,l),t.ref=r.ref,t.return=r,r.child=t}function F0(t,r,a,l,d){if(t!==null){var m=t.memoizedProps;if(nl(m,l)&&t.ref===r.ref)if(Ct=!1,r.pendingProps=l=m,vf(t,d))(t.flags&131072)!==0&&(Ct=!0);else return r.lanes=t.lanes,Jr(t,r,d)}return cf(t,r,a,l,d)}function H0(t,r,a,l){var d=l.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=r.child=t.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~m}else l=0,r.child=null;return G0(t,r,m,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&nc(r,m!==null?m.cachePool:null),m!==null?Qg(r,m):Ph(),Kg(r);else return l=r.lanes=536870912,G0(t,r,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(nc(r,m.cachePool),Qg(r,m),Ws(),r.memoizedState=null):(t!==null&&nc(r,null),Ph(),Ws());return Kt(t,r,d,a),r.child}function vl(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function G0(t,r,a,l,d){var m=kh();return m=m===null?null:{parent:At._currentValue,pool:m},r.memoizedState={baseLanes:a,cachePool:m},t!==null&&nc(r,null),Ph(),Kg(r),t!==null&&Va(t,r,l,!0),r.childLanes=d,null}function yc(t,r){return r=xc({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function $0(t,r,a){return Ji(r,t.child,null,a),t=yc(r,r.pendingProps),t.flags|=2,jn(r),r.memoizedState=null,t}function ME(t,r,a){var l=r.pendingProps,d=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Pe){if(l.mode==="hidden")return t=yc(r,l),r.lanes=536870912,vl(null,t);if(Bh(r),(t=st)?(t=sy(t,Gn),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Hs!==null?{id:_r,overflow:xr}:null,retryLane:536870912,hydrationErrors:null},a=Cg(t),a.return=r,r.child=a,$t=r,st=null)):t=null,t===null)throw $s(r);return r.lanes=536870912,null}return yc(r,l)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(Bh(r),d)if(r.flags&256)r.flags&=-257,r=$0(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(Ct||Va(t,r,a,!1),d=(a&t.childLanes)!==0,Ct||d){if(l=tt,l!==null&&(_=Cs(l,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,Fi(t,_),wn(l,t,_),uf;Cc(),r=$0(t,r,a)}else t=m.treeContext,st=Qn(_.nextSibling),$t=r,Pe=!0,Gs=null,Gn=!1,t!==null&&Dg(r,t),r=yc(r,l),r.flags|=4096;return r}return t=Gr(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function _c(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function cf(t,r,a,l,d){return Qi(r),a=Fh(t,r,a,l,void 0,d),l=Hh(),t!==null&&!Ct?(Gh(t,r,d),Jr(t,r,d)):(Pe&&l&&Th(r),r.flags|=1,Kt(t,r,a,d),r.child)}function Q0(t,r,a,l,d,m){return Qi(r),r.updateQueue=null,a=Xg(r,l,a,d),Yg(t),l=Hh(),t!==null&&!Ct?(Gh(t,r,m),Jr(t,r,m)):(Pe&&l&&Th(r),r.flags|=1,Kt(t,r,a,m),r.child)}function K0(t,r,a,l,d){if(Qi(r),r.stateNode===null){var m=Da,_=a.contextType;typeof _=="object"&&_!==null&&(m=Qt(_)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=of,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},Mh(r),_=a.contextType,m.context=typeof _=="object"&&_!==null?Qt(_):Da,m.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(af(r,a,_,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&of.enqueueReplaceState(m,m.state,null),hl(r,l,m,d),dl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var E=r.memoizedProps,j=Zi(a,E);m.props=j;var G=m.context,W=a.contextType;_=Da,typeof W=="object"&&W!==null&&(_=Qt(W));var ne=a.getDerivedStateFromProps;W=typeof ne=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=r.pendingProps!==E,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||G!==_)&&O0(r,m,l,_),Ks=!1;var $=r.memoizedState;m.state=$,hl(r,l,m,d),dl(),G=r.memoizedState,E||$!==G||Ks?(typeof ne=="function"&&(af(r,a,ne,l),G=r.memoizedState),(j=Ks||k0(r,a,j,l,$,G,_))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=G),m.props=l,m.state=G,m.context=_,l=j):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,Vh(t,r),_=r.memoizedProps,W=Zi(a,_),m.props=W,ne=r.pendingProps,$=m.context,G=a.contextType,j=Da,typeof G=="object"&&G!==null&&(j=Qt(G)),E=a.getDerivedStateFromProps,(G=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ne||$!==j)&&O0(r,m,l,j),Ks=!1,$=r.memoizedState,m.state=$,hl(r,l,m,d),dl();var K=r.memoizedState;_!==ne||$!==K||Ks||t!==null&&t.dependencies!==null&&ec(t.dependencies)?(typeof E=="function"&&(af(r,a,E,l),K=r.memoizedState),(W=Ks||k0(r,a,W,l,$,K,j)||t!==null&&t.dependencies!==null&&ec(t.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,K,j),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,K,j)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=K),m.props=l,m.state=K,m.context=j,l=W):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,_c(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=Ji(r,t.child,null,d),r.child=Ji(r,null,a,d)):Kt(t,r,a,d),r.memoizedState=m.state,t=r.child):t=Jr(t,r,d),t}function Y0(t,r,a,l){return Gi(),r.flags|=256,Kt(t,r,a,l),r.child}var df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hf(t){return{baseLanes:t,cachePool:Ug()}}function ff(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=kn),t}function X0(t,r,a){var l=r.pendingProps,d=!1,m=(r.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(wt.current&2)!==0),_&&(d=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if(Pe){if(d?Js(r):Ws(),(t=st)?(t=sy(t,Gn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Hs!==null?{id:_r,overflow:xr}:null,retryLane:536870912,hydrationErrors:null},a=Cg(t),a.return=r,r.child=a,$t=r,st=null)):t=null,t===null)throw $s(r);return Yf(t)?r.lanes=32:r.lanes=536870912,null}var E=l.children;return l=l.fallback,d?(Ws(),d=r.mode,E=xc({mode:"hidden",children:E},d),l=Hi(l,d,a,null),E.return=r,l.return=r,E.sibling=l,r.child=E,l=r.child,l.memoizedState=hf(a),l.childLanes=ff(t,_,a),r.memoizedState=df,vl(null,l)):(Js(r),mf(r,E))}var j=t.memoizedState;if(j!==null&&(E=j.dehydrated,E!==null)){if(m)r.flags&256?(Js(r),r.flags&=-257,r=pf(t,r,a)):r.memoizedState!==null?(Ws(),r.child=t.child,r.flags|=128,r=null):(Ws(),E=l.fallback,d=r.mode,l=xc({mode:"visible",children:l.children},d),E=Hi(E,d,a,null),E.flags|=2,l.return=r,E.return=r,l.sibling=E,r.child=l,Ji(r,t.child,null,a),l=r.child,l.memoizedState=hf(a),l.childLanes=ff(t,_,a),r.memoizedState=df,r=vl(null,l));else if(Js(r),Yf(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var G=_.dgst;_=G,l=Error(i(419)),l.stack="",l.digest=_,il({value:l,source:null,stack:null}),r=pf(t,r,a)}else if(Ct||Va(t,r,a,!1),_=(a&t.childLanes)!==0,Ct||_){if(_=tt,_!==null&&(l=Cs(_,a),l!==0&&l!==j.retryLane))throw j.retryLane=l,Fi(t,l),wn(_,t,l),uf;Kf(E)||Cc(),r=pf(t,r,a)}else Kf(E)?(r.flags|=192,r.child=t.child,r=null):(t=j.treeContext,st=Qn(E.nextSibling),$t=r,Pe=!0,Gs=null,Gn=!1,t!==null&&Dg(r,t),r=mf(r,l.children),r.flags|=4096);return r}return d?(Ws(),E=l.fallback,d=r.mode,j=t.child,G=j.sibling,l=Gr(j,{mode:"hidden",children:l.children}),l.subtreeFlags=j.subtreeFlags&65011712,G!==null?E=Gr(G,E):(E=Hi(E,d,a,null),E.flags|=2),E.return=r,l.return=r,l.sibling=E,r.child=l,vl(null,l),l=r.child,E=t.child.memoizedState,E===null?E=hf(a):(d=E.cachePool,d!==null?(j=At._currentValue,d=d.parent!==j?{parent:j,pool:j}:d):d=Ug(),E={baseLanes:E.baseLanes|a,cachePool:d}),l.memoizedState=E,l.childLanes=ff(t,_,a),r.memoizedState=df,vl(t.child,l)):(Js(r),a=t.child,t=a.sibling,a=Gr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=a,r.memoizedState=null,a)}function mf(t,r){return r=xc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function xc(t,r){return t=Cn(22,t,null,r),t.lanes=0,t}function pf(t,r,a){return Ji(r,t.child,null,a),t=mf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function J0(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Ch(t.return,r,a)}function gf(t,r,a,l,d,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:m}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=d,_.treeForkCount=m)}function W0(t,r,a){var l=r.pendingProps,d=l.revealOrder,m=l.tail;l=l.children;var _=wt.current,E=(_&2)!==0;if(E?(_=_&1|2,r.flags|=128):_&=1,se(wt,_),Kt(t,r,l,a),l=Pe?sl:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&J0(t,a,r);else if(t.tag===19)J0(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(a=r.child,d=null;a!==null;)t=a.alternate,t!==null&&lc(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),gf(r,!1,d,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&lc(t)===null){r.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}gf(r,!0,a,null,m,l);break;case"together":gf(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Jr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),ti|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(Va(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,a=Gr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Gr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function vf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&ec(t)))}function VE(t,r,a){switch(r.tag){case 3:St(r,r.stateNode.containerInfo),Qs(r,At,t.memoizedState.cache),Gi();break;case 27:case 5:Tn(r);break;case 4:St(r,r.stateNode.containerInfo);break;case 10:Qs(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Bh(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Js(r),r.flags|=128,null):(a&r.child.childLanes)!==0?X0(t,r,a):(Js(r),t=Jr(t,r,a),t!==null?t.sibling:null);Js(r);break;case 19:var d=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(Va(t,r,a,!1),l=(a&r.childLanes)!==0),d){if(l)return W0(t,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),se(wt,wt.current),l)break;return null;case 22:return r.lanes=0,H0(t,r,a,r.pendingProps);case 24:Qs(r,At,t.memoizedState.cache)}return Jr(t,r,a)}function Z0(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ct=!0;else{if(!vf(t,a)&&(r.flags&128)===0)return Ct=!1,VE(t,r,a);Ct=(t.flags&131072)!==0}else Ct=!1,Pe&&(r.flags&1048576)!==0&&jg(r,sl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=Yi(r.elementType),r.type=t,typeof t=="function")bh(t)?(l=Zi(t,l),r.tag=1,r=K0(null,r,t,l,a)):(r.tag=0,r=cf(null,r,t,l,a));else{if(t!=null){var d=t.$$typeof;if(d===ue){r.tag=11,r=B0(null,r,t,l,a);break e}else if(d===I){r.tag=14,r=q0(null,r,t,l,a);break e}}throw r=nt(t)||t,Error(i(306,r,""))}}return r;case 0:return cf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,d=Zi(l,r.pendingProps),K0(t,r,l,d,a);case 3:e:{if(St(r,r.stateNode.containerInfo),t===null)throw Error(i(387));l=r.pendingProps;var m=r.memoizedState;d=m.element,Vh(t,r),hl(r,l,null,a);var _=r.memoizedState;if(l=_.cache,Qs(r,At,l),l!==m.cache&&Ih(r,[At],a,!0),dl(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Y0(t,r,l,a);break e}else if(l!==d){d=qn(Error(i(424)),r),il(d),r=Y0(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(st=Qn(t.firstChild),$t=r,Pe=!0,Gs=null,Gn=!0,a=Hg(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Gi(),l===d){r=Jr(t,r,a);break e}Kt(t,r,l,a)}r=r.child}return r;case 26:return _c(t,r),t===null?(a=cy(r.type,null,r.pendingProps,null))?r.memoizedState=a:Pe||(a=r.type,t=r.pendingProps,l=Vc(Ae.current).createElement(a),l[mt]=r,l[Gt]=t,Yt(l,a,t),bt(l),r.stateNode=l):r.memoizedState=cy(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Tn(r),t===null&&Pe&&(l=r.stateNode=oy(r.type,r.pendingProps,Ae.current),$t=r,Gn=!0,d=st,ai(r.type)?(Xf=d,st=Qn(l.firstChild)):st=d),Kt(t,r,r.pendingProps.children,a),_c(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Pe&&((d=l=st)&&(l=h1(l,r.type,r.pendingProps,Gn),l!==null?(r.stateNode=l,$t=r,st=Qn(l.firstChild),Gn=!1,d=!0):d=!1),d||$s(r)),Tn(r),d=r.type,m=r.pendingProps,_=t!==null?t.memoizedProps:null,l=m.children,Gf(d,m)?l=null:_!==null&&Gf(d,_)&&(r.flags|=32),r.memoizedState!==null&&(d=Fh(t,r,AE,null,null,a),Dl._currentValue=d),_c(t,r),Kt(t,r,l,a),r.child;case 6:return t===null&&Pe&&((t=a=st)&&(a=f1(a,r.pendingProps,Gn),a!==null?(r.stateNode=a,$t=r,st=null,t=!0):t=!1),t||$s(r)),null;case 13:return X0(t,r,a);case 4:return St(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Ji(r,null,l,a):Kt(t,r,l,a),r.child;case 11:return B0(t,r,r.type,r.pendingProps,a);case 7:return Kt(t,r,r.pendingProps,a),r.child;case 8:return Kt(t,r,r.pendingProps.children,a),r.child;case 12:return Kt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Qs(r,r.type,l.value),Kt(t,r,l.children,a),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,Qi(r),d=Qt(d),l=l(d),r.flags|=1,Kt(t,r,l,a),r.child;case 14:return q0(t,r,r.type,r.pendingProps,a);case 15:return F0(t,r,r.type,r.pendingProps,a);case 19:return W0(t,r,a);case 31:return ME(t,r,a);case 22:return H0(t,r,a,r.pendingProps);case 24:return Qi(r),l=Qt(At),t===null?(d=kh(),d===null&&(d=tt,m=jh(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),r.memoizedState={parent:l,cache:d},Mh(r),Qs(r,At,d)):((t.lanes&a)!==0&&(Vh(t,r),hl(r,null,null,a),dl()),d=t.memoizedState,m=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Qs(r,At,l)):(l=m.cache,Qs(r,At,l),l!==d.cache&&Ih(r,[At],a,!0))),Kt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Wr(t){t.flags|=4}function yf(t,r,a,l,d){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(Nv())t.flags|=8192;else throw Xi=sc,Oh}else t.flags&=-16777217}function ev(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!py(r))if(Nv())t.flags|=8192;else throw Xi=sc,Oh}function bc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Uo():536870912,t.lanes|=r,Ka|=r)}function yl(t,r){if(!Pe)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function it(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function LE(t,r,a){var l=r.pendingProps;switch(Sh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(r),null;case 1:return it(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Kr(At),ot(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ma(r)?Wr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ah())),it(r),null;case 26:var d=r.type,m=r.memoizedState;return t===null?(Wr(r),m!==null?(it(r),ev(r,m)):(it(r),yf(r,d,null,l,a))):m?m!==t.memoizedState?(Wr(r),it(r),ev(r,m)):(it(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Wr(r),it(r),yf(r,d,t,l,a)),null;case 27:if(Jn(r),a=Ae.current,d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Wr(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return it(r),null}t=de.current,Ma(r)?kg(r):(t=oy(d,l,a),r.stateNode=t,Wr(r))}return it(r),null;case 5:if(Jn(r),d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Wr(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return it(r),null}if(m=de.current,Ma(r))kg(r);else{var _=Vc(Ae.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(d,{is:l.is}):_.createElement(d)}}m[mt]=r,m[Gt]=l;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=m;e:switch(Yt(m,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Wr(r)}}return it(r),yf(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Wr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(t=Ae.current,Ma(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,d=$t,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[mt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Xv(t.nodeValue,a)),t||$s(r,!0)}else t=Vc(t).createTextNode(l),t[mt]=r,r.stateNode=t}return it(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=Ma(r),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[mt]=r}else Gi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;it(r),t=!1}else a=Ah(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(jn(r),r):(jn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return it(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Ma(r),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(i(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[mt]=r}else Gi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;it(r),d=!1}else d=Ah(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(jn(r),r):(jn(r),null)}return jn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),bc(r,r.updateQueue),it(r),null);case 4:return ot(),t===null&&zf(r.stateNode.containerInfo),it(r),null;case 10:return Kr(r.type),it(r),null;case 19:if(Q(wt),l=r.memoizedState,l===null)return it(r),null;if(d=(r.flags&128)!==0,m=l.rendering,m===null)if(d)yl(l,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=lc(t),m!==null){for(r.flags|=128,yl(l,!1),t=m.updateQueue,r.updateQueue=t,bc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Rg(a,t),a=a.sibling;return se(wt,wt.current&1|2),Pe&&$r(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&yt()>Nc&&(r.flags|=128,d=!0,yl(l,!1),r.lanes=4194304)}else{if(!d)if(t=lc(m),t!==null){if(r.flags|=128,d=!0,t=t.updateQueue,r.updateQueue=t,bc(r,t),yl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Pe)return it(r),null}else 2*yt()-l.renderingStartTime>Nc&&a!==536870912&&(r.flags|=128,d=!0,yl(l,!1),r.lanes=4194304);l.isBackwards?(m.sibling=r.child,r.child=m):(t=l.last,t!==null?t.sibling=m:r.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=yt(),t.sibling=null,a=wt.current,se(wt,d?a&1|2:a&1),Pe&&$r(r,l.treeForkCount),t):(it(r),null);case 22:case 23:return jn(r),zh(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(it(r),r.subtreeFlags&6&&(r.flags|=8192)):it(r),a=r.updateQueue,a!==null&&bc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&Q(Ki),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Kr(At),it(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function UE(t,r){switch(Sh(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Kr(At),ot(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Jn(r),null;case 31:if(r.memoizedState!==null){if(jn(r),r.alternate===null)throw Error(i(340));Gi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(jn(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Gi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Q(wt),null;case 4:return ot(),null;case 10:return Kr(r.type),null;case 22:case 23:return jn(r),zh(),t!==null&&Q(Ki),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Kr(At),null;case 25:return null;default:return null}}function tv(t,r){switch(Sh(r),r.tag){case 3:Kr(At),ot();break;case 26:case 27:case 5:Jn(r);break;case 4:ot();break;case 31:r.memoizedState!==null&&jn(r);break;case 13:jn(r);break;case 19:Q(wt);break;case 10:Kr(r.type);break;case 22:case 23:jn(r),zh(),t!==null&&Q(Ki);break;case 24:Kr(At)}}function _l(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var m=a.create,_=a.inst;l=m(),_.destroy=l}a=a.next}while(a!==d)}}catch(E){Xe(r,r.return,E)}}function Zs(t,r,a){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&t)===t){var _=l.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,d=r;var j=a,G=E;try{G()}catch(W){Xe(d,j,W)}}}l=l.next}while(l!==m)}}catch(W){Xe(r,r.return,W)}}function nv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{$g(r,a)}catch(l){Xe(t,t.return,l)}}}function rv(t,r,a){a.props=Zi(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Xe(t,r,l)}}function xl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){Xe(t,r,d)}}function br(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){Xe(t,r,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Xe(t,r,d)}else a.current=null}function sv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){Xe(t,t.return,d)}}function _f(t,r,a){try{var l=t.stateNode;a1(l,t.type,a,r),l[Gt]=r}catch(d){Xe(t,t.return,d)}}function iv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ai(t.type)||t.tag===4}function xf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ai(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Ut));else if(l!==4&&(l===27&&ai(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(bf(t,r,a),t=t.sibling;t!==null;)bf(t,r,a),t=t.sibling}function wc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&ai(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(wc(t,r,a),t=t.sibling;t!==null;)wc(t,r,a),t=t.sibling}function av(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);Yt(r,l,a),r[mt]=t,r[Gt]=a}catch(m){Xe(t,t.return,m)}}var Zr=!1,It=!1,wf=!1,ov=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function PE(t,r){if(t=t.containerInfo,Ff=Fc,t=_g(t),mh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,E=-1,j=-1,G=0,W=0,ne=t,$=null;t:for(;;){for(var K;ne!==a||d!==0&&ne.nodeType!==3||(E=_+d),ne!==m||l!==0&&ne.nodeType!==3||(j=_+l),ne.nodeType===3&&(_+=ne.nodeValue.length),(K=ne.firstChild)!==null;)$=ne,ne=K;for(;;){if(ne===t)break t;if($===a&&++G===d&&(E=_),$===m&&++W===l&&(j=_),(K=ne.nextSibling)!==null)break;ne=$,$=ne.parentNode}ne=K}a=E===-1||j===-1?null:{start:E,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hf={focusedElem:t,selectionRange:a},Fc=!1,Bt=r;Bt!==null;)if(r=Bt,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Bt=t;else for(;Bt!==null;){switch(r=Bt,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)d=t[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,d=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var he=Zi(a.type,d);t=l.getSnapshotBeforeUpdate(he,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(xe){Xe(a,a.return,xe)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Qf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Qf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,Bt=t;break}Bt=r.return}}function lv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ts(t,a),l&4&&_l(5,a);break;case 1:if(ts(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(_){Xe(a,a.return,_)}else{var d=Zi(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(d,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Xe(a,a.return,_)}}l&64&&nv(a),l&512&&xl(a,a.return);break;case 3:if(ts(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{$g(t,r)}catch(_){Xe(a,a.return,_)}}break;case 27:r===null&&l&4&&av(a);case 26:case 5:ts(t,a),r===null&&l&4&&sv(a),l&512&&xl(a,a.return);break;case 12:ts(t,a);break;case 31:ts(t,a),l&4&&dv(t,a);break;case 13:ts(t,a),l&4&&hv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=KE.bind(null,a),m1(t,a))));break;case 22:if(l=a.memoizedState!==null||Zr,!l){r=r!==null&&r.memoizedState!==null||It,d=Zr;var m=It;Zr=l,(It=r)&&!m?ns(t,a,(a.subtreeFlags&8772)!==0):ts(t,a),Zr=d,It=m}break;case 30:break;default:ts(t,a)}}function uv(t){var r=t.alternate;r!==null&&(t.alternate=null,uv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&ji(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var lt=null,yn=!1;function es(t,r,a){for(a=a.child;a!==null;)cv(t,r,a),a=a.sibling}function cv(t,r,a){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(Ln,a)}catch{}switch(a.tag){case 26:It||br(a,r),es(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:It||br(a,r);var l=lt,d=yn;ai(a.type)&&(lt=a.stateNode,yn=!1),es(t,r,a),Cl(a.stateNode),lt=l,yn=d;break;case 5:It||br(a,r);case 6:if(l=lt,d=yn,lt=null,es(t,r,a),lt=l,yn=d,lt!==null)if(yn)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(m){Xe(a,r,m)}else try{lt.removeChild(a.stateNode)}catch(m){Xe(a,r,m)}break;case 18:lt!==null&&(yn?(t=lt,ny(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),no(t)):ny(lt,a.stateNode));break;case 4:l=lt,d=yn,lt=a.stateNode.containerInfo,yn=!0,es(t,r,a),lt=l,yn=d;break;case 0:case 11:case 14:case 15:Zs(2,a,r),It||Zs(4,a,r),es(t,r,a);break;case 1:It||(br(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&rv(a,r,l)),es(t,r,a);break;case 21:es(t,r,a);break;case 22:It=(l=It)||a.memoizedState!==null,es(t,r,a),It=l;break;default:es(t,r,a)}}function dv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{no(t)}catch(a){Xe(r,r.return,a)}}}function hv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{no(t)}catch(a){Xe(r,r.return,a)}}function zE(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new ov),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new ov),r;default:throw Error(i(435,t.tag))}}function Ec(t,r){var a=zE(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var d=YE.bind(null,t,l);l.then(d,d)}})}function _n(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],m=t,_=r,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(ai(E.type)){lt=E.stateNode,yn=!1;break e}break;case 5:lt=E.stateNode,yn=!1;break e;case 3:case 4:lt=E.stateNode.containerInfo,yn=!0;break e}E=E.return}if(lt===null)throw Error(i(160));cv(m,_,d),lt=null,yn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)fv(r,t),r=r.sibling}var rr=null;function fv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_n(r,t),xn(t),l&4&&(Zs(3,t,t.return),_l(3,t),Zs(5,t,t.return));break;case 1:_n(r,t),xn(t),l&512&&(It||a===null||br(a,a.return)),l&64&&Zr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=rr;if(_n(r,t),xn(t),l&512&&(It||a===null||br(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":m=d.getElementsByTagName("title")[0],(!m||m[Lr]||m[mt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(l),d.head.insertBefore(m,d.querySelector("head > title"))),Yt(m,l,a),m[mt]=t,bt(m),l=m;break e;case"link":var _=fy("link","href",d).get(l+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(m=_[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break t}}m=d.createElement(l),Yt(m,l,a),d.head.appendChild(m);break;case"meta":if(_=fy("meta","content",d).get(l+(a.content||""))){for(E=0;E<_.length;E++)if(m=_[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break t}}m=d.createElement(l),Yt(m,l,a),d.head.appendChild(m);break;default:throw Error(i(468,l))}m[mt]=t,bt(m),l=m}t.stateNode=l}else my(d,t.type,t.stateNode);else t.stateNode=hy(d,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?my(d,t.type,t.stateNode):hy(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&_f(t,t.memoizedProps,a.memoizedProps)}break;case 27:_n(r,t),xn(t),l&512&&(It||a===null||br(a,a.return)),a!==null&&l&4&&_f(t,t.memoizedProps,a.memoizedProps);break;case 5:if(_n(r,t),xn(t),l&512&&(It||a===null||br(a,a.return)),t.flags&32){d=t.stateNode;try{zn(d,"")}catch(he){Xe(t,t.return,he)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,_f(t,d,a!==null?a.memoizedProps:d)),l&1024&&(wf=!0);break;case 6:if(_n(r,t),xn(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(he){Xe(t,t.return,he)}}break;case 3:if(Pc=null,d=rr,rr=Lc(r.containerInfo),_n(r,t),rr=d,xn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{no(r.containerInfo)}catch(he){Xe(t,t.return,he)}wf&&(wf=!1,mv(t));break;case 4:l=rr,rr=Lc(t.stateNode.containerInfo),_n(r,t),xn(t),rr=l;break;case 12:_n(r,t),xn(t);break;case 31:_n(r,t),xn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ec(t,l)));break;case 13:_n(r,t),xn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Sc=yt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ec(t,l)));break;case 22:d=t.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,G=Zr,W=It;if(Zr=G||d,It=W||j,_n(r,t),It=W,Zr=G,xn(t),l&8192)e:for(r=t.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||j||Zr||It||ea(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){j=a=r;try{if(m=j.stateNode,d)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=j.stateNode;var ne=j.memoizedProps.style,$=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;E.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(he){Xe(j,j.return,he)}}}else if(r.tag===6){if(a===null){j=r;try{j.stateNode.nodeValue=d?"":j.memoizedProps}catch(he){Xe(j,j.return,he)}}}else if(r.tag===18){if(a===null){j=r;try{var K=j.stateNode;d?ry(K,!0):ry(j.stateNode,!1)}catch(he){Xe(j,j.return,he)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ec(t,a))));break;case 19:_n(r,t),xn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ec(t,l)));break;case 30:break;case 21:break;default:_n(r,t),xn(t)}}function xn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(iv(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,m=xf(t);wc(t,m,d);break;case 5:var _=a.stateNode;a.flags&32&&(zn(_,""),a.flags&=-33);var E=xf(t);wc(t,E,_);break;case 3:case 4:var j=a.stateNode.containerInfo,G=xf(t);bf(t,G,j);break;default:throw Error(i(161))}}catch(W){Xe(t,t.return,W)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function mv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;mv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function ts(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)lv(t,r.alternate,r),r=r.sibling}function ea(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Zs(4,r,r.return),ea(r);break;case 1:br(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&rv(r,r.return,a),ea(r);break;case 27:Cl(r.stateNode);case 26:case 5:br(r,r.return),ea(r);break;case 22:r.memoizedState===null&&ea(r);break;case 30:ea(r);break;default:ea(r)}t=t.sibling}}function ns(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=t,m=r,_=m.flags;switch(m.tag){case 0:case 11:case 15:ns(d,m,a),_l(4,m);break;case 1:if(ns(d,m,a),l=m,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(G){Xe(l,l.return,G)}if(l=m,d=l.updateQueue,d!==null){var E=l.stateNode;try{var j=d.shared.hiddenCallbacks;if(j!==null)for(d.shared.hiddenCallbacks=null,d=0;d<j.length;d++)Gg(j[d],E)}catch(G){Xe(l,l.return,G)}}a&&_&64&&nv(m),xl(m,m.return);break;case 27:av(m);case 26:case 5:ns(d,m,a),a&&l===null&&_&4&&sv(m),xl(m,m.return);break;case 12:ns(d,m,a);break;case 31:ns(d,m,a),a&&_&4&&dv(d,m);break;case 13:ns(d,m,a),a&&_&4&&hv(d,m);break;case 22:m.memoizedState===null&&ns(d,m,a),xl(m,m.return);break;case 30:break;default:ns(d,m,a)}r=r.sibling}}function Ef(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&al(a))}function Tf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&al(t))}function sr(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)pv(t,r,a,l),r=r.sibling}function pv(t,r,a,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:sr(t,r,a,l),d&2048&&_l(9,r);break;case 1:sr(t,r,a,l);break;case 3:sr(t,r,a,l),d&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&al(t)));break;case 12:if(d&2048){sr(t,r,a,l),t=r.stateNode;try{var m=r.memoizedProps,_=m.id,E=m.onPostCommit;typeof E=="function"&&E(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(j){Xe(r,r.return,j)}}else sr(t,r,a,l);break;case 31:sr(t,r,a,l);break;case 13:sr(t,r,a,l);break;case 23:break;case 22:m=r.stateNode,_=r.alternate,r.memoizedState!==null?m._visibility&2?sr(t,r,a,l):bl(t,r):m._visibility&2?sr(t,r,a,l):(m._visibility|=2,Ga(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),d&2048&&Ef(_,r);break;case 24:sr(t,r,a,l),d&2048&&Tf(r.alternate,r);break;default:sr(t,r,a,l)}}function Ga(t,r,a,l,d){for(d=d&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,_=r,E=a,j=l,G=_.flags;switch(_.tag){case 0:case 11:case 15:Ga(m,_,E,j,d),_l(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?Ga(m,_,E,j,d):bl(m,_):(W._visibility|=2,Ga(m,_,E,j,d)),d&&G&2048&&Ef(_.alternate,_);break;case 24:Ga(m,_,E,j,d),d&&G&2048&&Tf(_.alternate,_);break;default:Ga(m,_,E,j,d)}r=r.sibling}}function bl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,d=l.flags;switch(l.tag){case 22:bl(a,l),d&2048&&Ef(l.alternate,l);break;case 24:bl(a,l),d&2048&&Tf(l.alternate,l);break;default:bl(a,l)}r=r.sibling}}var wl=8192;function $a(t,r,a){if(t.subtreeFlags&wl)for(t=t.child;t!==null;)gv(t,r,a),t=t.sibling}function gv(t,r,a){switch(t.tag){case 26:$a(t,r,a),t.flags&wl&&t.memoizedState!==null&&N1(a,rr,t.memoizedState,t.memoizedProps);break;case 5:$a(t,r,a);break;case 3:case 4:var l=rr;rr=Lc(t.stateNode.containerInfo),$a(t,r,a),rr=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=wl,wl=16777216,$a(t,r,a),wl=l):$a(t,r,a));break;default:$a(t,r,a)}}function vv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function El(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Bt=l,_v(l,t)}vv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)yv(t),t=t.sibling}function yv(t){switch(t.tag){case 0:case 11:case 15:El(t),t.flags&2048&&Zs(9,t,t.return);break;case 3:El(t);break;case 12:El(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Tc(t)):El(t);break;default:El(t)}}function Tc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Bt=l,_v(l,t)}vv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Zs(8,r,r.return),Tc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Tc(r));break;default:Tc(r)}t=t.sibling}}function _v(t,r){for(;Bt!==null;){var a=Bt;switch(a.tag){case 0:case 11:case 15:Zs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:al(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Bt=l;else e:for(a=t;Bt!==null;){l=Bt;var d=l.sibling,m=l.return;if(uv(l),l===a){Bt=null;break e}if(d!==null){d.return=m,Bt=d;break e}Bt=m}}}var BE={getCacheForType:function(t){var r=Qt(At),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Qt(At).controller.signal}},qE=typeof WeakMap=="function"?WeakMap:Map,Qe=0,tt=null,De=null,Ve=0,Ye=0,Dn=null,ei=!1,Qa=!1,Sf=!1,rs=0,vt=0,ti=0,ta=0,Nf=0,kn=0,Ka=0,Tl=null,bn=null,Af=!1,Sc=0,xv=0,Nc=1/0,Ac=null,ni=null,Mt=0,ri=null,Ya=null,ss=0,Rf=0,Cf=null,bv=null,Sl=0,If=null;function On(){return(Qe&2)!==0&&Ve!==0?Ve&-Ve:q.T!==null?Vf():Vr()}function wv(){if(kn===0)if((Ve&536870912)===0||Pe){var t=Ot;Ot<<=1,(Ot&3932160)===0&&(Ot=262144),kn=t}else kn=536870912;return t=In.current,t!==null&&(t.flags|=32),kn}function wn(t,r,a){(t===tt&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)&&(Xa(t,0),si(t,Ve,kn,!1)),As(t,a),((Qe&2)===0||t!==tt)&&(t===tt&&((Qe&2)===0&&(ta|=a),vt===4&&si(t,Ve,kn,!1)),wr(t))}function Ev(t,r,a){if((Qe&6)!==0)throw Error(i(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||Ns(t,r),d=l?GE(t,r):Df(t,r,!0),m=l;do{if(d===0){Qa&&!l&&si(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!FE(a)){d=Df(t,r,!1),m=!1;continue}if(d===2){if(m=r,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var E=t;d=Tl;var j=E.current.memoizedState.isDehydrated;if(j&&(Xa(E,_).flags|=256),_=Df(E,_,!1),_!==2){if(Sf&&!j){E.errorRecoveryDisabledLanes|=m,ta|=m,d=4;break e}m=bn,bn=d,m!==null&&(bn===null?bn=m:bn.push.apply(bn,m))}d=_}if(m=!1,d!==2)continue}}if(d===1){Xa(t,0),si(t,r,0,!0);break}e:{switch(l=t,m=d,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:si(l,r,kn,!ei);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(d=Sc+300-yt(),10<d)){if(si(l,r,kn,!ei),Un(l,0,!0)!==0)break e;ss=r,l.timeoutHandle=ey(Tv.bind(null,l,a,bn,Ac,Af,r,kn,ta,Ka,ei,m,"Throttled",-0,0),d);break e}Tv(l,a,bn,Ac,Af,r,kn,ta,Ka,ei,m,null,-0,0)}}break}while(!0);wr(t)}function Tv(t,r,a,l,d,m,_,E,j,G,W,ne,$,K){if(t.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ut},gv(r,m,ne);var he=(m&62914560)===m?Sc-yt():(m&4194048)===m?xv-yt():0;if(he=A1(ne,he),he!==null){ss=m,t.cancelPendingCommit=he(Dv.bind(null,t,r,m,a,l,d,_,E,j,W,ne,null,$,K)),si(t,m,_,!G);return}}Dv(t,r,m,a,l,d,_,E,j)}function FE(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],m=d.getSnapshot;d=d.value;try{if(!Rn(m(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function si(t,r,a,l){r&=~Nf,r&=~ta,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var d=r;0<d;){var m=31-Ft(d),_=1<<m;l[m]=-1,d&=~_}a!==0&&Po(t,a,r)}function Rc(){return(Qe&6)===0?(Nl(0),!1):!0}function jf(){if(De!==null){if(Ye===0)var t=De.return;else t=De,Qr=$i=null,$h(t),za=null,ll=0,t=De;for(;t!==null;)tv(t.alternate,t),t=t.return;De=null}}function Xa(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,u1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ss=0,jf(),tt=t,De=a=Gr(t.current,null),Ve=r,Ye=0,Dn=null,ei=!1,Qa=Ns(t,r),Sf=!1,Ka=kn=Nf=ta=ti=vt=0,bn=Tl=null,Af=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var d=31-Ft(l),m=1<<d;r|=t[d],l&=~m}return rs=r,Yu(),a}function Sv(t,r){Re=null,q.H=gl,r===Pa||r===rc?(r=Bg(),Ye=3):r===Oh?(r=Bg(),Ye=4):Ye=r===uf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Dn=r,De===null&&(vt=1,vc(t,qn(r,t.current)))}function Nv(){var t=In.current;return t===null?!0:(Ve&4194048)===Ve?$n===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?t===$n:!1}function Av(){var t=q.H;return q.H=gl,t===null?gl:t}function Rv(){var t=q.A;return q.A=BE,t}function Cc(){vt=4,ei||(Ve&4194048)!==Ve&&In.current!==null||(Qa=!0),(ti&134217727)===0&&(ta&134217727)===0||tt===null||si(tt,Ve,kn,!1)}function Df(t,r,a){var l=Qe;Qe|=2;var d=Av(),m=Rv();(tt!==t||Ve!==r)&&(Ac=null,Xa(t,r)),r=!1;var _=vt;e:do try{if(Ye!==0&&De!==null){var E=De,j=Dn;switch(Ye){case 8:jf(),_=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(r=!0);var G=Ye;if(Ye=0,Dn=null,Ja(t,E,j,G),a&&Qa){_=0;break e}break;default:G=Ye,Ye=0,Dn=null,Ja(t,E,j,G)}}HE(),_=vt;break}catch(W){Sv(t,W)}while(!0);return r&&t.shellSuspendCounter++,Qr=$i=null,Qe=l,q.H=d,q.A=m,De===null&&(tt=null,Ve=0,Yu()),_}function HE(){for(;De!==null;)Cv(De)}function GE(t,r){var a=Qe;Qe|=2;var l=Av(),d=Rv();tt!==t||Ve!==r?(Ac=null,Nc=yt()+500,Xa(t,r)):Qa=Ns(t,r);e:do try{if(Ye!==0&&De!==null){r=De;var m=Dn;t:switch(Ye){case 1:Ye=0,Dn=null,Ja(t,r,m,1);break;case 2:case 9:if(Pg(m)){Ye=0,Dn=null,Iv(r);break}r=function(){Ye!==2&&Ye!==9||tt!==t||(Ye=7),wr(t)},m.then(r,r);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:Pg(m)?(Ye=0,Dn=null,Iv(r)):(Ye=0,Dn=null,Ja(t,r,m,7));break;case 5:var _=null;switch(De.tag){case 26:_=De.memoizedState;case 5:case 27:var E=De;if(_?py(_):E.stateNode.complete){Ye=0,Dn=null;var j=E.sibling;if(j!==null)De=j;else{var G=E.return;G!==null?(De=G,Ic(G)):De=null}break t}}Ye=0,Dn=null,Ja(t,r,m,5);break;case 6:Ye=0,Dn=null,Ja(t,r,m,6);break;case 8:jf(),vt=6;break e;default:throw Error(i(462))}}$E();break}catch(W){Sv(t,W)}while(!0);return Qr=$i=null,q.H=l,q.A=d,Qe=a,De!==null?0:(tt=null,Ve=0,Yu(),vt)}function $E(){for(;De!==null&&!Vo();)Cv(De)}function Cv(t){var r=Z0(t.alternate,t,rs);t.memoizedProps=t.pendingProps,r===null?Ic(t):De=r}function Iv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Q0(a,r,r.pendingProps,r.type,void 0,Ve);break;case 11:r=Q0(a,r,r.pendingProps,r.type.render,r.ref,Ve);break;case 5:$h(r);default:tv(a,r),r=De=Rg(r,rs),r=Z0(a,r,rs)}t.memoizedProps=t.pendingProps,r===null?Ic(t):De=r}function Ja(t,r,a,l){Qr=$i=null,$h(r),za=null,ll=0;var d=r.return;try{if(OE(t,d,r,a,Ve)){vt=1,vc(t,qn(a,t.current)),De=null;return}}catch(m){if(d!==null)throw De=d,m;vt=1,vc(t,qn(a,t.current)),De=null;return}r.flags&32768?(Pe||l===1?t=!0:Qa||(Ve&536870912)!==0?t=!1:(ei=t=!0,(l===2||l===9||l===3||l===6)&&(l=In.current,l!==null&&l.tag===13&&(l.flags|=16384))),jv(r,t)):Ic(r)}function Ic(t){var r=t;do{if((r.flags&32768)!==0){jv(r,ei);return}t=r.return;var a=LE(r.alternate,r,rs);if(a!==null){De=a;return}if(r=r.sibling,r!==null){De=r;return}De=r=t}while(r!==null);vt===0&&(vt=5)}function jv(t,r){do{var a=UE(t.alternate,t);if(a!==null){a.flags&=32767,De=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){De=t;return}De=t=a}while(t!==null);vt=6,De=null}function Dv(t,r,a,l,d,m,_,E,j){t.cancelPendingCommit=null;do jc();while(Mt!==0);if((Qe&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=_h,Ht(t,a,m,_,E,j),t===tt&&(De=tt=null,Ve=0),Ya=r,ri=t,ss=a,Rf=m,Cf=d,bv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,XE(Wn,function(){return Lv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=q.T,q.T=null,d=ee.p,ee.p=2,_=Qe,Qe|=4;try{PE(t,r,a)}finally{Qe=_,ee.p=d,q.T=l}}Mt=1,kv(),Ov(),Mv()}}function kv(){if(Mt===1){Mt=0;var t=ri,r=Ya,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=q.T,q.T=null;var l=ee.p;ee.p=2;var d=Qe;Qe|=4;try{fv(r,t);var m=Hf,_=_g(t.containerInfo),E=m.focusedElem,j=m.selectionRange;if(_!==E&&E&&E.ownerDocument&&yg(E.ownerDocument.documentElement,E)){if(j!==null&&mh(E)){var G=j.start,W=j.end;if(W===void 0&&(W=G),"selectionStart"in E)E.selectionStart=G,E.selectionEnd=Math.min(W,E.value.length);else{var ne=E.ownerDocument||document,$=ne&&ne.defaultView||window;if($.getSelection){var K=$.getSelection(),he=E.textContent.length,xe=Math.min(j.start,he),et=j.end===void 0?xe:Math.min(j.end,he);!K.extend&&xe>et&&(_=et,et=xe,xe=_);var B=vg(E,xe),U=vg(E,et);if(B&&U&&(K.rangeCount!==1||K.anchorNode!==B.node||K.anchorOffset!==B.offset||K.focusNode!==U.node||K.focusOffset!==U.offset)){var H=ne.createRange();H.setStart(B.node,B.offset),K.removeAllRanges(),xe>et?(K.addRange(H),K.extend(U.node,U.offset)):(H.setEnd(U.node,U.offset),K.addRange(H))}}}}for(ne=[],K=E;K=K.parentNode;)K.nodeType===1&&ne.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ne.length;E++){var te=ne[E];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Fc=!!Ff,Hf=Ff=null}finally{Qe=d,ee.p=l,q.T=a}}t.current=r,Mt=2}}function Ov(){if(Mt===2){Mt=0;var t=ri,r=Ya,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=q.T,q.T=null;var l=ee.p;ee.p=2;var d=Qe;Qe|=4;try{lv(t,r.alternate,r)}finally{Qe=d,ee.p=l,q.T=a}}Mt=3}}function Mv(){if(Mt===4||Mt===3){Mt=0,Ci();var t=ri,r=Ya,a=ss,l=bv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Mt=5:(Mt=0,Ya=ri=null,Vv(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(ni=null),Bo(a),r=r.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(Ln,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=q.T,d=ee.p,ee.p=2,q.T=null;try{for(var m=t.onRecoverableError,_=0;_<l.length;_++){var E=l[_];m(E.value,{componentStack:E.stack})}}finally{q.T=r,ee.p=d}}(ss&3)!==0&&jc(),wr(t),d=t.pendingLanes,(a&261930)!==0&&(d&42)!==0?t===If?Sl++:(Sl=0,If=t):Sl=0,Nl(0)}}function Vv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,al(r)))}function jc(){return kv(),Ov(),Mv(),Lv()}function Lv(){if(Mt!==5)return!1;var t=ri,r=Rf;Rf=0;var a=Bo(ss),l=q.T,d=ee.p;try{ee.p=32>a?32:a,q.T=null,a=Cf,Cf=null;var m=ri,_=ss;if(Mt=0,Ya=ri=null,ss=0,(Qe&6)!==0)throw Error(i(331));var E=Qe;if(Qe|=4,yv(m.current),pv(m,m.current,_,a),Qe=E,Nl(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(Ln,m)}catch{}return!0}finally{ee.p=d,q.T=l,Vv(t,r)}}function Uv(t,r,a){r=qn(a,r),r=lf(t.stateNode,r,2),t=Xs(t,r,2),t!==null&&(As(t,2),wr(t))}function Xe(t,r,a){if(t.tag===3)Uv(t,t,a);else for(;r!==null;){if(r.tag===3){Uv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ni===null||!ni.has(l))){t=qn(a,t),a=P0(2),l=Xs(r,a,2),l!==null&&(z0(a,l,r,t),As(l,2),wr(l));break}}r=r.return}}function kf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new qE;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(Sf=!0,d.add(a),t=QE.bind(null,t,r,a),r.then(t,t))}function QE(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,tt===t&&(Ve&a)===a&&(vt===4||vt===3&&(Ve&62914560)===Ve&&300>yt()-Sc?(Qe&2)===0&&Xa(t,0):Nf|=a,Ka===Ve&&(Ka=0)),wr(t)}function Pv(t,r){r===0&&(r=Uo()),t=Fi(t,r),t!==null&&(As(t,r),wr(t))}function KE(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Pv(t,a)}function YE(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),Pv(t,a)}function XE(t,r){return dr(t,r)}var Dc=null,Wa=null,Of=!1,kc=!1,Mf=!1,ii=0;function wr(t){t!==Wa&&t.next===null&&(Wa===null?Dc=Wa=t:Wa=Wa.next=t),kc=!0,Of||(Of=!0,WE())}function Nl(t,r){if(!Mf&&kc){Mf=!0;do for(var a=!1,l=Dc;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var m=0;else{var _=l.suspendedLanes,E=l.pingedLanes;m=(1<<31-Ft(42|t)+1)-1,m&=d&~(_&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Fv(l,m))}else m=Ve,m=Un(l,l===tt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Ns(l,m)||(a=!0,Fv(l,m));l=l.next}while(a);Mf=!1}}function JE(){zv()}function zv(){kc=Of=!1;var t=0;ii!==0&&l1()&&(t=ii);for(var r=yt(),a=null,l=Dc;l!==null;){var d=l.next,m=Bv(l,r);m===0?(l.next=null,a===null?Dc=d:a.next=d,d===null&&(Wa=a)):(a=l,(t!==0||(m&3)!==0)&&(kc=!0)),l=d}Mt!==0&&Mt!==5||Nl(t),ii!==0&&(ii=0)}function Bv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-Ft(m),E=1<<_,j=d[_];j===-1?((E&a)===0||(E&l)!==0)&&(d[_]=ya(E,r)):j<=r&&(t.expiredLanes|=E),m&=~E}if(r=tt,a=Ve,a=Un(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&kr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Ns(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&kr(l),Bo(a)){case 2:case 8:a=_t;break;case 32:a=Wn;break;case 268435456:a=Ss;break;default:a=Wn}return l=qv.bind(null,t),a=dr(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&kr(l),t.callbackPriority=2,t.callbackNode=null,2}function qv(t,r){if(Mt!==0&&Mt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(jc()&&t.callbackNode!==a)return null;var l=Ve;return l=Un(t,t===tt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Ev(t,l,r),Bv(t,yt()),t.callbackNode!=null&&t.callbackNode===a?qv.bind(null,t):null)}function Fv(t,r){if(jc())return null;Ev(t,r,!0)}function WE(){c1(function(){(Qe&6)!==0?dr(ft,JE):zv()})}function Vf(){if(ii===0){var t=La;t===0&&(t=ln,ln<<=1,(ln&261888)===0&&(ln=256)),ii=t}return ii}function Hv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:gr(""+t)}function Gv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function ZE(t,r,a,l,d){if(r==="submit"&&a&&a.stateNode===d){var m=Hv((d[Gt]||null).action),_=l.submitter;_&&(r=(r=_[Gt]||null)?Hv(r.formAction):_.getAttribute("formAction"),r!==null&&(m=r,_=null));var E=new Vi("action","action",null,l,d);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ii!==0){var j=_?Gv(d,_):new FormData(d);tf(a,{pending:!0,data:j,method:d.method,action:m},null,j)}}else typeof m=="function"&&(E.preventDefault(),j=_?Gv(d,_):new FormData(d),tf(a,{pending:!0,data:j,method:d.method,action:m},m,j))},currentTarget:d}]})}}for(var Lf=0;Lf<yh.length;Lf++){var Uf=yh[Lf],e1=Uf.toLowerCase(),t1=Uf[0].toUpperCase()+Uf.slice(1);nr(e1,"on"+t1)}nr(wg,"onAnimationEnd"),nr(Eg,"onAnimationIteration"),nr(Tg,"onAnimationStart"),nr("dblclick","onDoubleClick"),nr("focusin","onFocus"),nr("focusout","onBlur"),nr(vE,"onTransitionRun"),nr(yE,"onTransitionStart"),nr(_E,"onTransitionCancel"),nr(Sg,"onTransitionEnd"),pr("onMouseEnter",["mouseout","mouseover"]),pr("onMouseLeave",["mouseout","mouseover"]),pr("onPointerEnter",["pointerout","pointerover"]),pr("onPointerLeave",["pointerout","pointerover"]),un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),un("onBeforeInput",["compositionend","keypress","textInput","paste"]),un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function $v(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var _=l.length-1;0<=_;_--){var E=l[_],j=E.instance,G=E.currentTarget;if(E=E.listener,j!==m&&d.isPropagationStopped())break e;m=E,d.currentTarget=G;try{m(d)}catch(W){Ku(W)}d.currentTarget=null,m=j}else for(_=0;_<l.length;_++){if(E=l[_],j=E.instance,G=E.currentTarget,E=E.listener,j!==m&&d.isPropagationStopped())break e;m=E,d.currentTarget=G;try{m(d)}catch(W){Ku(W)}d.currentTarget=null,m=j}}}}function ke(t,r){var a=r[Is];a===void 0&&(a=r[Is]=new Set);var l=t+"__bubble";a.has(l)||(Qv(r,t,2,!1),a.add(l))}function Pf(t,r,a){var l=0;r&&(l|=4),Qv(a,t,l,r)}var Oc="_reactListening"+Math.random().toString(36).slice(2);function zf(t){if(!t[Oc]){t[Oc]=!0,_a.forEach(function(a){a!=="selectionchange"&&(n1.has(a)||Pf(a,!1,t),Pf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Oc]||(r[Oc]=!0,Pf("selectionchange",!1,r))}}function Qv(t,r,a,l){switch(wy(r)){case 2:var d=I1;break;case 8:d=j1;break;default:d=tm}a=d.bind(null,r,a,t),d=void 0,!Yo||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(r,a,{capture:!0,passive:d}):t.addEventListener(r,a,!0):d!==void 0?t.addEventListener(r,a,{passive:d}):t.addEventListener(r,a,!1)}function Bf(t,r,a,l,d){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var E=l.stateNode.containerInfo;if(E===d)break;if(_===4)for(_=l.return;_!==null;){var j=_.tag;if((j===3||j===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;E!==null;){if(_=Ur(E),_===null)return;if(j=_.tag,j===5||j===6||j===26||j===27){l=m=_;continue e}E=E.parentNode}}l=l.return}Du(function(){var G=m,W=Ta(a),ne=[];e:{var $=Ng.get(t);if($!==void 0){var K=Vi,he=t;switch(t){case"keypress":if(Mi(a)===0)break e;case"keydown":case"keyup":K=Bu;break;case"focusin":he="focus",K=zs;break;case"focusout":he="blur",K=zs;break;case"beforeblur":case"afterblur":K=zs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Ou;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Fu;break;case wg:case Eg:case Tg:K=Aa;break;case Sg:K=Ra;break;case"scroll":case"scrollend":K=ku;break;case"wheel":K=Gu;break;case"copy":case"cut":case"paste":K=Lu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=el;break;case"toggle":case"beforetoggle":K=qs}var xe=(r&4)!==0,et=!xe&&(t==="scroll"||t==="scrollend"),B=xe?$!==null?$+"Capture":null:$;xe=[];for(var U=G,H;U!==null;){var te=U;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||B===null||(te=gn(U,B),te!=null&&xe.push(Rl(U,te,H))),et)break;U=U.return}0<xe.length&&($=new K($,he,null,a,W),ne.push({event:$,listeners:xe}))}}if((r&7)===0){e:{if($=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",$&&a!==Ea&&(he=a.relatedTarget||a.fromElement)&&(Ur(he)||he[fr]))break e;if((K||$)&&($=W.window===W?W:($=W.ownerDocument)?$.defaultView||$.parentWindow:window,K?(he=a.relatedTarget||a.toElement,K=G,he=he?Ur(he):null,he!==null&&(et=u(he),xe=he.tag,he!==et||xe!==5&&xe!==27&&xe!==6)&&(he=null)):(K=null,he=G),K!==he)){if(xe=Ou,te="onMouseLeave",B="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(xe=el,te="onPointerLeave",B="onPointerEnter",U="pointer"),et=K==null?$:Di(K),H=he==null?$:Di(he),$=new xe(te,U+"leave",K,a,W),$.target=et,$.relatedTarget=H,te=null,Ur(W)===G&&(xe=new xe(B,U+"enter",he,a,W),xe.target=H,xe.relatedTarget=et,te=xe),et=te,K&&he)t:{for(xe=r1,B=K,U=he,H=0,te=B;te;te=xe(te))H++;te=0;for(var ve=U;ve;ve=xe(ve))te++;for(;0<H-te;)B=xe(B),H--;for(;0<te-H;)U=xe(U),te--;for(;H--;){if(B===U||U!==null&&B===U.alternate){xe=B;break t}B=xe(B),U=xe(U)}xe=null}else xe=null;K!==null&&Kv(ne,$,K,xe,!1),he!==null&&et!==null&&Kv(ne,et,he,xe,!0)}}e:{if($=G?Di(G):window,K=$.nodeName&&$.nodeName.toLowerCase(),K==="select"||K==="input"&&$.type==="file")var He=dg;else if(vn($))if(hg)He=mE;else{He=hE;var me=dE}else K=$.nodeName,!K||K.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?G&&Qo(G.elementType)&&(He=dg):He=fE;if(He&&(He=He(t,G))){zi(ne,He,a,W);break e}me&&me(t,$,G),t==="focusout"&&G&&$.type==="number"&&G.memoizedProps.value!=null&&wa($,"number",$.value)}switch(me=G?Di(G):window,t){case"focusin":(vn(me)||me.contentEditable==="true")&&(Ca=me,ph=G,rl=null);break;case"focusout":rl=ph=Ca=null;break;case"mousedown":gh=!0;break;case"contextmenu":case"mouseup":case"dragend":gh=!1,xg(ne,a,W);break;case"selectionchange":if(gE)break;case"keydown":case"keyup":xg(ne,a,W)}var Ce;if(v)e:{switch(t){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Ie?Ke(t,a)&&(Le="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Le="onCompositionStart");Le&&(F&&a.locale!=="ko"&&(Ie||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Ie&&(Ce=Vs()):(An=W,Sa="value"in An?An.value:An.textContent,Ie=!0)),me=Mc(G,Le),0<me.length&&(Le=new Jo(Le,t,null,a,W),ne.push({event:Le,listeners:me}),Ce?Le.data=Ce:(Ce=Nt(a),Ce!==null&&(Le.data=Ce)))),(Ce=T?Pt(t,a):zt(t,a))&&(Le=Mc(G,"onBeforeInput"),0<Le.length&&(me=new Jo("onBeforeInput","beforeinput",null,a,W),ne.push({event:me,listeners:Le}),me.data=Ce)),ZE(ne,t,G,a,W)}$v(ne,r)})}function Rl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Mc(t,r){for(var a=r+"Capture",l=[];t!==null;){var d=t,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=gn(t,a),d!=null&&l.unshift(Rl(t,d,m)),d=gn(t,r),d!=null&&l.push(Rl(t,d,m))),t.tag===3)return l;t=t.return}return[]}function r1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Kv(t,r,a,l,d){for(var m=r._reactName,_=[];a!==null&&a!==l;){var E=a,j=E.alternate,G=E.stateNode;if(E=E.tag,j!==null&&j===l)break;E!==5&&E!==26&&E!==27||G===null||(j=G,d?(G=gn(a,m),G!=null&&_.unshift(Rl(a,G,j))):d||(G=gn(a,m),G!=null&&_.push(Rl(a,G,j)))),a=a.return}_.length!==0&&t.push({event:r,listeners:_})}var s1=/\r\n?/g,i1=/\u0000|\uFFFD/g;function Yv(t){return(typeof t=="string"?t:""+t).replace(s1,`
`).replace(i1,"")}function Xv(t,r){return r=Yv(r),Yv(t)===r}function Ze(t,r,a,l,d,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||zn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&zn(t,""+l);break;case"className":ks(t,"class",l);break;case"tabIndex":ks(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ks(t,a,l);break;case"style":Iu(t,l,m);break;case"data":if(r!=="object"){ks(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=gr(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&Ze(t,r,"name",d.name,d,null),Ze(t,r,"formEncType",d.formEncType,d,null),Ze(t,r,"formMethod",d.formMethod,d,null),Ze(t,r,"formTarget",d.formTarget,d,null)):(Ze(t,r,"encType",d.encType,d,null),Ze(t,r,"method",d.method,d,null),Ze(t,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=gr(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Ut);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=gr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ke("beforetoggle",t),ke("toggle",t),Ds(t,"popover",l);break;case"xlinkActuate":Pn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Pn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Pn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Pn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Pn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Pn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Pn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Pn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Pn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ds(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=uh.get(a)||a,Ds(t,a,l))}}function qf(t,r,a,l,d,m){switch(a){case"style":Iu(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?zn(t,l):(typeof l=="number"||typeof l=="bigint")&&zn(t,""+l);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ut);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!js.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),m=t[Gt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,d),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ds(t,a,l)}}}function Yt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",t),ke("load",t);var l=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Ze(t,r,m,_,a,null)}}d&&Ze(t,r,"srcSet",a.srcSet,a,null),l&&Ze(t,r,"src",a.src,a,null);return;case"input":ke("invalid",t);var E=m=_=d=null,j=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":d=W;break;case"type":_=W;break;case"checked":j=W;break;case"defaultChecked":G=W;break;case"value":m=W;break;case"defaultValue":E=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:Ze(t,r,l,W,a,null)}}ki(t,m,E,j,G,_,d,!1);return;case"select":ke("invalid",t),l=_=m=null;for(d in a)if(a.hasOwnProperty(d)&&(E=a[d],E!=null))switch(d){case"value":m=E;break;case"defaultValue":_=E;break;case"multiple":l=E;default:Ze(t,r,d,E,a,null)}r=m,a=_,t.multiple=!!l,r!=null?Fe(t,!!l,r,!1):a!=null&&Fe(t,!!l,a,!0);return;case"textarea":ke("invalid",t),m=d=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":l=E;break;case"defaultValue":d=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:Ze(t,r,_,E,a,null)}Ms(t,l,d,m);return;case"option":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ze(t,r,j,l,a,null)}return;case"dialog":ke("beforetoggle",t),ke("toggle",t),ke("cancel",t),ke("close",t);break;case"iframe":case"object":ke("load",t);break;case"video":case"audio":for(l=0;l<Al.length;l++)ke(Al[l],t);break;case"image":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"embed":case"source":case"link":ke("error",t),ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Ze(t,r,G,l,a,null)}return;default:if(Qo(r)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&qf(t,r,W,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Ze(t,r,E,l,a,null))}function a1(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,_=null,E=null,j=null,G=null,W=null;for(K in a){var ne=a[K];if(a.hasOwnProperty(K)&&ne!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":j=ne;default:l.hasOwnProperty(K)||Ze(t,r,K,null,l,ne)}}for(var $ in l){var K=l[$];if(ne=a[$],l.hasOwnProperty($)&&(K!=null||ne!=null))switch($){case"type":m=K;break;case"name":d=K;break;case"checked":G=K;break;case"defaultChecked":W=K;break;case"value":_=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:K!==ne&&Ze(t,r,$,K,l,ne)}}Os(t,_,E,j,G,W,m,d);return;case"select":K=_=E=$=null;for(m in a)if(j=a[m],a.hasOwnProperty(m)&&j!=null)switch(m){case"value":break;case"multiple":K=j;default:l.hasOwnProperty(m)||Ze(t,r,m,null,l,j)}for(d in l)if(m=l[d],j=a[d],l.hasOwnProperty(d)&&(m!=null||j!=null))switch(d){case"value":$=m;break;case"defaultValue":E=m;break;case"multiple":_=m;default:m!==j&&Ze(t,r,d,m,l,j)}r=E,a=_,l=K,$!=null?Fe(t,!!a,$,!1):!!l!=!!a&&(r!=null?Fe(t,!!a,r,!0):Fe(t,!!a,a?[]:"",!1));return;case"textarea":K=$=null;for(E in a)if(d=a[E],a.hasOwnProperty(E)&&d!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Ze(t,r,E,null,l,d)}for(_ in l)if(d=l[_],m=a[_],l.hasOwnProperty(_)&&(d!=null||m!=null))switch(_){case"value":$=d;break;case"defaultValue":K=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==m&&Ze(t,r,_,d,l,m)}Oi(t,$,K);return;case"option":for(var he in a)if($=a[he],a.hasOwnProperty(he)&&$!=null&&!l.hasOwnProperty(he))switch(he){case"selected":t.selected=!1;break;default:Ze(t,r,he,null,l,$)}for(j in l)if($=l[j],K=a[j],l.hasOwnProperty(j)&&$!==K&&($!=null||K!=null))switch(j){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:Ze(t,r,j,$,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in a)$=a[xe],a.hasOwnProperty(xe)&&$!=null&&!l.hasOwnProperty(xe)&&Ze(t,r,xe,null,l,$);for(G in l)if($=l[G],K=a[G],l.hasOwnProperty(G)&&$!==K&&($!=null||K!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,r));break;default:Ze(t,r,G,$,l,K)}return;default:if(Qo(r)){for(var et in a)$=a[et],a.hasOwnProperty(et)&&$!==void 0&&!l.hasOwnProperty(et)&&qf(t,r,et,void 0,l,$);for(W in l)$=l[W],K=a[W],!l.hasOwnProperty(W)||$===K||$===void 0&&K===void 0||qf(t,r,W,$,l,K);return}}for(var B in a)$=a[B],a.hasOwnProperty(B)&&$!=null&&!l.hasOwnProperty(B)&&Ze(t,r,B,null,l,$);for(ne in l)$=l[ne],K=a[ne],!l.hasOwnProperty(ne)||$===K||$==null&&K==null||Ze(t,r,ne,$,l,K)}function Jv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function o1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],m=d.transferSize,_=d.initiatorType,E=d.duration;if(m&&E&&Jv(_)){for(_=0,E=d.responseEnd,l+=1;l<a.length;l++){var j=a[l],G=j.startTime;if(G>E)break;var W=j.transferSize,ne=j.initiatorType;W&&Jv(ne)&&(j=j.responseEnd,_+=W*(j<E?1:(E-G)/(j-G)))}if(--l,r+=8*(m+_)/(d.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Ff=null,Hf=null;function Vc(t){return t.nodeType===9?t:t.ownerDocument}function Wv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Gf(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var $f=null;function l1(){var t=window.event;return t&&t.type==="popstate"?t===$f?!1:($f=t,!0):($f=null,!1)}var ey=typeof setTimeout=="function"?setTimeout:void 0,u1=typeof clearTimeout=="function"?clearTimeout:void 0,ty=typeof Promise=="function"?Promise:void 0,c1=typeof queueMicrotask=="function"?queueMicrotask:typeof ty<"u"?function(t){return ty.resolve(null).then(t).catch(d1)}:ey;function d1(t){setTimeout(function(){throw t})}function ai(t){return t==="head"}function ny(t,r){var a=r,l=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(d),no(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Cl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Cl(a);for(var m=a.firstChild;m;){var _=m.nextSibling,E=m.nodeName;m[Lr]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&Cl(t.ownerDocument.body);a=d}while(a);no(r)}function ry(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Qf(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Qf(a),ji(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function h1(t,r,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Lr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Qn(t.nextSibling),t===null)break}return null}function f1(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Qn(t.nextSibling),t===null))return null;return t}function sy(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Qn(t.nextSibling),t===null))return null;return t}function Kf(t){return t.data==="$?"||t.data==="$~"}function Yf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function m1(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Qn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Xf=null;function iy(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Qn(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function ay(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function oy(t,r,a){switch(r=Vc(a),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Cl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ji(t)}var Kn=new Map,ly=new Set;function Lc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var is=ee.d;ee.d={f:p1,r:g1,D:v1,C:y1,L:_1,m:x1,X:w1,S:b1,M:E1};function p1(){var t=is.f(),r=Rc();return t||r}function g1(t){var r=Pr(t);r!==null&&r.tag===5&&r.type==="form"?S0(r):is.r(t)}var Za=typeof document>"u"?null:document;function uy(t,r,a){var l=Za;if(l&&typeof r=="string"&&r){var d=pt(r);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),ly.has(d)||(ly.add(d),t={rel:t,crossOrigin:a,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),Yt(r,"link",t),bt(r),l.head.appendChild(r)))}}function v1(t){is.D(t),uy("dns-prefetch",t,null)}function y1(t,r){is.C(t,r),uy("preconnect",t,r)}function _1(t,r,a){is.L(t,r,a);var l=Za;if(l&&t&&r){var d='link[rel="preload"][as="'+pt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+pt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+pt(a.imageSizes)+'"]')):d+='[href="'+pt(t)+'"]';var m=d;switch(r){case"style":m=eo(t);break;case"script":m=to(t)}Kn.has(m)||(t=w({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Kn.set(m,t),l.querySelector(d)!==null||r==="style"&&l.querySelector(Il(m))||r==="script"&&l.querySelector(jl(m))||(r=l.createElement("link"),Yt(r,"link",t),bt(r),l.head.appendChild(r)))}}function x1(t,r){is.m(t,r);var a=Za;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+pt(l)+'"][href="'+pt(t)+'"]',m=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=to(t)}if(!Kn.has(m)&&(t=w({rel:"modulepreload",href:t},r),Kn.set(m,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(jl(m)))return}l=a.createElement("link"),Yt(l,"link",t),bt(l),a.head.appendChild(l)}}}function b1(t,r,a){is.S(t,r,a);var l=Za;if(l&&t){var d=er(l).hoistableStyles,m=eo(t);r=r||"default";var _=d.get(m);if(!_){var E={loading:0,preload:null};if(_=l.querySelector(Il(m)))E.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Kn.get(m))&&Jf(t,a);var j=_=l.createElement("link");bt(j),Yt(j,"link",t),j._p=new Promise(function(G,W){j.onload=G,j.onerror=W}),j.addEventListener("load",function(){E.loading|=1}),j.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Uc(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:E},d.set(m,_)}}}function w1(t,r){is.X(t,r);var a=Za;if(a&&t){var l=er(a).hoistableScripts,d=to(t),m=l.get(d);m||(m=a.querySelector(jl(d)),m||(t=w({src:t,async:!0},r),(r=Kn.get(d))&&Wf(t,r),m=a.createElement("script"),bt(m),Yt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function E1(t,r){is.M(t,r);var a=Za;if(a&&t){var l=er(a).hoistableScripts,d=to(t),m=l.get(d);m||(m=a.querySelector(jl(d)),m||(t=w({src:t,async:!0,type:"module"},r),(r=Kn.get(d))&&Wf(t,r),m=a.createElement("script"),bt(m),Yt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function cy(t,r,a,l){var d=(d=Ae.current)?Lc(d):null;if(!d)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=eo(a.href),a=er(d).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=eo(a.href);var m=er(d).hoistableStyles,_=m.get(t);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=d.querySelector(Il(t)))&&!m._p&&(_.instance=m,_.state.loading=5),Kn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Kn.set(t,a),m||T1(d,t,a,_.state))),r&&l===null)throw Error(i(528,""));return _}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=to(a),a=er(d).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function eo(t){return'href="'+pt(t)+'"'}function Il(t){return'link[rel="stylesheet"]['+t+"]"}function dy(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function T1(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Yt(r,"link",a),bt(r),t.head.appendChild(r))}function to(t){return'[src="'+pt(t)+'"]'}function jl(t){return"script[async]"+t}function hy(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+pt(a.href)+'"]');if(l)return r.instance=l,bt(l),l;var d=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),bt(l),Yt(l,"style",d),Uc(l,a.precedence,t),r.instance=l;case"stylesheet":d=eo(a.href);var m=t.querySelector(Il(d));if(m)return r.state.loading|=4,r.instance=m,bt(m),m;l=dy(a),(d=Kn.get(d))&&Jf(l,d),m=(t.ownerDocument||t).createElement("link"),bt(m);var _=m;return _._p=new Promise(function(E,j){_.onload=E,_.onerror=j}),Yt(m,"link",l),r.state.loading|=4,Uc(m,a.precedence,t),r.instance=m;case"script":return m=to(a.src),(d=t.querySelector(jl(m)))?(r.instance=d,bt(d),d):(l=a,(d=Kn.get(m))&&(l=w({},a),Wf(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),bt(d),Yt(d,"link",l),t.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Uc(l,a.precedence,t));return r.instance}function Uc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,m=d,_=0;_<l.length;_++){var E=l[_];if(E.dataset.precedence===r)m=E;else if(m!==d)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Jf(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Wf(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Pc=null;function fy(t,r,a){if(Pc===null){var l=new Map,d=Pc=new Map;d.set(a,l)}else d=Pc,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var m=a[d];if(!(m[Lr]||m[mt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(r)||"";_=t+_;var E=l.get(_);E?E.push(m):l.set(_,[m])}}return l}function my(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function S1(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function py(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function N1(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=eo(l.href),m=r.querySelector(Il(d));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=zc.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=m,bt(m);return}m=r.ownerDocument||r,l=dy(l),(d=Kn.get(d))&&Jf(l,d),m=m.createElement("link"),bt(m);var _=m;_._p=new Promise(function(E,j){_.onload=E,_.onerror=j}),Yt(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=zc.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var Zf=0;function A1(t,r){return t.stylesheets&&t.count===0&&qc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&qc(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&Zf===0&&(Zf=62500*o1());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&qc(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Zf?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function zc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Bc=null;function qc(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Bc=new Map,r.forEach(R1,t),Bc=null,zc.call(t))}function R1(t,r){if(!(r.state.loading&4)){var a=Bc.get(t);if(a)var l=a.get(null);else{a=new Map,Bc.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var _=d[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}d=r.instance,_=d.getAttribute("data-precedence"),m=a.get(_)||l,m===l&&a.set(null,d),a.set(_,d),this.count++,l=zc.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),m?m.parentNode.insertBefore(d,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),r.state.loading|=4}}var Dl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function C1(t,r,a,l,d,m,_,E,j){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mr(0),this.hiddenUpdates=Mr(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function gy(t,r,a,l,d,m,_,E,j,G,W,ne){return t=new C1(t,r,a,_,j,G,W,ne,E),r=1,m===!0&&(r|=24),m=Cn(3,null,null,r),t.current=m,m.stateNode=t,r=jh(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},Mh(m),t}function vy(t){return t?(t=Da,t):Da}function yy(t,r,a,l,d,m){d=vy(d),l.context===null?l.context=d:l.pendingContext=d,l=Ys(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Xs(t,l,r),a!==null&&(wn(a,t,r),cl(a,t,r))}function _y(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function em(t,r){_y(t,r),(t=t.alternate)&&_y(t,r)}function xy(t){if(t.tag===13||t.tag===31){var r=Fi(t,67108864);r!==null&&wn(r,t,67108864),em(t,67108864)}}function by(t){if(t.tag===13||t.tag===31){var r=On();r=zo(r);var a=Fi(t,r);a!==null&&wn(a,t,r),em(t,r)}}var Fc=!0;function I1(t,r,a,l){var d=q.T;q.T=null;var m=ee.p;try{ee.p=2,tm(t,r,a,l)}finally{ee.p=m,q.T=d}}function j1(t,r,a,l){var d=q.T;q.T=null;var m=ee.p;try{ee.p=8,tm(t,r,a,l)}finally{ee.p=m,q.T=d}}function tm(t,r,a,l){if(Fc){var d=nm(l);if(d===null)Bf(t,r,l,Hc,a),Ey(t,l);else if(k1(d,t,r,a,l))l.stopPropagation();else if(Ey(t,l),r&4&&-1<D1.indexOf(t)){for(;d!==null;){var m=Pr(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Sn(m.pendingLanes);if(_!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var j=1<<31-Ft(_);E.entanglements[1]|=j,_&=~j}wr(m),(Qe&6)===0&&(Nc=yt()+500,Nl(0))}}break;case 31:case 13:E=Fi(m,2),E!==null&&wn(E,m,2),Rc(),em(m,2)}if(m=nm(l),m===null&&Bf(t,r,l,Hc,a),m===d)break;d=m}d!==null&&l.stopPropagation()}else Bf(t,r,l,null,a)}}function nm(t){return t=Ta(t),rm(t)}var Hc=null;function rm(t){if(Hc=null,t=Ur(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=h(r),t!==null)return t;t=null}else if(a===31){if(t=g(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Hc=t,null}function wy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ts()){case ft:return 2;case _t:return 8;case Wn:case Ii:return 32;case Ss:return 268435456;default:return 32}default:return 32}}var sm=!1,oi=null,li=null,ui=null,kl=new Map,Ol=new Map,ci=[],D1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ey(t,r){switch(t){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":kl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(r.pointerId)}}function Ml(t,r,a,l,d,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[d]},r!==null&&(r=Pr(r),r!==null&&xy(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),t)}function k1(t,r,a,l,d){switch(r){case"focusin":return oi=Ml(oi,t,r,a,l,d),!0;case"dragenter":return li=Ml(li,t,r,a,l,d),!0;case"mouseover":return ui=Ml(ui,t,r,a,l,d),!0;case"pointerover":var m=d.pointerId;return kl.set(m,Ml(kl.get(m)||null,t,r,a,l,d)),!0;case"gotpointercapture":return m=d.pointerId,Ol.set(m,Ml(Ol.get(m)||null,t,r,a,l,d)),!0}return!1}function Ty(t){var r=Ur(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){t.blockedOn=r,Nu(t.priority,function(){by(a)});return}}else if(r===31){if(r=g(a),r!==null){t.blockedOn=r,Nu(t.priority,function(){by(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gc(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=nm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ea=l,a.target.dispatchEvent(l),Ea=null}else return r=Pr(a),r!==null&&xy(r),t.blockedOn=a,!1;r.shift()}return!0}function Sy(t,r,a){Gc(t)&&a.delete(r)}function O1(){sm=!1,oi!==null&&Gc(oi)&&(oi=null),li!==null&&Gc(li)&&(li=null),ui!==null&&Gc(ui)&&(ui=null),kl.forEach(Sy),Ol.forEach(Sy)}function $c(t,r){t.blockedOn===r&&(t.blockedOn=null,sm||(sm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,O1)))}var Qc=null;function Ny(t){Qc!==t&&(Qc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Qc===t&&(Qc=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],d=t[r+2];if(typeof l!="function"){if(rm(l||a)===null)continue;break}var m=Pr(a);m!==null&&(t.splice(r,3),r-=3,tf(m,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function no(t){function r(j){return $c(j,t)}oi!==null&&$c(oi,t),li!==null&&$c(li,t),ui!==null&&$c(ui,t),kl.forEach(r),Ol.forEach(r);for(var a=0;a<ci.length;a++){var l=ci[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ci.length&&(a=ci[0],a.blockedOn===null);)Ty(a),a.blockedOn===null&&ci.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],m=a[l+1],_=d[Gt]||null;if(typeof m=="function")_||Ny(a);else if(_){var E=null;if(m&&m.hasAttribute("formAction")){if(d=m,_=m[Gt]||null)E=_.formAction;else if(rm(d)!==null)continue}else E=_.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),Ny(a)}}}function Ay(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function r(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),d!==null&&(d(),d=null)}}}function im(t){this._internalRoot=t}Kc.prototype.render=im.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=On();yy(a,l,t,r,null,null)},Kc.prototype.unmount=im.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;yy(t.current,2,null,t,null,null),Rc(),r[fr]=null}};function Kc(t){this._internalRoot=t}Kc.prototype.unstable_scheduleHydration=function(t){if(t){var r=Vr();t={blockedOn:null,target:t,priority:r};for(var a=0;a<ci.length&&r!==0&&r<ci[a].priority;a++);ci.splice(a,0,t),a===0&&Ty(t)}};var Ry=e.version;if(Ry!=="19.2.0")throw Error(i(527,Ry,"19.2.0"));ee.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(r),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var M1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yc.isDisabled&&Yc.supportsFiber)try{Ln=Yc.inject(M1),kt=Yc}catch{}}return Ul.createRoot=function(t,r){if(!o(t))throw Error(i(299));var a=!1,l="",d=M0,m=V0,_=L0;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=gy(t,1,!1,null,null,a,l,null,d,m,_,Ay),t[fr]=r.current,zf(t),new im(r)},Ul.hydrateRoot=function(t,r,a){if(!o(t))throw Error(i(299));var l=!1,d="",m=M0,_=V0,E=L0,j=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(j=a.formState)),r=gy(t,1,!0,r,a??null,l,d,j,m,_,E,Ay),r.context=vy(null),a=r.current,l=On(),l=zo(l),d=Ys(l),d.callback=null,Xs(a,d,l),a=l,r.current.lanes=a,As(r,a),wr(r),t[fr]=r.current,zf(t),new Kc(r)},Ul.version="19.2.0",Ul}var Z_;function BC(){if(Z_)return _m.exports;Z_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),_m.exports=zC(),_m.exports}var qC=BC();var ex="popstate";function FC(s={}){function e(i,o){let{pathname:u,search:h,hash:g}=i.location;return tp("",{pathname:u,search:h,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:lu(o)}return GC(e,n,null,s)}function ut(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Xn(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HC(){return Math.random().toString(36).substring(2,10)}function tx(s,e){return{usr:s.state,key:s.key,idx:e}}function tp(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?jo(e):e,state:n,key:e&&e.key||i||HC()}}function lu({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function jo(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function GC(s,e,n,i={}){let{window:o=document.defaultView,v5Compat:u=!1}=i,h=o.history,g="POP",p=null,y=b();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function b(){return(h.state||{idx:null}).idx}function w(){g="POP";let L=b(),J=L==null?null:L-y;y=L,p&&p({action:g,location:z.location,delta:J})}function N(L,J){g="PUSH";let X=tp(z.location,L,J);y=b()+1;let Z=tx(X,y),ue=z.createHref(X);try{h.pushState(Z,"",ue)}catch(ye){if(ye instanceof DOMException&&ye.name==="DataCloneError")throw ye;o.location.assign(ue)}u&&p&&p({action:g,location:z.location,delta:1})}function V(L,J){g="REPLACE";let X=tp(z.location,L,J);y=b();let Z=tx(X,y),ue=z.createHref(X);h.replaceState(Z,"",ue),u&&p&&p({action:g,location:z.location,delta:0})}function M(L){return $C(L)}let z={get action(){return g},get location(){return s(o,h)},listen(L){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(ex,w),p=L,()=>{o.removeEventListener(ex,w),p=null}},createHref(L){return e(o,L)},createURL:M,encodeLocation(L){let J=M(L);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:N,replace:V,go(L){return h.go(L)}};return z}function $C(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ut(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:lu(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Lw(s,e,n="/"){return QC(s,e,n,!1)}function QC(s,e,n,i){let o=typeof e=="string"?jo(e):e,u=vs(o.pathname||"/",n);if(u==null)return null;let h=Uw(s);KC(h);let g=null;for(let p=0;g==null&&p<h.length;++p){let y=iI(u);g=rI(h[p],y,i)}return g}function Uw(s,e=[],n=[],i="",o=!1){let u=(h,g,p=o,y)=>{let b={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(i)&&p)return;ut(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length)}let w=hs([i,b.relativePath]),N=n.concat(b);h.children&&h.children.length>0&&(ut(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),Uw(h.children,e,N,w,p)),!(h.path==null&&!h.index)&&e.push({path:w,score:tI(w,h.index),routesMeta:N})};return s.forEach((h,g)=>{if(h.path===""||!h.path?.includes("?"))u(h,g);else for(let p of Pw(h.path))u(h,g,!0,p)}),e}function Pw(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return o?[u,""]:[u];let h=Pw(i.join("/")),g=[];return g.push(...h.map(p=>p===""?u:[u,p].join("/"))),o&&g.push(...h),g.map(p=>s.startsWith("/")&&p===""?"/":p)}function KC(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:nI(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var YC=/^:[\w-]+$/,XC=3,JC=2,WC=1,ZC=10,eI=-2,nx=s=>s==="*";function tI(s,e){let n=s.split("/"),i=n.length;return n.some(nx)&&(i+=eI),e&&(i+=JC),n.filter(o=>!nx(o)).reduce((o,u)=>o+(YC.test(u)?XC:u===""?WC:ZC),i)}function nI(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function rI(s,e,n=!1){let{routesMeta:i}=s,o={},u="/",h=[];for(let g=0;g<i.length;++g){let p=i[g],y=g===i.length-1,b=u==="/"?e:e.slice(u.length)||"/",w=Dd({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},b),N=p.route;if(!w&&y&&n&&!i[i.length-1].route.index&&(w=Dd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},b)),!w)return null;Object.assign(o,w.params),h.push({params:o,pathname:hs([u,w.pathname]),pathnameBase:cI(hs([u,w.pathnameBase])),route:N}),w.pathnameBase!=="/"&&(u=hs([u,w.pathnameBase]))}return h}function Dd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=sI(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:i.reduce((y,{paramName:b,isOptional:w},N)=>{if(b==="*"){let M=g[N]||"";h=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const V=g[N];return w&&!V?y[b]=void 0:y[b]=(V||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:s}}function sI(s,e=!1,n=!0){Xn(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,p)=>(i.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function iI(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xn(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function vs(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}var aI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oI=s=>aI.test(s);function lI(s,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof s=="string"?jo(s):s,u;if(n)if(oI(n))u=n;else{if(n.includes("//")){let h=n;n=n.replace(/\/\/+/g,"/"),Xn(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${n}`)}n.startsWith("/")?u=rx(n.substring(1),"/"):u=rx(n,e)}else u=e;return{pathname:u,search:dI(i),hash:hI(o)}}function rx(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Em(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uI(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Zp(s){let e=uI(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function eg(s,e,n,i=!1){let o;typeof s=="string"?o=jo(s):(o={...s},ut(!o.pathname||!o.pathname.includes("?"),Em("?","pathname","search",o)),ut(!o.pathname||!o.pathname.includes("#"),Em("#","pathname","hash",o)),ut(!o.search||!o.search.includes("#"),Em("#","search","hash",o)));let u=s===""||o.pathname==="",h=u?"/":o.pathname,g;if(h==null)g=n;else{let w=e.length-1;if(!i&&h.startsWith("..")){let N=h.split("/");for(;N[0]==="..";)N.shift(),w-=1;o.pathname=N.join("/")}g=w>=0?e[w]:"/"}let p=lI(o,g),y=h&&h!=="/"&&h.endsWith("/"),b=(u||h===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||b)&&(p.pathname+="/"),p}var hs=s=>s.join("/").replace(/\/\/+/g,"/"),cI=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),dI=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,hI=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function fI(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zw=["POST","PUT","PATCH","DELETE"];new Set(zw);var mI=["GET",...zw];new Set(mI);var Do=k.createContext(null);Do.displayName="DataRouter";var sh=k.createContext(null);sh.displayName="DataRouterState";k.createContext(!1);var Bw=k.createContext({isTransitioning:!1});Bw.displayName="ViewTransition";var pI=k.createContext(new Map);pI.displayName="Fetchers";var gI=k.createContext(null);gI.displayName="Await";var lr=k.createContext(null);lr.displayName="Navigation";var Eu=k.createContext(null);Eu.displayName="Location";var Ir=k.createContext({outlet:null,matches:[],isDataRoute:!1});Ir.displayName="Route";var tg=k.createContext(null);tg.displayName="RouteError";function vI(s,{relative:e}={}){ut(ko(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=k.useContext(lr),{hash:o,pathname:u,search:h}=Tu(s,{relative:e}),g=u;return n!=="/"&&(g=u==="/"?n:hs([n,u])),i.createHref({pathname:g,search:h,hash:o})}function ko(){return k.useContext(Eu)!=null}function bs(){return ut(ko(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Eu).location}var qw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Fw(s){k.useContext(lr).static||k.useLayoutEffect(s)}function va(){let{isDataRoute:s}=k.useContext(Ir);return s?II():yI()}function yI(){ut(ko(),"useNavigate() may be used only in the context of a <Router> component.");let s=k.useContext(Do),{basename:e,navigator:n}=k.useContext(lr),{matches:i}=k.useContext(Ir),{pathname:o}=bs(),u=JSON.stringify(Zp(i)),h=k.useRef(!1);return Fw(()=>{h.current=!0}),k.useCallback((p,y={})=>{if(Xn(h.current,qw),!h.current)return;if(typeof p=="number"){n.go(p);return}let b=eg(p,JSON.parse(u),o,y.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:hs([e,b.pathname])),(y.replace?n.replace:n.push)(b,y.state,y)},[e,n,u,o,s])}k.createContext(null);function Tu(s,{relative:e}={}){let{matches:n}=k.useContext(Ir),{pathname:i}=bs(),o=JSON.stringify(Zp(n));return k.useMemo(()=>eg(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function _I(s,e){return Hw(s,e)}function Hw(s,e,n,i,o){ut(ko(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=k.useContext(lr),{matches:h}=k.useContext(Ir),g=h[h.length-1],p=g?g.params:{},y=g?g.pathname:"/",b=g?g.pathnameBase:"/",w=g&&g.route;{let X=w&&w.path||"";Gw(y,!w||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let N=bs(),V;if(e){let X=typeof e=="string"?jo(e):e;ut(b==="/"||X.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${X.pathname}" was given in the \`location\` prop.`),V=X}else V=N;let M=V.pathname||"/",z=M;if(b!=="/"){let X=b.replace(/^\//,"").split("/");z="/"+M.replace(/^\//,"").split("/").slice(X.length).join("/")}let L=Lw(s,{pathname:z});Xn(w||L!=null,`No routes matched location "${V.pathname}${V.search}${V.hash}" `),Xn(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${V.pathname}${V.search}${V.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let J=TI(L&&L.map(X=>Object.assign({},X,{params:Object.assign({},p,X.params),pathname:hs([b,u.encodeLocation?u.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?b:hs([b,u.encodeLocation?u.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),h,n,i,o);return e&&J?k.createElement(Eu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...V},navigationType:"POP"}},J):J}function xI(){let s=CI(),e=fI(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:u},"ErrorBoundary")," or"," ",k.createElement("code",{style:u},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:o},n):null,h)}var bI=k.createElement(xI,null),wI=class extends k.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?k.createElement(Ir.Provider,{value:this.props.routeContext},k.createElement(tg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function EI({routeContext:s,match:e,children:n}){let i=k.useContext(Do);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Ir.Provider,{value:s},n)}function TI(s,e=[],n=null,i=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,h=n?.errors;if(h!=null){let b=u.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);ut(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let g=!1,p=-1;if(n)for(let b=0;b<u.length;b++){let w=u[b];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=b),w.route.id){let{loaderData:N,errors:V}=n,M=w.route.loader&&!N.hasOwnProperty(w.route.id)&&(!V||V[w.route.id]===void 0);if(w.route.lazy||M){g=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let y=n&&i?(b,w)=>{i(b,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:w})}:void 0;return u.reduceRight((b,w,N)=>{let V,M=!1,z=null,L=null;n&&(V=h&&w.route.id?h[w.route.id]:void 0,z=w.route.errorElement||bI,g&&(p<0&&N===0?(Gw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,L=null):p===N&&(M=!0,L=w.route.hydrateFallbackElement||null)));let J=e.concat(u.slice(0,N+1)),X=()=>{let Z;return V?Z=z:M?Z=L:w.route.Component?Z=k.createElement(w.route.Component,null):w.route.element?Z=w.route.element:Z=b,k.createElement(EI,{match:w,routeContext:{outlet:b,matches:J,isDataRoute:n!=null},children:Z})};return n&&(w.route.ErrorBoundary||w.route.errorElement||N===0)?k.createElement(wI,{location:n.location,revalidation:n.revalidation,component:z,error:V,children:X(),routeContext:{outlet:null,matches:J,isDataRoute:!0},onError:y}):X()},null)}function ng(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SI(s){let e=k.useContext(Do);return ut(e,ng(s)),e}function NI(s){let e=k.useContext(sh);return ut(e,ng(s)),e}function AI(s){let e=k.useContext(Ir);return ut(e,ng(s)),e}function rg(s){let e=AI(s),n=e.matches[e.matches.length-1];return ut(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function RI(){return rg("useRouteId")}function CI(){let s=k.useContext(tg),e=NI("useRouteError"),n=rg("useRouteError");return s!==void 0?s:e.errors?.[n]}function II(){let{router:s}=SI("useNavigate"),e=rg("useNavigate"),n=k.useRef(!1);return Fw(()=>{n.current=!0}),k.useCallback(async(o,u={})=>{Xn(n.current,qw),n.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var sx={};function Gw(s,e,n){!e&&!sx[s]&&(sx[s]=!0,Xn(!1,n))}k.memo(jI);function jI({routes:s,future:e,state:n,unstable_onError:i}){return Hw(s,void 0,n,i,e)}function ix({to:s,replace:e,state:n,relative:i}){ut(ko(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=k.useContext(lr);Xn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=k.useContext(Ir),{pathname:h}=bs(),g=va(),p=eg(s,Zp(u),h,i==="path"),y=JSON.stringify(p);return k.useEffect(()=>{g(JSON.parse(y),{replace:e,state:n,relative:i})},[g,y,i,e,n]),null}function ao(s){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function DI({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:u=!1}){ut(!ko(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=s.replace(/^\/*/,"/"),g=k.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof n=="string"&&(n=jo(n));let{pathname:p="/",search:y="",hash:b="",state:w=null,key:N="default"}=n,V=k.useMemo(()=>{let M=vs(p,h);return M==null?null:{location:{pathname:M,search:y,hash:b,state:w,key:N},navigationType:i}},[h,p,y,b,w,N,i]);return Xn(V!=null,`<Router basename="${h}"> is not able to match the URL "${p}${y}${b}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:k.createElement(lr.Provider,{value:g},k.createElement(Eu.Provider,{children:e,value:V}))}function kI({children:s,location:e}){return _I(np(s),e)}function np(s,e=[]){let n=[];return k.Children.forEach(s,(i,o)=>{if(!k.isValidElement(i))return;let u=[...e,o];if(i.type===k.Fragment){n.push.apply(n,np(i.props.children,u));return}ut(i.type===ao,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=np(i.props.children,u)),n.push(h)}),n}var dd="get",hd="application/x-www-form-urlencoded";function ih(s){return s!=null&&typeof s.tagName=="string"}function OI(s){return ih(s)&&s.tagName.toLowerCase()==="button"}function MI(s){return ih(s)&&s.tagName.toLowerCase()==="form"}function VI(s){return ih(s)&&s.tagName.toLowerCase()==="input"}function LI(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function UI(s,e){return s.button===0&&(!e||e==="_self")&&!LI(s)}var td=null;function PI(){if(td===null)try{new FormData(document.createElement("form"),0),td=!1}catch{td=!0}return td}var zI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tm(s){return s!=null&&!zI.has(s)?(Xn(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hd}"`),null):s}function BI(s,e){let n,i,o,u,h;if(MI(s)){let g=s.getAttribute("action");i=g?vs(g,e):null,n=s.getAttribute("method")||dd,o=Tm(s.getAttribute("enctype"))||hd,u=new FormData(s)}else if(OI(s)||VI(s)&&(s.type==="submit"||s.type==="image")){let g=s.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||g.getAttribute("action");if(i=p?vs(p,e):null,n=s.getAttribute("formmethod")||g.getAttribute("method")||dd,o=Tm(s.getAttribute("formenctype"))||Tm(g.getAttribute("enctype"))||hd,u=new FormData(g,s),!PI()){let{name:y,type:b,value:w}=s;if(b==="image"){let N=y?`${y}.`:"";u.append(`${N}x`,"0"),u.append(`${N}y`,"0")}else y&&u.append(y,w)}}else{if(ih(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=dd,i=null,o=hd,h=s}return u&&o==="text/plain"&&(h=u,u=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function sg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function qI(s,e,n){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&vs(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function FI(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function HI(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function GI(s,e,n){let i=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await FI(u,n);return h.links?h.links():[]}return[]}));return YI(i.flat(1).filter(HI).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function ax(s,e,n,i,o,u){let h=(p,y)=>n[y]?p.route.id!==n[y].route.id:!0,g=(p,y)=>n[y].pathname!==p.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==p.params["*"];return u==="assets"?e.filter((p,y)=>h(p,y)||g(p,y)):u==="data"?e.filter((p,y)=>{let b=i.routes[p.route.id];if(!b||!b.hasLoader)return!1;if(h(p,y)||g(p,y))return!0;if(p.route.shouldRevalidate){let w=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function $I(s,e,{includeHydrateFallback:n}={}){return QI(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function QI(s){return[...new Set(s)]}function KI(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function YI(s,e){let n=new Set;return new Set(e),s.reduce((i,o)=>{let u=JSON.stringify(KI(o));return n.has(u)||(n.add(u),i.push({key:u,link:o})),i},[])}function $w(){let s=k.useContext(Do);return sg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function XI(){let s=k.useContext(sh);return sg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var ig=k.createContext(void 0);ig.displayName="FrameworkContext";function Qw(){let s=k.useContext(ig);return sg(s,"You must render this element inside a <HydratedRouter> element"),s}function JI(s,e){let n=k.useContext(ig),[i,o]=k.useState(!1),[u,h]=k.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:y,onMouseLeave:b,onTouchStart:w}=e,N=k.useRef(null);k.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let z=J=>{J.forEach(X=>{h(X.isIntersecting)})},L=new IntersectionObserver(z,{threshold:.5});return N.current&&L.observe(N.current),()=>{L.disconnect()}}},[s]),k.useEffect(()=>{if(i){let z=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(z)}}},[i]);let V=()=>{o(!0)},M=()=>{o(!1),h(!1)};return n?s!=="intent"?[u,N,{}]:[u,N,{onFocus:Pl(g,V),onBlur:Pl(p,M),onMouseEnter:Pl(y,V),onMouseLeave:Pl(b,M),onTouchStart:Pl(w,V)}]:[!1,N,{}]}function Pl(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function WI({page:s,...e}){let{router:n}=$w(),i=k.useMemo(()=>Lw(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?k.createElement(ej,{page:s,matches:i,...e}):null}function ZI(s){let{manifest:e,routeModules:n}=Qw(),[i,o]=k.useState([]);return k.useEffect(()=>{let u=!1;return GI(s,e,n).then(h=>{u||o(h)}),()=>{u=!0}},[s,e,n]),i}function ej({page:s,matches:e,...n}){let i=bs(),{manifest:o,routeModules:u}=Qw(),{basename:h}=$w(),{loaderData:g,matches:p}=XI(),y=k.useMemo(()=>ax(s,e,p,o,i,"data"),[s,e,p,o,i]),b=k.useMemo(()=>ax(s,e,p,o,i,"assets"),[s,e,p,o,i]),w=k.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let M=new Set,z=!1;if(e.forEach(J=>{let X=o.routes[J.route.id];!X||!X.hasLoader||(!y.some(Z=>Z.route.id===J.route.id)&&J.route.id in g&&u[J.route.id]?.shouldRevalidate||X.hasClientLoader?z=!0:M.add(J.route.id))}),M.size===0)return[];let L=qI(s,h,"data");return z&&M.size>0&&L.searchParams.set("_routes",e.filter(J=>M.has(J.route.id)).map(J=>J.route.id).join(",")),[L.pathname+L.search]},[h,g,i,o,y,e,s,u]),N=k.useMemo(()=>$I(b,o),[b,o]),V=ZI(b);return k.createElement(k.Fragment,null,w.map(M=>k.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),N.map(M=>k.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),V.map(({key:M,link:z})=>k.createElement("link",{key:M,nonce:n.nonce,...z})))}function tj(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Kw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Kw&&(window.__reactRouterVersion="7.9.6")}catch{}function nj({basename:s,children:e,window:n}){let i=k.useRef();i.current==null&&(i.current=FC({window:n,v5Compat:!0}));let o=i.current,[u,h]=k.useState({action:o.action,location:o.location}),g=k.useCallback(p=>{k.startTransition(()=>h(p))},[h]);return k.useLayoutEffect(()=>o.listen(g),[o,g]),k.createElement(DI,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:o})}var Yw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xw=k.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:u,replace:h,state:g,target:p,to:y,preventScrollReset:b,viewTransition:w,...N},V){let{basename:M}=k.useContext(lr),z=typeof y=="string"&&Yw.test(y),L,J=!1;if(typeof y=="string"&&z&&(L=y,Kw))try{let A=new URL(window.location.href),D=y.startsWith("//")?new URL(A.protocol+y):new URL(y),O=vs(D.pathname,M);D.origin===A.origin&&O!=null?y=O+D.search+D.hash:J=!0}catch{Xn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let X=vI(y,{relative:o}),[Z,ue,ye]=JI(i,N),ge=aj(y,{replace:h,state:g,target:p,preventScrollReset:b,relative:o,viewTransition:w});function I(A){e&&e(A),A.defaultPrevented||ge(A)}let S=k.createElement("a",{...N,...ye,href:L||X,onClick:J||u?e:I,ref:tj(V,ue),target:p,"data-discover":!z&&n==="render"?"true":void 0});return Z&&!z?k.createElement(k.Fragment,null,S,k.createElement(WI,{page:X})):S});Xw.displayName="Link";var rj=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:u,to:h,viewTransition:g,children:p,...y},b){let w=Tu(h,{relative:y.relative}),N=bs(),V=k.useContext(sh),{navigator:M,basename:z}=k.useContext(lr),L=V!=null&&dj(w)&&g===!0,J=M.encodeLocation?M.encodeLocation(w).pathname:w.pathname,X=N.pathname,Z=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;n||(X=X.toLowerCase(),Z=Z?Z.toLowerCase():null,J=J.toLowerCase()),Z&&z&&(Z=vs(Z,z)||Z);const ue=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let ye=X===J||!o&&X.startsWith(J)&&X.charAt(ue)==="/",ge=Z!=null&&(Z===J||!o&&Z.startsWith(J)&&Z.charAt(J.length)==="/"),I={isActive:ye,isPending:ge,isTransitioning:L},S=ye?e:void 0,A;typeof i=="function"?A=i(I):A=[i,ye?"active":null,ge?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(I):u;return k.createElement(Xw,{...y,"aria-current":S,className:A,ref:b,style:D,to:h,viewTransition:g},typeof p=="function"?p(I):p)});rj.displayName="NavLink";var sj=k.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:u,method:h=dd,action:g,onSubmit:p,relative:y,preventScrollReset:b,viewTransition:w,...N},V)=>{let M=uj(),z=cj(g,{relative:y}),L=h.toLowerCase()==="get"?"get":"post",J=typeof g=="string"&&Yw.test(g),X=Z=>{if(p&&p(Z),Z.defaultPrevented)return;Z.preventDefault();let ue=Z.nativeEvent.submitter,ye=ue?.getAttribute("formmethod")||h;M(ue||Z.currentTarget,{fetcherKey:e,method:ye,navigate:n,replace:o,state:u,relative:y,preventScrollReset:b,viewTransition:w})};return k.createElement("form",{ref:V,method:L,action:z,onSubmit:i?p:X,...N,"data-discover":!J&&s==="render"?"true":void 0})});sj.displayName="Form";function ij(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jw(s){let e=k.useContext(Do);return ut(e,ij(s)),e}function aj(s,{target:e,replace:n,state:i,preventScrollReset:o,relative:u,viewTransition:h}={}){let g=va(),p=bs(),y=Tu(s,{relative:u});return k.useCallback(b=>{if(UI(b,e)){b.preventDefault();let w=n!==void 0?n:lu(p)===lu(y);g(s,{replace:w,state:i,preventScrollReset:o,relative:u,viewTransition:h})}},[p,g,y,n,i,e,s,o,u,h])}var oj=0,lj=()=>`__${String(++oj)}__`;function uj(){let{router:s}=Jw("useSubmit"),{basename:e}=k.useContext(lr),n=RI();return k.useCallback(async(i,o={})=>{let{action:u,method:h,encType:g,formData:p,body:y}=BI(i,e);if(o.navigate===!1){let b=o.fetcherKey||lj();await s.fetch(b,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||g,flushSync:o.flushSync})}else await s.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,n])}function cj(s,{relative:e}={}){let{basename:n}=k.useContext(lr),i=k.useContext(Ir);ut(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),u={...Tu(s||".",{relative:e})},h=bs();if(s==null){u.search=h.search;let g=new URLSearchParams(u.search),p=g.getAll("index");if(p.some(b=>b==="")){g.delete("index"),p.filter(w=>w).forEach(w=>g.append("index",w));let b=g.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:hs([n,u.pathname])),lu(u)}function dj(s,{relative:e}={}){let n=k.useContext(Bw);ut(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Jw("useViewTransitionState"),o=Tu(s,{relative:e});if(!n.isTransitioning)return!1;let u=vs(n.currentLocation.pathname,i)||n.currentLocation.pathname,h=vs(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Dd(o.pathname,h)!=null||Dd(o.pathname,u)!=null}const Ww=k.createContext(),Oo=()=>{const s=k.useContext(Ww);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},Zw=({children:s})=>{const[e,n]=k.useState(null),[i,o]=k.useState(null),[u,h]=k.useState(!0),[g,p]=k.useState(null);k.useEffect(()=>yS(sa,async z=>{try{if(z){n(z);const L=await DC(aa(Yn,"users",z.uid));if(L.exists())o(L.data());else{const J={uid:z.uid,email:z.email,displayName:z.displayName||"",photoURL:z.photoURL||"",createdAt:new Date().toISOString(),favorites:[],dietaryPreferences:"",plan:"free"};await ep(aa(Yn,"users",z.uid),J),o(J)}}else n(null),o(null)}catch(L){console.error("Error fetching user profile:",L),p(L.message)}finally{h(!1)}}),[]);const V={user:e,userProfile:i,loading:u,error:g,signUp:async(M,z,L)=>{try{p(null),h(!0);const{user:J}=await Xx(sa,M,z);return L&&await Wx(J,{displayName:L}),{success:!0,user:J}}catch(J){return p(J.message),{success:!1,error:J.message}}finally{h(!1)}},signIn:async(M,z)=>{try{p(null),h(!0);const{user:L}=await Jx(sa,M,z);return{success:!0,user:L}}catch(L){return p(L.message),{success:!1,error:L.message}}finally{h(!1)}},logout:async()=>{try{return p(null),await _S(sa),{success:!0}}catch(M){return p(M.message),{success:!1,error:M.message}}},updateUserProfile:async M=>{try{if(p(null),e){const z=aa(Yn,"users",e.uid);return await ep(z,M,{merge:!0}),o(L=>({...L,...M})),{success:!0}}return{success:!1,error:"No user logged in"}}catch(z){return p(z.message),{success:!1,error:z.message}}}};return f.jsx(Ww.Provider,{value:V,children:s})};const hj=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fj=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),ox=s=>{const e=fj(s);return e.charAt(0).toUpperCase()+e.slice(1)},eE=(...s)=>s.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),mj=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var pj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const gj=k.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:h,...g},p)=>k.createElement("svg",{ref:p,...pj,width:e,height:e,stroke:s,strokeWidth:i?Number(n)*24/Number(e):n,className:eE("lucide",o),...!u&&!mj(g)&&{"aria-hidden":"true"},...g},[...h.map(([y,b])=>k.createElement(y,b)),...Array.isArray(u)?u:[u]]));const Be=(s,e)=>{const n=k.forwardRef(({className:i,...o},u)=>k.createElement(gj,{ref:u,iconNode:e,className:eE(`lucide-${hj(ox(s))}`,`lucide-${s}`,i),...o}));return n.displayName=ox(s),n};const vj=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],yj=Be("arrow-down",vj);const _j=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],kd=Be("arrow-left",_j);const xj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ag=Be("arrow-right",xj);const bj=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],lx=Be("award",bj);const wj=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ej=Be("book-open",wj);const Tj=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],dt=Be("chef-hat",Tj);const Sj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Nj=Be("circle-alert",Sj);const Aj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],yi=Be("circle-check-big",Aj);const Rj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Cj=Be("circle-check",Rj);const Ij=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],jj=Be("circle-x",Ij);const Dj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Su=Be("clock",Dj);const kj=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Oj=Be("dollar-sign",kj);const Mj=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],ux=Be("flame",Mj);const Vj=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],us=Be("folder",Vj);const Lj=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],oa=Be("heart",Lj);const Uj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Pj=Be("info",Uj);const zj=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],Bj=Be("leaf",zj);const qj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],og=Be("lock",qj);const Fj=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],cx=Be("log-in",Fj);const Hj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Gj=Be("log-out",Hj);const $j=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],tE=Be("mail",$j);const Qj=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Od=Be("menu",Qj);const Kj=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],rp=Be("message-square",Kj);const Yj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],dx=Be("play",Yj);const Xj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Md=Be("plus",Xj);const Jj=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],hx=Be("scale",Jj);const Wj=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Zj=Be("send",Wj);const e5=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],uu=Be("sparkles",e5);const t5=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],n5=Be("square-pen",t5);const r5=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Sm=Be("timer",r5);const s5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],nE=Be("trash-2",s5);const i5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],a5=Be("triangle-alert",i5);const o5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],l5=Be("user",o5);const u5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],rE=Be("users",u5);const c5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ys=Be("x",c5),sE=()=>f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-stone-50 to-stone-100 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"relative mb-6",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-200/50 animate-pulse",children:f.jsx(dt,{className:"w-8 h-8 text-white"})}),f.jsx("div",{className:"absolute inset-0 rounded-2xl border-2 border-blue-200 border-t-blue-500 animate-spin"})]}),f.jsx("h2",{className:"text-xl font-semibold text-stone-800 mb-2",children:"CookMate"}),f.jsx("p",{className:"text-stone-600",children:"Loading..."}),f.jsxs("div",{className:"flex justify-center space-x-1 mt-4",children:[f.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),f.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),f.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})}),Nm=({children:s,requireAuth:e=!0})=>{const{user:n,loading:i}=Oo(),o=bs();if(i)return f.jsx(sE,{});if(e&&!n)return f.jsx(ix,{to:"/signin",state:{from:o},replace:!0});if(!e&&n){const u=o.state?.from?.pathname||"/home";return f.jsx(ix,{to:u,replace:!0})}return s};function d5(){const[s,e]=k.useState(!1),[n,i]=k.useState(0),[o,u]=k.useState("up"),h=()=>{const p=window.scrollY,y=document.documentElement.scrollHeight-window.innerHeight;p>n?u("down"):u("up"),i(p),p>500&&o==="up"&&p<y-100?e(!0):e(!1)};k.useEffect(()=>(window.addEventListener("scroll",h),()=>{window.removeEventListener("scroll",h)}),[n,o]);const g=()=>{window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})};return f.jsxs("div",{className:`
                fixed bottom-6 right-6 z-50 transition-all duration-500 ease-in-out transform
                ${s?"opacity-100 translate-y-0 scale-100":"opacity-0 translate-y-4 scale-95 pointer-events-none"}
            `,children:[f.jsxs("button",{onClick:g,className:`\r
                    group relative overflow-hidden\r
                    bg-gradient-to-br from-blue-600 to-blue-700 \r
                    hover:from-blue-500 hover:to-blue-600 \r
                    text-white p-4 rounded-2xl shadow-xl \r
                    transform hover:scale-105 hover:-translate-y-1 \r
                    transition-all duration-300 ease-out\r
                    focus:outline-none focus:ring-4 focus:ring-blue-300 focus:ring-opacity-50\r
                    backdrop-blur-sm border border-blue-400/20\r
                `,"aria-label":"Scroll to bottom",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 ease-out"}),f.jsxs("div",{className:"relative z-10 flex items-center space-x-2",children:[f.jsx("svg",{className:"w-5 h-5 transition-transform group-hover:translate-y-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),f.jsx("span",{className:"text-sm font-medium hidden sm:block",children:"Bottom"})]}),f.jsx("div",{className:"absolute inset-0 rounded-2xl opacity-0 group-active:opacity-100 transition-opacity duration-150",children:f.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-2xl animate-ping"})})]}),f.jsxs("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-1 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap",children:["Scroll to bottom",f.jsx("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})}const Am=[{user:"I have chicken breast, spinach, garlic, and heavy cream.",aiTitle:"Creamy Garlic Spinach Chicken",steps:["Sear chicken until golden","Saut garlic and spinach","Simmer with cream for 5 mins"]},{user:"I have eggs, sourdough bread, ripe avocados, and lime.",aiTitle:"Zesty Avocado Toast & Poached Egg",steps:["Toast sourdough until crispy","Mash avocado with lime juice","Top with soft poached egg"]},{user:"I have ground beef, kidney beans, canned tomatoes, and onions.",aiTitle:"Classic 30-Minute Chili",steps:["Brown beef with diced onions","Add tomatoes and kidney beans","Simmer with spices for 20 mins"]},{user:"I have firm tofu, broccoli, soy sauce, and ginger.",aiTitle:"Ginger Soy Tofu Stir-Fry",steps:["Press and cube firm tofu","Stir-fry broccoli on high heat","Toss in savory ginger soy glaze"]},{user:"I have pasta, fresh basil, garlic cloves, and olive oil.",aiTitle:"Garlic Basil Aglio e Olio",steps:["Boil pasta until al dente","Sizzle sliced garlic in olive oil","Toss pasta with oil and basil"]}];function h5(){const[s,e]=k.useState(!1),[n,i]=k.useState(Am[0]);return k.useEffect(()=>{const o=Math.floor(Math.random()*Am.length);i(Am[o])},[]),f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-white via-stone-50 to-stone-100 font-sans text-stone-800 relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-5",children:f.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,theme(colors.stone.400)_1px,transparent_0)] [background-size:24px_24px]"})}),f.jsxs("nav",{className:"fixed w-full z-50 bg-gradient-to-r from-white/80 via-stone-50/80 to-white/80 backdrop-blur-xl border-b border-stone-200/60 shadow-xl shadow-stone-900/5",children:[f.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between items-center h-16",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"relative w-10 h-10 bg-gradient-to-br from-orange-500 via-orange-600 to-red-600 rounded-2xl flex items-center justify-center shadow-lg shadow-orange-200/50 overflow-hidden group",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),f.jsx(dt,{className:"w-6 h-6 text-white relative z-10"})]}),f.jsx("span",{className:"text-xl font-bold tracking-tight text-stone-900",children:"CookMate"})]}),f.jsx("div",{className:"hidden md:flex items-center gap-6",children:f.jsxs("a",{href:"/signin",className:"relative px-6 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-orange-600 to-red-600 rounded-2xl hover:from-orange-700 hover:to-red-700 transition-all duration-300 overflow-hidden group shadow-lg shadow-orange-200/50 hover:scale-105",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),"Sign In"]})}),f.jsx("div",{className:"md:hidden",children:f.jsx("button",{onClick:()=>e(!s),className:"p-2 text-stone-600 hover:bg-stone-100 rounded-xl transition-colors duration-200",children:s?f.jsx(ys,{className:"w-6 h-6"}):f.jsx(Od,{className:"w-6 h-6"})})})]})}),s&&f.jsxs("div",{className:"md:hidden bg-gradient-to-b from-white via-stone-50 to-stone-100 border-b border-stone-200/60 backdrop-blur-xl px-4 py-4 space-y-3",children:[f.jsx("button",{className:"block w-full text-left px-4 py-3 text-sm font-medium text-stone-600 hover:bg-gradient-to-r hover:from-orange-50 hover:to-red-50 rounded-xl transition-all duration-200",children:"How it works"}),f.jsx("button",{className:"block w-full text-left px-4 py-3 text-sm font-medium text-stone-600 hover:bg-gradient-to-r hover:from-orange-50 hover:to-red-50 rounded-xl transition-all duration-200",children:"Features"}),f.jsx("a",{href:"/signin",className:"block w-full px-4 py-3 text-sm font-semibold text-center text-white bg-gradient-to-r from-orange-600 to-red-600 rounded-xl hover:from-orange-700 hover:to-red-700 transition-all duration-200",children:"Sign In"})]})]}),f.jsx("main",{className:"pt-32 pb-16 md:pt-40 md:pb-24 overflow-hidden relative",children:f.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:f.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-12 lg:gap-20",children:[f.jsxs("div",{className:"flex-1 text-center lg:text-left z-10",children:[f.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-2xl bg-gradient-to-r from-orange-100 via-orange-200 to-red-100 border border-orange-200/60 text-orange-700 text-xs font-bold uppercase tracking-wider mb-6 shadow-lg shadow-orange-200/30",children:[f.jsx(uu,{className:"w-3 h-3"}),f.jsx("span",{children:"AI-Powered Kitchen Assistant"})]}),f.jsxs("h1",{className:"text-4xl md:text-6xl font-extrabold tracking-tight text-stone-900 mb-6 leading-[1.1]",children:["The smartest way to cook with ",f.jsx("br",{className:"hidden lg:block"}),f.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-600 via-red-600 to-pink-600",children:"what you have."})]}),f.jsx("p",{className:"text-lg md:text-xl text-stone-500 mb-8 max-w-2xl mx-auto lg:mx-0 leading-relaxed",children:"Don't know what to cook? Just tell CookMate what ingredients are in your fridge, and our AI will generate delicious recipes instantly."}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-4",children:[f.jsxs("a",{href:"/home",className:"relative w-full sm:w-auto px-8 py-4 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-2xl font-bold text-lg hover:from-orange-700 hover:to-red-700 shadow-2xl shadow-orange-200/50 hover:shadow-3xl hover:shadow-orange-300/50 transition-all duration-300 flex items-center justify-center gap-2 overflow-hidden group hover:scale-105",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),"Get Started!",f.jsx(ag,{className:"w-5 h-5 relative z-10"})]}),f.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium text-stone-500 bg-white/50 backdrop-blur-sm rounded-2xl px-4 py-2 border border-stone-200/60",children:[f.jsx("div",{className:"flex -space-x-2",children:[1,2,3].map(o=>f.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-gradient-to-br from-orange-400 to-red-500 shadow-sm"},o))}),f.jsx("span",{children:"Joined by 10,000+ cooks"})]})]})]}),f.jsxs("div",{className:"flex-1 w-full max-w-lg lg:max-w-none relative",children:[f.jsx("div",{className:"absolute top-0 right-0 w-72 h-72 bg-gradient-to-br from-orange-200 to-red-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-gradient-to-br from-amber-200 to-yellow-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000"}),f.jsxs("div",{className:"relative bg-gradient-to-b from-white via-stone-50 to-stone-100 border border-stone-200/60 rounded-3xl shadow-2xl shadow-stone-900/10 backdrop-blur-xl overflow-hidden transform rotate-2 hover:rotate-0 transition-transform duration-500",children:[f.jsxs("div",{className:"bg-gradient-to-r from-white/90 to-stone-50/90 backdrop-blur-sm border-b border-stone-200/60 p-4 flex items-center gap-3",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-br from-red-400 to-red-500"}),f.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-br from-amber-400 to-amber-500"}),f.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-br from-green-400 to-green-500"}),f.jsx("div",{className:"ml-auto text-xs font-bold text-stone-600",children:"COOKMATE AI"})]}),f.jsxs("div",{className:"p-6 space-y-4 bg-gradient-to-b from-white/80 to-stone-50/80 min-h-[380px] backdrop-blur-sm",children:[f.jsxs("div",{className:"flex gap-3 animate-fadeIn",children:[f.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-orange-100 to-red-100 flex items-center justify-center flex-shrink-0 border border-orange-200/60",children:f.jsx(dt,{className:"w-4 h-4 text-orange-600"})}),f.jsx("div",{className:"bg-gradient-to-br from-stone-50 to-stone-100 rounded-2xl rounded-tl-none p-3 text-sm text-stone-600 max-w-[80%] border border-stone-200/60",children:"Hello! What ingredients do you have today?"})]}),f.jsxs("div",{className:"flex flex-row-reverse gap-3 animate-slideUp",children:[f.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-stone-800 to-stone-900 flex items-center justify-center flex-shrink-0 text-white text-xs shadow-lg shadow-stone-200/50",children:"You"}),f.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-2xl rounded-tr-none p-3 text-sm max-w-[80%] shadow-lg shadow-orange-200/50",children:n.user})]}),f.jsxs("div",{className:"flex gap-3 animate-slideUp delay-100",children:[f.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-orange-100 to-red-100 flex items-center justify-center flex-shrink-0 border border-orange-200/60",children:f.jsx(dt,{className:"w-4 h-4 text-orange-600"})}),f.jsxs("div",{className:"bg-gradient-to-br from-stone-50 to-stone-100 rounded-2xl rounded-tl-none p-4 text-sm text-stone-600 max-w-[90%] shadow-lg shadow-stone-200/50 border border-stone-200/60",children:[f.jsx("p",{className:"font-bold text-stone-800 mb-2",children:n.aiTitle}),f.jsx("div",{className:"space-y-2",children:n.steps.map((o,u)=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Cj,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),f.jsx("span",{children:o})]},u))}),f.jsx("button",{className:"mt-3 text-xs font-bold text-orange-600 hover:text-orange-700 hover:underline transition-colors",children:"View Full Recipe "})]})]})]})]})]})]})})}),f.jsx("section",{className:"py-20 bg-gradient-to-b from-white via-stone-50 to-stone-100 border-t border-stone-200/60",children:f.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 relative",children:[f.jsx("div",{className:"absolute inset-0 opacity-5",children:f.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,theme(colors.stone.400)_1px,transparent_0)] [background-size:24px_24px]"})}),f.jsxs("div",{className:"text-center max-w-2xl mx-auto mb-16 relative z-10",children:[f.jsx("h2",{className:"text-3xl font-bold text-stone-900 mb-4 tracking-wide",children:"Why use CookMate?"}),f.jsx("p",{className:"text-stone-500 leading-relaxed",children:"Stop worrying about what to cook. Let our advanced AI handle the meal planning so you can enjoy the food."})]}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-8 relative z-10",children:[f.jsx(Rm,{icon:f.jsx(Bj,{className:"w-6 h-6 text-green-600"}),title:"Reduce Food Waste",desc:"Use up every ingredient in your fridge. CookMate finds recipes for exactly what you have on hand.",color:"bg-gradient-to-br from-green-50 via-emerald-50 to-green-100",borderColor:"border-green-200/60",shadowColor:"shadow-green-200/30"}),f.jsx(Rm,{icon:f.jsx(Su,{className:"w-6 h-6 text-orange-600"}),title:"Save Time",desc:"No more endless scrolling through recipe blogs. Get precise instructions instantly without the backstory.",color:"bg-gradient-to-br from-orange-50 via-amber-50 to-orange-100",borderColor:"border-orange-200/60",shadowColor:"shadow-orange-200/30"}),f.jsx(Rm,{icon:f.jsx(Ej,{className:"w-6 h-6 text-blue-600"}),title:"Learn New Skills",desc:"Discover new cuisines and cooking techniques tailored to your skill level and preferences.",color:"bg-gradient-to-br from-blue-50 via-indigo-50 to-blue-100",borderColor:"border-blue-200/60",shadowColor:"shadow-blue-200/30"})]})]})}),f.jsx(d5,{}),f.jsxs("footer",{className:"bg-gradient-to-br from-stone-900 via-stone-800 to-stone-900 text-stone-400 py-16 border-t border-stone-700/60 relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-5",children:f.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,theme(colors.stone.400)_1px,transparent_0)] [background-size:24px_24px]"})}),f.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[f.jsxs("div",{className:"grid md:grid-cols-4 gap-12 mb-12 border-b border-stone-700/60 pb-12",children:[f.jsxs("div",{className:"col-span-1 md:col-span-2",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg shadow-orange-200/50",children:f.jsx(dt,{className:"w-5 h-5 text-white"})}),f.jsx("span",{className:"text-xl font-bold text-white",children:"CookMate"})]}),f.jsx("p",{className:"max-w-xs text-sm leading-relaxed",children:"Your personal AI kitchen assistant. Making home cooking accessible, fun, and delicious for everyone."})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-white font-bold mb-4 tracking-wide",children:"Product"}),f.jsxs("ul",{className:"space-y-3 text-sm",children:[f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-orange-400 transition-colors duration-200",children:"Features"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-orange-400 transition-colors duration-200",children:"Pricing"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-orange-400 transition-colors duration-200",children:"API"})})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-white font-bold mb-4 tracking-wide",children:"Company"}),f.jsxs("ul",{className:"space-y-3 text-sm",children:[f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-orange-400 transition-colors duration-200",children:"About"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-orange-400 transition-colors duration-200",children:"Blog"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-orange-400 transition-colors duration-200",children:"Contact"})})]})]})]}),f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center text-sm",children:[f.jsx("p",{children:" 2024 CookMate AI. All rights reserved."}),f.jsxs("div",{className:"flex gap-4 mt-4 md:mt-0",children:[f.jsx("a",{href:"#",className:"hover:text-white transition-colors duration-200",children:"Privacy Policy"}),f.jsx("a",{href:"#",className:"hover:text-white transition-colors duration-200",children:"Terms of Service"})]})]})]})]})]})}function Rm({icon:s,title:e,desc:n,color:i,borderColor:o,shadowColor:u}){return f.jsxs("div",{className:`relative p-8 rounded-2xl border ${o} hover:border-orange-300 hover:shadow-2xl ${u}/50 transition-all group bg-gradient-to-b from-white/80 to-stone-50/80 backdrop-blur-xl overflow-hidden hover:scale-[1.02] duration-300`,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsx("div",{className:`relative w-12 h-12 rounded-xl ${i} flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 border border-white/50 shadow-lg`,children:s}),f.jsx("h3",{className:"text-xl font-bold text-stone-900 mb-3 relative z-10 tracking-wide",children:e}),f.jsx("p",{className:"text-stone-500 leading-relaxed relative z-10",children:n})]})}const f5=()=>`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,m5=async(s,e="New Cooking Session")=>{try{const n=f5(),i={id:n,userId:s,title:e,lastMessage:"Start by telling me what ingredients you have...",createdAt:Eo(),updatedAt:Eo(),isActive:!0},o=await Mw(bo(Yn,"sessions"),i);return console.log("[DEBUG] Created session - Custom ID:",n,"| Firestore Doc ID:",o.id),{success:!0,session:{...i,id:o.id}}}catch(n){return console.error("Error creating session:",n),{success:!1,error:n.message}}},p5=async(s,e=20)=>{try{try{const n=Cd(bo(Yn,"sessions"),Jl("userId","==",s),Jl("isActive","==",!0),Cw("updatedAt","desc"),Id(e));return{success:!0,sessions:(await jd(n)).docs.map(u=>({...u.data(),id:u.id}))}}catch(n){console.warn("Compound index not found, falling back to simpler query:",n);const i=Cd(bo(Yn,"sessions"),Jl("userId","==",s),Id(e));let u=(await jd(i)).docs.map(h=>({...h.data(),id:h.id}));return u=u.filter(h=>h.isActive!==!1).sort((h,g)=>{const p=h.updatedAt?.toDate?.()||new Date(h.updatedAt||0);return(g.updatedAt?.toDate?.()||new Date(g.updatedAt||0))-p}).slice(0,e),{success:!0,sessions:u}}}catch(n){return console.error("Error fetching sessions:",n),{success:!1,error:n.message}}},lg=async(s,e)=>{try{const n=aa(Yn,"sessions",s);return await Ow(n,{...e,updatedAt:Eo()}),{success:!0}}catch(n){return console.error("Error updating session:",n),{success:!1,error:n.message}}},g5=async s=>{try{const e=aa(Yn,"sessions",s);return await Ow(e,{isActive:!1,updatedAt:Eo()}),{success:!0}}catch(e){return console.error("Error deleting session:",e),{success:!1,error:e.message}}},Cm=async(s,e)=>{try{const n={...e,sessionId:s,createdAt:Eo()};return await Mw(bo(Yn,"messages"),n),await lg(s,{lastMessage:e.text.substring(0,100)+(e.text.length>100?"...":""),updatedAt:Eo()}),{success:!0}}catch(n){return console.error("Error saving message:",n),{success:!1,error:n.message}}},v5=async(s,e=100)=>{try{try{const n=Cd(bo(Yn,"messages"),Jl("sessionId","==",s),Cw("createdAt","asc"),Id(e));return{success:!0,messages:(await jd(n)).docs.map(u=>({id:u.id,...u.data()}))}}catch(n){console.warn("Messages index not found, falling back to simpler query:",n);const i=Cd(bo(Yn,"messages"),Jl("sessionId","==",s),Id(e));let u=(await jd(i)).docs.map(h=>({id:h.id,...h.data()}));return u=u.sort((h,g)=>{const p=h.createdAt?.toDate?.()||new Date(h.createdAt||0),y=g.createdAt?.toDate?.()||new Date(g.createdAt||0);return p-y}).slice(0,e),{success:!0,messages:u}}}catch(n){return console.error("Error fetching messages:",n),{success:!1,error:n.message}}},y5=s=>{if(!s||s.trim().length===0)return"New Cooking Session";const e=s.trim(),n=[/^i want to (cook|make|prepare) (.+)/i,/^help me (cook|make|prepare) (.+)/i,/^how to (cook|make|prepare) (.+)/i,/^can you help me (.+)/i,/^i have (.+) and want to (.+)/i,/^recipe for (.+)/i,/^what can i make with (.+)/i,/^cooking (.+)/i,/^make (.+)/i,/^cook (.+)/i,/^(.+?) recipe/i];for(const p of n){const y=e.match(p);if(y){const b=y[2]||y[1];return b.trim().length>0?b.charAt(0).toUpperCase()+b.slice(1).toLowerCase():"New Cooking Session"}}const i=e.split(" ").filter(p=>p.length>0);if(i.length===0)return"New Cooking Session";const o=["i","me","my","to","the","a","an","and","or","but","so","want","need","have"],u=i.filter(p=>!o.includes(p.toLowerCase()));if(u.length===0)return i.slice(0,3).map(p=>p.charAt(0).toUpperCase()+p.slice(1).toLowerCase()).join(" ")||"New Cooking Session";const g=u.slice(0,4).map(p=>p.charAt(0).toUpperCase()+p.slice(1).toLowerCase()).join(" ");return g.length>50?g.substring(0,47)+"...":g},_5=()=>(console.log(" API Debug - Environment variables:",{VITE_API_BASE_URL:"http://localhost:5001",VITE_FORCE_PROXY:"false",DEV:!1,MODE:"production"}),console.log(" Using explicit VITE_API_BASE_URL:","http://localhost:5001"),"http://localhost:5001"),iE=_5();console.log(" CookMate API URL:",iE,"Environment:","Production");async function ur(s,e={}){try{const n=sa.currentUser;let i=null;n?i=await n.getIdToken():i=localStorage.getItem("authToken")||localStorage.getItem("firebaseAuthToken");const o={"Content-Type":"application/json",...i&&{Authorization:`Bearer ${i}`},...e.headers},u=await fetch(`${iE}${s}`,{...e,headers:o}),h=await u.json();if(!u.ok)throw new Error(h.error||`HTTP ${u.status}`);return h}catch(n){throw console.error(`API call failed for ${s}:`,n),n}}const x5=async(s,e=null,n=null)=>{const i={message:s,...e&&{sessionId:e},...Array.isArray(n)&&n.length>0?{history:n}:{}};return ur("/api/ai/chat",{method:"POST",body:JSON.stringify(i)})},b5=async s=>{try{const e=await ur("/api/ai/recipe-details",{method:"POST",body:JSON.stringify({recipeName:s})});return{success:!0,recipe:e.recipe,message:e.message}}catch(e){return console.error("Recipe details API error:",e),{success:!1,error:e.message}}},aE=async()=>ur("/api/users/favorites"),oE=async(s,e=null)=>ur(`/api/users/favorites/${s}`,{method:"POST",body:JSON.stringify({recipeData:e})}),w5=async s=>ur(`/api/users/favorites/${s}`,{method:"DELETE"}),ug=async()=>ur("/api/collections"),E5=async s=>ur("/api/collections",{method:"POST",body:JSON.stringify(s)}),T5=async(s,e)=>ur(`/api/collections/${s}`,{method:"PUT",body:JSON.stringify(e)}),S5=async s=>ur(`/api/collections/${s}`,{method:"DELETE"}),lE=async(s,e,n=null)=>ur(`/api/collections/${s}/recipes`,{method:"POST",body:JSON.stringify({recipeId:e,recipeData:n})}),N5=async s=>ur(`/api/collections/${s}/recipes`),A5=()=>{const{user:s}=Oo(),[e,n]=k.useState([]),[i,o]=k.useState(!1),[u,h]=k.useState(null);k.useEffect(()=>{const w=N=>{const{sessionId:V,updates:M}=N.detail;n(z=>z.map(L=>L.id===V?{...L,...M}:L))};return window.addEventListener("sessionUpdated",w),()=>{window.removeEventListener("sessionUpdated",w)}},[]);const g=async()=>{if(!s){console.log(" [useSessions] Loading anonymous sessions from localStorage...");const w=localStorage.getItem("anonymous_sessions");if(w)try{const N=JSON.parse(w);console.log(" [useSessions] Found anonymous sessions:",N),n(N||[])}catch(N){console.error(" [useSessions] Error parsing anonymous sessions:",N),localStorage.removeItem("anonymous_sessions"),n([])}else console.log(" [useSessions] No anonymous sessions found in localStorage"),n([]);return}try{o(!0),h(null);const w=await p5(s.uid);w.success?n(w.sessions):h(w.error)}catch(w){h(w.message)}finally{o(!1)}},p=async w=>{try{if(h(null),!s){console.log(" [useSessions] Creating new anonymous session...");const V={id:`anon_${Date.now()}`,title:w||"Anonymous Chat",lastMessage:"",createdAt:new Date,updatedAt:new Date,isAnonymous:!0},M=localStorage.getItem("anonymous_sessions"),z=M?JSON.parse(M):[],L=[V,...z];return localStorage.setItem("anonymous_sessions",JSON.stringify(L)),console.log(" [useSessions] Anonymous session created and saved:",V),console.log(" [useSessions] Total sessions now:",L.length),n(L),V}const N=await m5(s.uid,w);return N.success?(n(V=>[N.session,...V]),N.session):(h(N.error),null)}catch(N){return h(N.message),null}},y=async(w,N)=>{try{h(null);const V=await lg(w,N);return V.success?(n(M=>M.map(z=>z.id===w?{...z,...N}:z)),!0):(h(V.error),!1)}catch(V){return h(V.message),!1}},b=async w=>{try{if(h(null),w.startsWith("anon_")){console.log(" [useSessions] Deleting anonymous session:",w);const V=localStorage.getItem("anonymous_sessions"),z=(V?JSON.parse(V):[]).filter(L=>L.id!==w);return localStorage.setItem("anonymous_sessions",JSON.stringify(z)),n(L=>L.filter(J=>J.id!==w)),console.log(" [useSessions] Anonymous session deleted. Remaining sessions:",z.length),!0}const N=await g5(w);return N.success?(n(V=>V.filter(M=>M.id!==w)),!0):(h(N.error),!1)}catch(N){return h(N.message),!1}};return k.useEffect(()=>{g()},[s]),{sessions:e,loading:i,error:u,loadSessions:g,createNewSession:p,updateExistingSession:y,deleteExistingSession:b,refreshSessions:g}},R5=s=>{const{user:e}=Oo(),[n,i]=k.useState([]),[o,u]=k.useState(!1),[h,g]=k.useState(!1),[p,y]=k.useState(null),[b,w]=k.useState({sessions:[],updateSession:null});k.useEffect(()=>{},[]);const N=async(z=s)=>{if(!z){i([]);return}try{if(u(!0),y(null),!e||z.startsWith("anon_")){console.log(" [useSessionChat] Loading anonymous messages for session:",z);const J=localStorage.getItem(`messages_${z}`);if(J)try{const X=JSON.parse(J);console.log(" [useSessionChat] Loaded",X.length,"messages for anonymous session"),i(X)}catch(X){console.error(" [useSessionChat] Error parsing local messages:",X),localStorage.removeItem(`messages_${z}`),i([])}else console.log(" [useSessionChat] No messages found for anonymous session"),i([]);return}const L=await v5(z);L.success?i(L.messages):y(L.error)}catch(L){y(L.message)}finally{u(!1)}},V=async z=>{if(!(!s||!z.trim()))try{g(!0),y(null);const L={id:`temp_${Date.now()}`,text:z,isUser:!0,timestamp:new Date};if(i(Z=>[...Z,L]),!e||s.startsWith("anon_")){const Z=localStorage.getItem(`messages_${s}`),ue=Z?JSON.parse(Z):[];ue.push(L),localStorage.setItem(`messages_${s}`,JSON.stringify(ue))}else await Cm(s,L);const J=[...n,L].slice(-10).map(Z=>({role:Z.isUser?"user":"assistant",content:Z.text}));console.log(" [FRONTEND] Sending message to AI:",z.substring(0,100)+(z.length>100?"...":""));const X=await x5(z,s,J);if(console.log(" [FRONTEND] AI response received:",X),X&&X.response){const Z=X.response.detectedRecipes||[];console.log(" [FRONTEND] Processing AI response with",Z.length,"detected recipes:",Z);const ue={id:`ai_${Date.now()}`,text:X.response.message,isUser:!1,timestamp:new Date,detectedRecipes:Z};if(i(ye=>(console.log(" [FRONTEND] Adding message to chat with",Z.length,"recipes"),[...ye,ue])),!e||s.startsWith("anon_")){const ye=localStorage.getItem(`messages_${s}`),ge=ye?JSON.parse(ye):[];ge.push(ue),localStorage.setItem(`messages_${s}`,JSON.stringify(ge));const I=localStorage.getItem("anonymous_session");if(I){const S=JSON.parse(I);S.lastMessage=z.substring(0,100)+(z.length>100?"...":""),S.updatedAt=new Date,localStorage.setItem("anonymous_session",JSON.stringify(S))}}else if(await Cm(s,ue),n.length===0){const ye=y5(z),ge=await lg(s,{title:ye});window.dispatchEvent(new CustomEvent("sessionUpdated",{detail:{sessionId:s,updates:{title:ye}}}))}return ue}else throw console.error(" [FRONTEND] No response from AI or malformed response:",X),new Error("No response from AI")}catch(L){y(L.message);const J={id:`error_${Date.now()}`,text:"I'm sorry, I encountered an error. Please try again.",isUser:!1,timestamp:new Date};if(i(X=>[...X,J]),!e||s.startsWith("anon_")){const X=localStorage.getItem(`messages_${s}`),Z=X?JSON.parse(X):[];Z.push(J),localStorage.setItem(`messages_${s}`,JSON.stringify(Z))}else await Cm(s,J)}finally{g(!1)}},M=()=>{i([]),y(null)};return k.useEffect(()=>{s?N(s):M()},[s,e]),{messages:n,loading:o,sending:h,error:p,sendMessage:V,loadMessages:N,clearMessages:M,refreshMessages:()=>N(s)}},Vd=({recipe:s,onClick:e,isLoading:n,isFavorited:i=!1,onAddToFavorites:o,onAddToCollection:u,collections:h=[],fetchRecipeDetails:g,user:p=null,requireAuth:y=null})=>{const[b,w]=k.useState(i),[N,V]=k.useState(!1),[M,z]=k.useState(!1),L=S=>{if(!s||typeof s=="string")return!1;const A=s.savedId||s.title?.toLowerCase().replace(/[^a-z0-9]/g,"_")||s.toLowerCase().replace(/[^a-z0-9]/g,"_");return h.find(O=>O.id===S)?.recipes?.some(O=>O.id===A)},J=async S=>{if(S?.stopPropagation(),!(!s||N)){if(!p){y&&y("add recipes to favorites");return}V(!0);try{let A=s,D;if(typeof s=="string"){if(g){const P=await g(s);P.success&&(A=P.recipe)}D=s.toLowerCase().replace(/[^a-z0-9]/g,"_")}else D=s.savedId||s.title?.toLowerCase().replace(/[^a-z0-9]/g,"_");(await oE(D,A)).success&&(w(!0),o&&o(A||s))}catch(A){console.error("Failed to add to favorites:",A)}finally{V(!1)}}},X=async(S,A)=>{if(!(!s||!S)){if(!p){y&&y("add recipes to collections");return}try{let D=s,O;if(typeof s=="string"){if(g){const R=await g(s);R.success&&(D=R.recipe)}O=s.toLowerCase().replace(/[^a-z0-9]/g,"_")}else O=s.savedId||s.title?.toLowerCase().replace(/[^a-z0-9]/g,"_");(await lE(S,O,D)).success&&(z(!1),u&&u(S,D||s))}catch(D){console.error("Failed to add to collection:",D)}}};if(k.useEffect(()=>{w(i)},[i]),n)return f.jsx("div",{className:"bg-gradient-to-b from-white via-stone-50 to-stone-100 rounded-2xl border border-stone-200/60 p-4 shadow-2xl shadow-stone-900/10 backdrop-blur-xl animate-pulse",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-400 to-red-500 rounded-xl flex items-center justify-center",children:f.jsx("div",{className:"w-5 h-5 bg-white/50 rounded-lg"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"h-4 bg-stone-200/70 rounded w-3/4 mb-2"}),f.jsx("div",{className:"h-3 bg-stone-200/70 rounded w-1/2"})]})]})});const Z=()=>typeof s=="string"?s:s?.title||s?.name||"Delicious Recipe",ue=()=>typeof s=="string"?"Click on the recipe card to get detailed ingredients and instructions":s?.description||"A delicious recipe to try",ye=()=>typeof s=="string"?"Varies":s?.cookingTime||s?.prepTime||"30 minutes",ge=()=>typeof s=="string"?"4":s?.servings||"4",I=()=>typeof s=="string"?"Medium":s?.difficulty||"Medium";return f.jsxs("div",{onClick:()=>!n&&e(Z()),className:`relative bg-gradient-to-b from-white via-stone-50 to-stone-100 rounded-2xl border border-stone-200/60 p-4 shadow-2xl shadow-stone-900/10 backdrop-blur-xl transition-all duration-300 cursor-pointer group hover:shadow-xl hover:scale-[1.02] hover:border-orange-300 hover:from-orange-50/30 hover:to-red-50/30 overflow-hidden ${n?"opacity-50 cursor-not-allowed":""}`,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[f.jsxs("div",{className:"relative flex-shrink-0 w-10 h-10 bg-gradient-to-br from-orange-400 to-red-500 rounded-xl flex items-center justify-center overflow-hidden group",children:[f.jsx(dt,{className:"w-5 h-5 text-white relative z-10"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h4",{className:"font-semibold text-stone-800 group-hover:text-orange-700 transition-colors truncate text-base leading-tight",children:Z()}),(b||i)&&f.jsx(oa,{className:"w-4 h-4 text-pink-500 fill-pink-500 flex-shrink-0"})]}),typeof s!="string"&&s?.description&&f.jsx("p",{className:"text-sm text-stone-500 mt-1 line-clamp-2 leading-relaxed",children:ue()}),f.jsxs("div",{className:"flex items-center gap-3 text-sm text-stone-600 mt-1.5 font-medium",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Su,{className:"w-3.5 h-3.5 text-orange-500"}),f.jsx("span",{className:"tracking-wide",children:ye()})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(rE,{className:"w-3.5 h-3.5 text-green-500"}),f.jsxs("span",{className:"tracking-wide",children:[ge()," servings"]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(dt,{className:"w-3.5 h-3.5 text-blue-500"}),f.jsx("span",{className:"tracking-wide",children:I()})]})]})]}),p&&h&&h.length>0&&f.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[f.jsx("button",{onClick:J,disabled:N,className:`p-2 rounded-full transition-all hover:scale-110 ${b||i?"text-pink-600 bg-pink-50 hover:bg-pink-100":"text-stone-400 hover:text-pink-600 hover:bg-pink-50"} ${N?"opacity-50 cursor-not-allowed":""}`,title:b||i?"Remove from favorites":"Add to favorites",children:f.jsx(oa,{className:`w-4 h-4 ${b||i?"fill-current":""}`})}),f.jsxs("div",{className:"relative",children:[f.jsx("button",{onClick:S=>{S.stopPropagation(),z(!M)},className:"p-2 text-stone-400 hover:text-orange-600 hover:bg-orange-50 rounded-full transition-all hover:scale-110",title:"Add to collection",children:f.jsx(us,{className:"w-4 h-4"})}),M&&f.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 bg-gradient-to-b from-white via-stone-50 to-stone-100 rounded-2xl shadow-2xl shadow-stone-900/10 border border-stone-200/60 backdrop-blur-xl z-[55] transition-all duration-300",children:[f.jsx("div",{className:"p-3 border-b border-stone-200/60",children:f.jsx("h4",{className:"font-semibold text-stone-800 text-sm tracking-wide",children:"Add to Collection"})}),f.jsx("div",{className:"max-h-48 overflow-y-auto",children:h.map(S=>f.jsxs("button",{onClick:()=>X(S.id),className:"w-full flex items-center gap-3 p-3 hover:bg-gradient-to-r hover:from-orange-50 hover:to-red-50 transition-all duration-300 text-left hover:scale-[1.02] group",children:[f.jsx("div",{className:"w-5 h-5 rounded flex items-center justify-center flex-shrink-0",style:{backgroundColor:S.color},children:f.jsx(us,{className:"w-3 h-3 text-white"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"font-medium text-stone-800 text-sm truncate",children:S.name}),f.jsxs("p",{className:"text-xs text-stone-500",children:[S.recipeCount||0," recipes"]})]}),L(S.id)&&f.jsx(yi,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]},S.id))})]})]})]}),f.jsx("div",{className:"flex-shrink-0",children:f.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-full flex items-center justify-center group-hover:from-emerald-500 group-hover:to-teal-600 transition-all duration-300 shadow-lg shadow-emerald-200/50 group-hover:shadow-emerald-300/50",children:f.jsx("svg",{className:"w-4 h-4 text-white transition-transform duration-300 group-hover:translate-x-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})})]}),M&&f.jsx("div",{className:"fixed inset-0 z-[54]",onClick:()=>z(!1)})]})},cg=({isOpen:s,onClose:e,message:n="To save recipes to your favorites or collections, please sign in to your account or create a new one."})=>{const i=va();if(!s)return null;const o=()=>{e(),i("/sign-in")},u=()=>{e(),i("/sign-up")},h=()=>{e()};return f.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4",children:[f.jsx("div",{className:"absolute inset-0 bg-stone-900/70 backdrop-blur-sm",onClick:h}),f.jsxs("div",{className:"relative bg-gradient-to-b from-white via-stone-50 to-stone-100 rounded-2xl shadow-2xl shadow-stone-900/20 border border-stone-200/60 max-w-md w-full p-8 text-center",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-100 to-red-100 rounded-2xl flex items-center justify-center mx-auto mb-6 border border-orange-200/60 shadow-lg shadow-orange-200/30",children:f.jsx(cx,{className:"w-8 h-8 text-orange-600"})}),f.jsx("h3",{className:"text-xl font-bold text-stone-800 mb-3 tracking-wide",children:"Sign In Required"}),f.jsx("p",{className:"text-stone-600 mb-6 leading-relaxed",children:n}),f.jsxs("div",{className:"flex flex-col gap-3",children:[f.jsxs("button",{onClick:o,className:"relative w-full px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-2xl hover:from-orange-700 hover:to-red-700 transition-all duration-300 font-semibold overflow-hidden group hover:scale-105",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),f.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[f.jsx(cx,{className:"w-5 h-5"}),"Sign In"]})]}),f.jsxs("button",{onClick:u,className:"relative w-full px-6 py-3 bg-gradient-to-r from-stone-100 to-stone-200 text-stone-700 rounded-2xl hover:from-stone-200 hover:to-stone-300 transition-all duration-300 font-semibold overflow-hidden group hover:scale-105 border border-stone-300",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),f.jsx("span",{className:"relative z-10",children:"Create Account"})]}),f.jsx("button",{onClick:h,className:"text-stone-500 hover:text-stone-700 font-medium transition-colors mt-2",children:"Maybe Later"})]})]})]})},C5=({recipeName:s,isOpen:e,onClose:n,fetchRecipeDetails:i,onAddToFavorites:o=null})=>{const{user:u}=Oo();va();const[h,g]=k.useState(!1),[p,y]=k.useState(null),[b,w]=k.useState(!1),[N,V]=k.useState(null),[M,z]=k.useState(!1),[L,J]=k.useState(!1),[X,Z]=k.useState([]),[ue,ye]=k.useState([]),[ge,I]=k.useState(!1),[S,A]=k.useState({}),[D,O]=k.useState({}),P=async()=>{if(!(!s||!i)){w(!0),V(null);try{const ae=await i(s);ae.success?y(ae.recipe):V(ae.error||"Failed to fetch recipe details")}catch(ae){V(ae.message||"Failed to fetch recipe details")}finally{w(!1)}}},R=async()=>{if(!u){Z([]);return}try{const ae=await aE();if(ae.success){const C=ae.favorites||[];Z(C)}else Z([])}catch{Z([])}},nt=async()=>{if(!u){ye([]);return}try{const ae=await ug();ae.success&&ye(ae.collections||[])}catch(ae){console.error("Failed to load collections:",ae)}},ct=()=>{if(p&&X.length>0){const ae=X.some(C=>C.title===p.title||C.id===p.title||C.id===p.savedId||C.savedId===p.savedId);z(ae)}else p&&z(!1)},q=async()=>{if(p){if(!u){g(!0);return}J(!0);try{const ae=p.savedId||p.title.toLowerCase().replace(/[^a-z0-9]/g,"_");(await oE(ae,p)).success&&(z(!0),Z(Q=>[...Q,{...p,id:ae,savedId:ae}]),o&&o({...p,id:ae,savedId:ae}))}catch{}finally{J(!1)}}},ee=async()=>{if(p){J(!0);try{const ae=p.savedId||p.title.toLowerCase().replace(/[^a-z0-9]/g,"_");(await w5(ae)).success&&(z(!1),Z(Q=>Q.filter(se=>se.title!==p.title&&se.id!==ae&&se.savedId!==ae)))}catch{}finally{J(!1)}}},pe=async ae=>{if(!(!p||!ae)){if(!u){g(!0),I(!1);return}try{const C=p.savedId||p.title.toLowerCase().replace(/[^a-z0-9]/g,"_");(await lE(ae,C,p)).success&&I(!1)}catch(C){console.error("Failed to add recipe to collection:",C)}}},Oe=ae=>{const C=ue.find(se=>se.id===ae);if(!C||!p)return!1;const Q=p.savedId||p.title.toLowerCase().replace(/[^a-z0-9]/g,"_");return C.recipes?.some(se=>se.id===Q)};return k.useEffect(()=>{e&&s&&(y(null),V(null),w(!0),P())},[e,s]),k.useEffect(()=>{e&&(R(),nt())},[e]),k.useEffect(()=>{ct()},[p,X]),e?f.jsxs("div",{className:"fixed inset-0 z-[65] flex items-center justify-center p-4",children:[f.jsx("div",{className:"absolute inset-0 bg-stone-900/60 backdrop-blur-xl",onClick:()=>{n(),I(!1)}}),f.jsxs("div",{className:"relative bg-gradient-to-b from-white via-stone-50 to-stone-100 rounded-2xl shadow-2xl shadow-stone-900/10 border border-stone-200/60 backdrop-blur-xl max-w-4xl w-full max-h-[90vh] overflow-hidden transition-all duration-500 ease-out",children:[f.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 relative",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex-1",children:b?f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin"}),f.jsxs("h2",{className:"text-2xl font-bold tracking-wide",children:["Loading ",s,"..."]})]}):p?f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold mb-2 leading-tight tracking-wide",children:p.title}),f.jsx("p",{className:"text-orange-100 font-medium tracking-wide leading-relaxed",children:p.description})]}):f.jsx("h2",{className:"text-2xl font-bold tracking-wide",children:s})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("button",{onClick:ae=>{ae.preventDefault(),ae.stopPropagation(),!(L||!p)&&(M?ee():q())},disabled:L||!p,className:`relative p-3 rounded-full transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-white focus:ring-opacity-30 flex items-center justify-center ${M?"bg-red-500 hover:bg-red-600 shadow-lg shadow-red-500/30 border-2 border-red-400":"bg-orange-500 hover:bg-orange-600 shadow-lg shadow-orange-500/30 border-2 border-orange-300"} ${L?"opacity-60 cursor-not-allowed animate-pulse":"cursor-pointer"}`,title:M?"Remove from favorites":"Add to favorites",style:{zIndex:60,pointerEvents:"auto",minWidth:"48px",minHeight:"48px",display:"flex",alignItems:"center",justifyContent:"center"},children:[f.jsx(oa,{className:`w-6 h-6 transition-all duration-300 ${M?"fill-white text-white scale-110":"text-white stroke-2"} ${L?"animate-pulse":""}`}),L&&f.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:f.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}),p&&ue.length>0&&f.jsxs("div",{className:"relative",children:[f.jsx("button",{onClick:()=>I(!ge),className:"p-3 bg-white bg-opacity-10 hover:bg-opacity-20 rounded-full transition-all",title:"Add to collection",children:f.jsx(us,{className:"w-6 h-6 text-white"})}),ge&&f.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-gradient-to-b from-white via-stone-50 to-stone-100 rounded-2xl shadow-2xl shadow-stone-900/10 border border-stone-200/60 backdrop-blur-xl z-[66] transition-all duration-300",children:[f.jsx("div",{className:"p-4 border-b border-stone-200/60",children:f.jsx("h4",{className:"font-semibold text-stone-800 text-sm tracking-wide",children:"Add to Collection"})}),f.jsx("div",{className:"max-h-48 overflow-y-auto",children:ue.map(ae=>f.jsxs("button",{onClick:()=>pe(ae.id),className:"w-full flex items-center gap-3 p-3 hover:bg-gradient-to-r hover:from-orange-50 hover:to-red-50 transition-all duration-300 text-left hover:scale-[1.02] group",children:[f.jsx("div",{className:"w-6 h-6 rounded flex items-center justify-center flex-shrink-0",style:{backgroundColor:ae.color},children:f.jsx(us,{className:"w-3 h-3 text-white"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"font-medium text-stone-800 text-sm truncate",children:ae.name}),f.jsxs("p",{className:"text-xs text-stone-500",children:[ae.recipeCount||0," recipes"]})]}),Oe(ae.id)&&f.jsx(yi,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]},ae.id))})]})]}),f.jsx("button",{onClick:n,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors",children:f.jsx(ys,{className:"w-6 h-6"})})]})]})}),f.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:N?f.jsxs("div",{className:"p-6 text-center",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-red-100 to-pink-100 rounded-2xl flex items-center justify-center mx-auto mb-4 border border-red-200/60 shadow-lg shadow-red-200/30",children:f.jsx(ys,{className:"w-8 h-8 text-red-500"})}),f.jsx("h3",{className:"text-lg font-semibold text-stone-800 mb-2 tracking-wide",children:"Error Loading Recipe"}),f.jsx("p",{className:"text-stone-600 mb-6 leading-relaxed",children:N}),f.jsxs("button",{onClick:P,className:"relative px-6 py-2.5 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-2xl hover:from-orange-700 hover:to-red-700 transition-all duration-300 font-semibold overflow-hidden group hover:scale-105",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),"Try Again"]})]}):b?f.jsx("div",{className:"p-6 space-y-4",children:f.jsxs("div",{className:"animate-pulse space-y-4",children:[f.jsx("div",{className:"h-4 bg-stone-200 rounded w-3/4"}),f.jsx("div",{className:"h-4 bg-stone-200 rounded w-1/2"}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:"h-3 bg-stone-200 rounded"}),f.jsx("div",{className:"h-3 bg-stone-200 rounded w-5/6"}),f.jsx("div",{className:"h-3 bg-stone-200 rounded w-4/6"})]})]})}):p?f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[f.jsxs("div",{className:"relative bg-gradient-to-br from-orange-50 via-orange-100 to-red-50 rounded-2xl p-4 text-center border border-orange-200/60 shadow-lg shadow-orange-200/30 hover:scale-105 transition-all duration-300 group overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsxs("div",{className:"relative z-10",children:[f.jsx(Sm,{className:"w-7 h-7 text-orange-600 mx-auto mb-2"}),f.jsx("p",{className:"text-sm text-stone-600 font-semibold tracking-wide",children:"Prep Time"}),f.jsx("p",{className:"font-bold text-stone-800 text-lg leading-tight",children:p.prepTime||p.cookingTime})]})]}),f.jsxs("div",{className:"relative bg-gradient-to-br from-red-50 via-pink-100 to-red-50 rounded-2xl p-4 text-center border border-red-200/60 shadow-lg shadow-red-200/30 hover:scale-105 transition-all duration-300 group overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsxs("div",{className:"relative z-10",children:[f.jsx(Su,{className:"w-7 h-7 text-red-600 mx-auto mb-2"}),f.jsx("p",{className:"text-sm text-stone-600 font-semibold tracking-wide",children:"Cook Time"}),f.jsx("p",{className:"font-bold text-stone-800 text-lg leading-tight",children:p.cookingTime})]})]}),f.jsxs("div",{className:"relative bg-gradient-to-br from-green-50 via-green-100 to-emerald-50 rounded-2xl p-4 text-center border border-green-200/60 shadow-lg shadow-green-200/30 hover:scale-105 transition-all duration-300 group overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsxs("div",{className:"relative z-10",children:[f.jsx(rE,{className:"w-7 h-7 text-green-600 mx-auto mb-2"}),f.jsx("p",{className:"text-sm text-stone-600 font-semibold tracking-wide",children:"Servings"}),f.jsx("p",{className:"font-bold text-stone-800 text-lg leading-tight",children:p.servings})]})]}),f.jsxs("div",{className:"relative bg-gradient-to-br from-blue-50 via-blue-100 to-indigo-50 rounded-2xl p-4 text-center border border-blue-200/60 shadow-lg shadow-blue-200/30 hover:scale-105 transition-all duration-300 group overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsxs("div",{className:"relative z-10",children:[f.jsx(dt,{className:"w-7 h-7 text-blue-600 mx-auto mb-2"}),f.jsx("p",{className:"text-sm text-stone-600 font-semibold tracking-wide",children:"Difficulty"}),f.jsx("p",{className:"font-bold text-stone-800 text-lg leading-tight",children:p.difficulty})]})]}),f.jsxs("div",{className:"relative bg-gradient-to-br from-purple-50 via-purple-100 to-pink-50 rounded-2xl p-4 text-center border border-purple-200/60 shadow-lg shadow-purple-200/30 hover:scale-105 transition-all duration-300 group overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsxs("div",{className:"relative z-10",children:[f.jsx(Oj,{className:"w-7 h-7 text-purple-600 mx-auto mb-2"}),f.jsx("p",{className:"text-sm text-stone-600 font-semibold tracking-wide",children:"Est. Cost"}),f.jsx("p",{className:"font-bold text-stone-800 text-lg leading-tight",children:p.estimatedCost})]})]})]}),p.youtubeUrl&&f.jsxs("div",{className:"relative bg-gradient-to-r from-red-50 via-pink-50 to-red-100 rounded-2xl p-4 mb-6 border border-red-200/60 shadow-lg shadow-red-200/30 overflow-hidden group",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"relative w-10 h-10 bg-gradient-to-br from-red-600 to-pink-600 rounded-xl flex items-center justify-center shadow-lg shadow-red-200/50",children:f.jsx(dx,{className:"w-5 h-5 text-white"})}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-stone-800 text-base leading-tight tracking-wide",children:"Watch Tutorial"}),f.jsx("p",{className:"text-sm text-stone-600 font-medium",children:"Find video instructions for this recipe"})]})]}),f.jsxs("a",{href:p.youtubeUrl,target:"_blank",rel:"noopener noreferrer",className:"relative px-4 py-2.5 bg-gradient-to-r from-red-600 to-pink-600 text-white rounded-2xl hover:from-red-700 hover:to-pink-700 transition-all duration-300 font-semibold flex items-center gap-2 hover:scale-105 shadow-lg shadow-red-200/50 overflow-hidden group",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),f.jsx(dx,{className:"w-4 h-4 relative z-10"}),f.jsx("span",{className:"relative z-10",children:"Watch on YouTube"})]})]})]}),f.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h3",{className:"text-xl font-bold text-stone-800 flex items-center gap-2 tracking-wide",children:[f.jsx(yi,{className:"w-6 h-6 text-green-600"}),"Ingredients"]}),f.jsx("button",{onClick:()=>A({}),className:"text-sm text-stone-500 hover:text-stone-700 font-medium transition-colors",children:"Reset Checkboxes"})]}),f.jsx("div",{className:"space-y-3",children:p.ingredients.map((ae,C)=>{const Q=S[C]||!1;return f.jsx("div",{className:"group",children:f.jsxs("div",{className:`relative flex items-start gap-3 p-4 rounded-xl border-2 transition-all duration-300 cursor-pointer hover:scale-[1.01] ${Q?"bg-gradient-to-r from-green-100 via-emerald-50 to-green-150 border-green-300 shadow-lg shadow-green-200/30":"bg-gradient-to-r from-green-50 via-emerald-50 to-green-100 border-green-200/60 hover:border-green-300"} overflow-hidden`,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsx("button",{onClick:()=>A(se=>({...se,[C]:!se[C]})),className:`relative flex-shrink-0 w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all duration-300 mt-0.5 ${Q?"bg-green-500 border-green-500 shadow-lg shadow-green-500/30":"bg-white border-green-300 hover:border-green-500"}`,children:Q&&f.jsx(yi,{className:"w-4 h-4 text-white"})}),f.jsx("span",{className:`text-stone-700 font-medium leading-relaxed relative z-10 ${Q?"line-through text-stone-500":""}`,children:ae})]})},C)})}),f.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl border border-green-200/60",children:f.jsxs("div",{className:"flex items-center justify-between text-sm",children:[f.jsx("span",{className:"text-stone-600 font-medium",children:"Total Ingredients:"}),f.jsx("span",{className:"font-semibold text-stone-800",children:p.ingredients.length})]})})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h3",{className:"text-xl font-bold text-stone-800 flex items-center gap-2 tracking-wide",children:[f.jsx(Sm,{className:"w-6 h-6 text-blue-600"}),"Cooking Instructions"]}),f.jsx("button",{onClick:()=>O({}),className:"text-sm text-stone-500 hover:text-stone-700 font-medium transition-colors",children:"Reset Steps"})]}),f.jsx("div",{className:"space-y-4",children:p.instructions.map((ae,C)=>{const Q=D[C]||!1;return f.jsx("div",{className:"group",children:f.jsxs("div",{className:`relative flex gap-4 p-5 rounded-xl border-2 transition-all duration-300 hover:scale-[1.01] ${Q?"bg-gradient-to-r from-blue-100 via-indigo-50 to-blue-150 border-blue-300 shadow-lg shadow-blue-200/30":"bg-gradient-to-r from-blue-50 via-indigo-50 to-blue-100 border-blue-200/60 hover:border-blue-300"} overflow-hidden`,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsx("div",{className:"flex items-start gap-3 relative z-10",children:f.jsx("button",{onClick:()=>O(se=>({...se,[C]:!se[C]})),className:`flex-shrink-0 w-8 h-8 rounded-xl border-2 flex items-center justify-center text-sm font-bold transition-all duration-300 ${Q?"bg-blue-500 border-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-white border-blue-300 hover:border-blue-500 text-blue-600"}`,children:Q?f.jsx(yi,{className:"w-5 h-5"}):C+1})}),f.jsxs("div",{className:"flex-1 relative z-10",children:[f.jsx("p",{className:`text-stone-700 leading-relaxed font-medium text-sm ${Q?"line-through text-stone-500":""}`,children:ae}),p.stepDurations&&p.stepDurations[C]&&f.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-stone-500",children:[f.jsx(Sm,{className:"w-3 h-3"}),f.jsxs("span",{children:["Estimated time: ",p.stepDurations[C]]})]}),ae.toLowerCase().includes("c")||ae.toLowerCase().includes("f")||ae.toLowerCase().includes("degrees")&&f.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),f.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Temperature Critical"})]})]})]})},C)})}),f.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-xl border border-blue-200/60",children:f.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-stone-600 font-medium",children:"Total Steps:"}),f.jsx("span",{className:"font-semibold text-stone-800",children:p.instructions.length})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-stone-600 font-medium",children:"Completed:"}),f.jsxs("span",{className:"font-semibold text-stone-800",children:[Object.values(D).filter(Boolean).length,"/",p.instructions.length]})]})]})})]})]}),p.nutritionInfo&&f.jsxs("div",{className:"mt-6 relative bg-gradient-to-br from-emerald-50 via-green-50 to-emerald-100 rounded-2xl p-6 border border-emerald-200/60 shadow-lg shadow-emerald-200/30 overflow-hidden group",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsxs("h4",{className:"font-semibold text-stone-800 mb-4 text-base tracking-wide flex items-center gap-2 relative z-10",children:[f.jsx(hx,{className:"w-5 h-5 text-emerald-600"}),"Nutritional Information",f.jsx("span",{className:"text-xs font-normal text-stone-500",children:"(per serving)"})]}),f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 relative z-10",children:[f.jsxs("div",{className:"text-center p-4 bg-white/70 rounded-xl hover:scale-105 transition-all duration-300 border border-emerald-200/40",children:[f.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-400 to-red-500 rounded-xl flex items-center justify-center mx-auto mb-2",children:f.jsx("span",{className:"text-white font-bold text-sm",children:"Cal"})}),f.jsx("p",{className:"text-stone-600 font-medium text-sm mb-1",children:"Calories"}),f.jsx("p",{className:"font-bold text-stone-800 text-lg",children:p.nutritionInfo.calories})]}),f.jsxs("div",{className:"text-center p-4 bg-white/70 rounded-xl hover:scale-105 transition-all duration-300 border border-emerald-200/40",children:[f.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center mx-auto mb-2",children:f.jsx("span",{className:"text-white font-bold text-xs",children:"Prot"})}),f.jsx("p",{className:"text-stone-600 font-medium text-sm mb-1",children:"Protein"}),f.jsx("p",{className:"font-bold text-stone-800 text-lg",children:p.nutritionInfo.protein})]}),f.jsxs("div",{className:"text-center p-4 bg-white/70 rounded-xl hover:scale-105 transition-all duration-300 border border-emerald-200/40",children:[f.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center mx-auto mb-2",children:f.jsx("span",{className:"text-white font-bold text-xs",children:"Carb"})}),f.jsx("p",{className:"text-stone-600 font-medium text-sm mb-1",children:"Carbohydrates"}),f.jsx("p",{className:"font-bold text-stone-800 text-lg",children:p.nutritionInfo.carbs})]}),f.jsxs("div",{className:"text-center p-4 bg-white/70 rounded-xl hover:scale-105 transition-all duration-300 border border-emerald-200/40",children:[f.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl flex items-center justify-center mx-auto mb-2",children:f.jsx("span",{className:"text-white font-bold text-xs",children:"Fat"})}),f.jsx("p",{className:"text-stone-600 font-medium text-sm mb-1",children:"Total Fat"}),f.jsx("p",{className:"font-bold text-stone-800 text-lg",children:p.nutritionInfo.fat})]})]}),p.nutritionInfo.fiber&&f.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 relative z-10",children:[f.jsxs("div",{className:"text-center p-3 bg-white/50 rounded-xl",children:[f.jsx("p",{className:"text-stone-600 font-medium text-sm",children:"Fiber"}),f.jsx("p",{className:"font-semibold text-stone-800",children:p.nutritionInfo.fiber})]}),f.jsxs("div",{className:"text-center p-3 bg-white/50 rounded-xl",children:[f.jsx("p",{className:"text-stone-600 font-medium text-sm",children:"Sodium"}),f.jsx("p",{className:"font-semibold text-stone-800",children:p.nutritionInfo.sodium})]})]})]}),p.equipment&&p.equipment.length>0&&f.jsxs("div",{className:"mt-6 relative bg-gradient-to-br from-stone-50 via-gray-50 to-stone-100 rounded-2xl p-6 border border-stone-200/60 shadow-lg shadow-stone-200/30 overflow-hidden group",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsxs("h4",{className:"font-semibold text-stone-800 mb-4 text-base tracking-wide flex items-center gap-2 relative z-10",children:[f.jsx(dt,{className:"w-5 h-5 text-stone-600"}),"Equipment Required"]}),f.jsx("div",{className:"grid grid-cols-2 gap-3 relative z-10",children:p.equipment.map((ae,C)=>f.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/60 rounded-xl hover:bg-white/80 transition-all duration-300",children:[f.jsx("div",{className:"w-2 h-2 bg-gradient-to-br from-stone-400 to-gray-500 rounded-full"}),f.jsx("span",{className:"text-stone-700 text-sm font-medium",children:ae})]},C))})]}),p.tips&&p.tips.length>0&&f.jsxs("div",{className:"mt-6 relative bg-gradient-to-br from-yellow-50 via-amber-50 to-orange-100 rounded-2xl p-6 border border-yellow-200/60 shadow-lg shadow-yellow-200/30 overflow-hidden group",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsxs("h4",{className:"font-semibold text-stone-800 mb-4 text-base tracking-wide flex items-center gap-2 relative z-10",children:[f.jsx(Nj,{className:"w-5 h-5 text-amber-600"}),"Professional Chef Tips"]}),f.jsx("div",{className:"space-y-3 relative z-10",children:p.tips.map((ae,C)=>f.jsxs("div",{className:"relative flex items-start gap-3 p-4 bg-white/60 rounded-xl hover:bg-white/80 transition-all duration-300 group",children:[f.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-lg flex items-center justify-center flex-shrink-0",children:f.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),f.jsx("p",{className:"text-stone-700 text-sm font-medium leading-relaxed",children:ae})]},C))})]}),p.servingNotes&&f.jsxs("div",{className:"mt-6 relative bg-gradient-to-br from-rose-50 via-pink-50 to-red-100 rounded-2xl p-6 border border-rose-200/60 shadow-lg shadow-rose-200/30 overflow-hidden group",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsxs("h4",{className:"font-semibold text-stone-800 mb-4 text-base tracking-wide flex items-center gap-2 relative z-10",children:[f.jsx(lx,{className:"w-5 h-5 text-rose-600"}),"Serving & Plating"]}),f.jsx("div",{className:"relative z-10",children:f.jsx("p",{className:"text-stone-700 text-sm font-medium leading-relaxed",children:p.servingNotes})})]}),p.substitutions&&p.substitutions.length>0&&f.jsxs("div",{className:"mt-6 relative bg-gradient-to-br from-indigo-50 via-blue-50 to-purple-100 rounded-2xl p-6 border border-indigo-200/60 shadow-lg shadow-indigo-200/30 overflow-hidden group",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsxs("h4",{className:"font-semibold text-stone-800 mb-4 text-base tracking-wide flex items-center gap-2 relative z-10",children:[f.jsx(hx,{className:"w-5 h-5 text-indigo-600"}),"Ingredient Substitutions"]}),f.jsx("div",{className:"grid lg:grid-cols-2 gap-4 relative z-10",children:p.substitutions.map((ae,C)=>f.jsx("div",{className:"p-4 bg-white/60 rounded-xl border border-indigo-200/40 hover:bg-white/80 transition-all duration-300",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"}),f.jsxs("div",{children:[f.jsxs("p",{className:"text-stone-700 text-sm font-medium leading-relaxed",children:[f.jsxs("span",{className:"font-semibold text-indigo-700",children:[ae.original,":"]})," ",ae.substitute]}),ae.note&&f.jsx("p",{className:"text-stone-500 text-xs mt-1 italic",children:ae.note})]})]})},C))})]}),p.professionalNotes&&f.jsxs("div",{className:"mt-6 relative bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-100 rounded-2xl p-6 border border-amber-200/60 shadow-lg shadow-amber-200/30 overflow-hidden group",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsxs("div",{className:"flex items-start gap-3 relative z-10",children:[f.jsx(lx,{className:"w-6 h-6 text-amber-600 mt-0.5 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-stone-800 mb-2 text-base tracking-wide",children:"Chef's Professional Notes"}),f.jsx("p",{className:"text-stone-700 text-sm leading-relaxed font-medium",children:p.professionalNotes})]})]})]})]}):null})]}),f.jsx(cg,{isOpen:h,onClose:()=>g(!1)})]}):null},fx=({isOpen:s,isCollapsed:e,isMobile:n,user:i,sessions:o,currentSessionId:u,onClose:h,onToggleCollapse:g,onCreateSession:p,onSelectSession:y,onDeleteSession:b,onShowFavorites:w,onShowCollections:N,onLogout:V,sessionsLoading:M,collapsed:z})=>{const L=X=>X?X.length>40?X.substring(0,40)+"...":X:"New chat session",J=()=>f.jsxs("div",{className:`sidebar-container ${n?"w-72 sm:w-80 mobile-sidebar":e?"w-20":"w-80 lg:w-96"} 
      bg-gradient-to-b from-white via-stone-50 to-stone-100 
      border-r border-stone-200/60 backdrop-blur-xl 
      shadow-2xl shadow-stone-900/10 
      flex flex-col transition-all duration-500 ease-out relative overflow-hidden`,children:[f.jsx("div",{className:"absolute inset-0 opacity-5",children:f.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,theme(colors.stone.400)_1px,transparent_0)] [background-size:24px_24px]"})}),f.jsxs("div",{className:`relative ${n?"h-14":"h-16"} flex items-center justify-between ${n?"px-3":"px-5"} border-b border-stone-200/60 bg-white/40 backdrop-blur-sm`,children:[!e&&f.jsxs("div",{className:`flex items-center ${n?"gap-2":"gap-3"} text-orange-600 group cursor-pointer`,children:[f.jsxs("div",{className:"relative",children:[f.jsx(dt,{className:`${n?"w-6 h-6":"w-7 h-7"} transition-all duration-300 group-hover:scale-110 group-hover:rotate-12`}),f.jsx(uu,{className:`absolute ${n?"-top-0.5 -right-0.5 w-2.5 h-2.5":"-top-1 -right-1 w-3 h-3"} text-yellow-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300`})]}),f.jsx("span",{className:`font-bold ${n?"text-lg":"text-xl"} gradient-text`,children:"CookMate"})]}),e&&f.jsx("button",{onClick:g,className:"w-full flex justify-center text-orange-600 group cursor-pointer",children:f.jsxs("div",{className:`relative ${n?"p-2.5":"p-2"} rounded-xl hover:bg-orange-50 transition-colors duration-200`,children:[f.jsx(dt,{className:`${n?"w-5 h-5":"w-6 h-6"} transition-all duration-300 group-hover:scale-110 group-hover:rotate-12`}),f.jsx(uu,{className:`absolute ${n?"-top-0.5 -right-0.5 w-2 h-2":"-top-0.5 -right-0.5 w-2.5 h-2.5"} text-yellow-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300`})]})}),!e&&f.jsx("button",{onClick:n?h:g,className:`${n?"p-2.5":"p-2"} text-stone-400 hover:text-stone-600 hover:bg-stone-100 rounded-xl transition-all duration-200 group`,children:n?f.jsx(ys,{className:"w-5 h-5 transition-transform duration-200 group-hover:rotate-90"}):f.jsx(Od,{className:"w-5 h-5 transition-transform duration-200 group-hover:scale-110"})})]}),f.jsxs("div",{className:`relative ${n?"p-3 space-y-2":"p-4 space-y-3"}`,children:[f.jsxs("button",{onClick:p,disabled:M,className:`
            sidebar-button hover-lift flex items-center justify-center gap-3 w-full 
            ${n?"py-4 px-3 min-h-[48px]":"py-3.5 px-4"} 
            rounded-2xl font-semibold ${n?"text-base":"text-sm"} transition-all duration-300 transform pulse-glow
            ${e?"bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-lg hover:shadow-xl hover:scale-105 active:scale-95":"bg-gradient-to-r from-orange-600 to-red-600 text-white shadow-lg hover:shadow-xl hover:scale-105 active:scale-95"}
            disabled:opacity-50 disabled:scale-100 disabled:cursor-not-allowed
            relative overflow-hidden group
            ${n?"touch-manipulation":""} /* Improve touch response on mobile */
          `,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),f.jsx(Md,{className:`${n?"w-6 h-6":"w-5 h-5"} ${e?"":"relative z-10"} transition-all duration-300 group-hover:rotate-90`}),!e&&f.jsx("span",{className:"relative z-10",children:M?"Creating...":"New Chat"}),e&&f.jsx("div",{className:"absolute left-full ml-3 px-3 py-2 bg-stone-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50",children:"Create New Chat"})]}),f.jsxs("button",{onClick:w,className:`
            flex items-center justify-center gap-3 w-full 
            ${n?"py-4 px-3 min-h-[48px]":"py-3.5 px-4"} 
            rounded-2xl font-semibold ${n?"text-base":"text-sm"} transition-all duration-300 transform
            ${e?"bg-gradient-to-br from-pink-50 to-rose-50 text-pink-600 border border-pink-200 hover:bg-gradient-to-br hover:from-pink-100 hover:to-rose-100":"bg-gradient-to-br from-pink-500 to-rose-600 text-white shadow-lg hover:shadow-xl hover:scale-105 active:scale-95"}
            relative overflow-hidden group
            ${n?"touch-manipulation":""} /* Improve touch response on mobile */
          `,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 delay-75"}),f.jsx(oa,{className:`${n?"w-6 h-6":"w-5 h-5"} ${e?"":"relative z-10"} transition-all duration-300 group-hover:scale-110`}),!e&&f.jsx("span",{className:"relative z-10",children:"My Favorites"}),e&&f.jsx("div",{className:"absolute left-full ml-3 px-3 py-2 bg-stone-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50",children:"My Favorites"})]}),f.jsxs("button",{onClick:N,className:`
            flex items-center justify-center gap-3 w-full 
            ${n?"py-4 px-3 min-h-[48px]":"py-3.5 px-4"} 
            rounded-2xl font-semibold ${n?"text-base":"text-sm"} transition-all duration-300 transform
            ${e?"bg-gradient-to-br from-blue-50 to-indigo-50 text-blue-600 border border-blue-200 hover:bg-gradient-to-br hover:from-blue-100 hover:to-indigo-100":"bg-gradient-to-br from-blue-600 to-indigo-700 text-white shadow-lg hover:shadow-xl hover:scale-105 active:scale-95"}
            relative overflow-hidden group
            ${n?"touch-manipulation":""} /* Improve touch response on mobile */
          `,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 delay-150"}),f.jsx(us,{className:`${n?"w-6 h-6":"w-5 h-5"} ${e?"":"relative z-10"} transition-all duration-300 group-hover:scale-110`}),!e&&f.jsx("span",{className:"relative z-10",children:"My Collections"}),e&&f.jsx("div",{className:"absolute left-full ml-3 px-3 py-2 bg-stone-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50",children:"My Collections"})]})]}),f.jsxs("div",{className:`relative flex-1 sidebar-scroll sidebar-scroll-no-scrollbar overflow-y-auto ${n?"px-2 pb-3":"px-3 pb-4"}`,children:[!e&&f.jsx("div",{className:`${n?"px-2 py-2":"px-3 py-2"} text-xs font-semibold text-stone-500 uppercase tracking-wider ${n?"mb-1":"mb-2"}`,children:"Recent Chats"}),o.length===0?f.jsx("div",{className:"p-4 text-center text-stone-500 text-sm",children:e?"No chats":"No chat sessions yet"}):f.jsx("div",{className:"space-y-1.5",children:o.map((X,Z)=>f.jsxs("div",{onClick:()=>y(X),className:`
                  session-item group relative flex items-center gap-3 
                  ${n?"p-3.5 min-h-[56px]":"p-3"} rounded-xl cursor-pointer 
                  transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]
                  ${X.id===u?"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 shadow-md shadow-orange-200/30 pulse-glow":"hover:bg-gradient-to-r hover:from-stone-50 hover:to-stone-100 hover:shadow-sm"}
                  ${Z===0&&e?"mt-2":""}
                  ${n?"touch-manipulation":""} /* Improve touch response on mobile */
                `,children:[X.id===u&&f.jsx("div",{className:"absolute -left-1 top-1/2 -translate-y-1/2 w-1 h-8 bg-gradient-to-b from-orange-500 to-red-500 rounded-r-full"}),f.jsxs("div",{className:"flex-shrink-0 relative",children:[f.jsx("div",{className:`
                    ${n?"w-10 h-10":"w-9 h-9"} rounded-xl flex items-center justify-center transition-all duration-300
                    ${X.id===u?"bg-gradient-to-br from-orange-500 to-red-500 text-white shadow-lg":"bg-stone-100 text-stone-500 group-hover:bg-stone-200"}
                  `,children:f.jsx(rp,{className:`${n?"w-5 h-5":"w-4.5 h-4.5"}`})}),X.id===u&&f.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 ${n?"w-3.5 h-3.5":"w-3 h-3"} bg-green-400 border-2 border-white rounded-full`})]}),!e&&f.jsx("div",{className:"flex-1 min-w-0",children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:`
                          ${n?"text-base":"text-sm"} font-semibold truncate transition-colors duration-200
                          ${X.id===u?"text-orange-700":"text-stone-700"}
                        `,children:X.title}),f.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[f.jsx(Su,{className:`${n?"w-3.5 h-3.5":"w-3 h-3"} text-stone-400`}),f.jsx("p",{className:`${n?"text-sm":"text-xs"} text-stone-500 truncate`,children:L(X.lastMessage)})]})]}),f.jsx("button",{onClick:ue=>{ue.stopPropagation(),ue.preventDefault(),console.log("Delete button clicked for session:",X.id),b(X.id,ue)},className:`opacity-40 group-hover:opacity-100 focus:opacity-100 ${n?"p-2":"p-1.5"} text-stone-400 hover:text-red-500 hover:bg-red-50 focus:bg-red-50 focus:text-red-500 rounded-lg transition-all duration-200 ml-2 cursor-pointer relative`,style:{zIndex:9999,pointerEvents:"auto"},title:"Delete chat",type:"button",children:f.jsx(nE,{className:`${n?"w-4 h-4":"w-3.5 h-3.5"}`})})]})}),e&&f.jsxs("div",{className:"absolute left-full ml-3 px-3 py-2 bg-stone-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50",children:[f.jsx("div",{className:"font-semibold",children:X.title}),f.jsx("div",{className:"text-xs text-stone-300",children:L(X.lastMessage)})]})]},X.id))})]}),f.jsx("div",{className:`relative ${n?"p-3":"p-4"} border-t border-stone-200/60 bg-white/40 backdrop-blur-sm`,children:f.jsxs("div",{className:`
          flex items-center w-full ${n?"p-3.5 min-h-[56px]":"p-3"} rounded-2xl transition-all duration-300
          ${e?"justify-center":"gap-3"}
          hover:bg-gradient-to-r hover:from-stone-50 hover:to-stone-100 hover:shadow-sm
          ${n?"touch-manipulation":""} /* Improve touch response on mobile */
        `,children:[f.jsxs("div",{className:`
            user-avatar ${n?"w-11 h-11":"w-10 h-10"} rounded-2xl flex items-center justify-center ${n?"text-base":"text-sm"}
            bg-gradient-to-tr from-orange-400 via-red-500 to-pink-500 text-white 
            shadow-lg transition-all duration-300 hover:scale-105 float-animation
            flex-shrink-0 relative overflow-hidden
          `,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),i?.displayName?.[0]?.toUpperCase()||i?.email?.[0]?.toUpperCase()||"A"]}),!e&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"text-left flex-1 overflow-hidden",children:[f.jsx("p",{className:`${n?"text-base":"text-sm"} font-semibold text-stone-700 truncate`,children:i?.displayName||"Anonymous User"}),f.jsx("p",{className:`${n?"text-sm":"text-xs"} text-stone-500 truncate`,children:i?.email||"Guest"})]}),i&&f.jsx("button",{onClick:V,className:`${n?"p-2.5":"p-2"} text-stone-400 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all duration-200 group`,title:"Sign Out",children:f.jsx(Gj,{className:`${n?"w-5 h-5":"w-4 h-4"} transition-transform duration-200 group-hover:scale-110`})})]}),e&&i&&f.jsxs("div",{className:"absolute left-full ml-3 px-3 py-2 bg-stone-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50",children:[f.jsx("div",{className:"font-semibold",children:i.displayName||"User"}),f.jsx("div",{className:"text-xs text-stone-300",children:i.email})]})]})})]});return n?f.jsx(f.Fragment,{children:f.jsxs("div",{className:`fixed inset-0 z-50 transition-all duration-300 ${s?"pointer-events-auto":"pointer-events-none"}`,children:[f.jsx("div",{className:`absolute inset-0 bg-stone-900/60 backdrop-blur-sm transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onClick:h}),f.jsx("div",{className:`
            absolute left-0 top-0 bottom-0 transition-transform duration-500 ease-out
            ${s?"translate-x-0":"-translate-x-full"}
          `,children:f.jsx(J,{})})]})}):f.jsx(J,{})},uE=()=>{const[s,e]=k.useState(null),n=k.useCallback(h=>new Promise(g=>{e({...h,resolve:g,isOpen:!0})}),[]),i=k.useCallback(()=>{e(null)},[]),o=k.useCallback((h=!0)=>{s?.resolve&&s.resolve(h),i()},[s,i]);return{showConfirmation:n,ConfirmationDialog:()=>{if(!s)return null;const{isOpen:h,title:g,message:p,type:y="warning",confirmText:b="Confirm",cancelText:w="Cancel",confirmButtonClass:N=""}=s;return f.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4",children:[f.jsx("div",{className:"absolute inset-0 bg-stone-900/60 backdrop-blur-xl transition-opacity duration-300"}),f.jsxs("div",{className:"relative bg-gradient-to-b from-white via-stone-50 to-stone-100 rounded-2xl shadow-2xl shadow-stone-900/20 border border-stone-200/60 backdrop-blur-xl max-w-md w-full transform transition-all duration-300 ease-out animate-slideUp",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 rounded-2xl pointer-events-none"}),f.jsxs("div",{className:`${y==="danger"?"bg-gradient-to-r from-red-600 to-red-700":y==="success"?"bg-gradient-to-r from-green-600 to-green-700":y==="info"?"bg-gradient-to-r from-blue-600 to-blue-700":"bg-gradient-to-r from-yellow-500 to-orange-600"} text-white p-6 rounded-t-2xl relative overflow-hidden`,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full animate-pulse duration-3000 pointer-events-none"}),f.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:`p-2 rounded-xl ${y==="danger"?"bg-red-50 border-red-200":y==="success"?"bg-green-50 border-green-200":y==="info"?"bg-blue-50 border-blue-200":"bg-yellow-50 border-yellow-200"} border`,children:[y==="danger"&&f.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),y==="success"&&f.jsx("svg",{className:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),y==="info"&&f.jsx("svg",{className:"w-6 h-6 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),y==="warning"&&f.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})]}),f.jsx("h3",{className:"text-lg font-bold tracking-wide",children:g})]}),f.jsx("button",{onClick:()=>o(!1),className:"p-1.5 hover:bg-white hover:bg-opacity-20 rounded-full transition-all duration-200 hover:scale-110",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),f.jsxs("div",{className:"p-6",children:[f.jsx("p",{className:"text-stone-600 leading-relaxed mb-6",children:p}),f.jsxs("div",{className:"flex gap-3 justify-end",children:[f.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2.5 border border-stone-300 text-stone-700 rounded-xl font-medium hover:bg-gradient-to-r hover:from-stone-50 hover:to-stone-100 transition-all duration-200 hover:scale-105",children:w}),f.jsxs("button",{onClick:()=>o(!0),className:`px-4 py-2.5 text-white rounded-xl font-semibold transition-all duration-300 flex items-center gap-2 overflow-hidden group relative ${y==="danger"?"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800":y==="success"?"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800":y==="info"?"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800":"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700"}`,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),b]})]})]})]})]})},isConfirming:!!s}},I5=()=>{const{showConfirmation:s,ConfirmationDialog:e,isConfirming:n}=uE();return{confirmDelete:k.useCallback((o="this item")=>s({title:"Delete Confirmation",message:`Are you sure you want to delete ${o}? This action cannot be undone.`,type:"danger",confirmText:"Delete",cancelText:"Cancel"}),[s]),ConfirmationDialog:e,isConfirming:n}},j5=()=>{const{showConfirmation:s,ConfirmationDialog:e,isConfirming:n}=uE();return{confirmLogout:k.useCallback(()=>s({title:"Sign Out Confirmation",message:"Are you sure you want to sign out? Your current session will be ended.",type:"warning",confirmText:"Sign Out",cancelText:"Stay Signed In"}),[s]),ConfirmationDialog:e,isConfirming:n}};function D5(){const{user:s,logout:e}=Oo(),{sessions:n,loading:i,createNewSession:o,deleteExistingSession:u}=A5(),{confirmDelete:h,ConfirmationDialog:g}=I5(),{confirmLogout:p,ConfirmationDialog:y}=j5(),[b,w]=k.useState(!1),[N,V]=k.useState(!1),[M,z]=k.useState(!1),[L,J]=k.useState(null),{messages:X,loading:Z,sending:ue,error:ye,sendMessage:ge,clearMessages:I}=R5(L),S=k.useRef(null),A=k.useRef(null),D=k.useRef(null),[O,P]=k.useState(""),[R,nt]=k.useState(!1),[ct,q]=k.useState(null),[ee,pe]=k.useState(!1),[Oe,ae]=k.useState(!1),[C,Q]=k.useState(!1),[se,de]=k.useState([]),[be,Ae]=k.useState(!1),[je,St]=k.useState([]),[ot,Tn]=k.useState(!1),[Jn,Vn]=k.useState(!1),[ws,en]=k.useState("");k.useEffect(()=>{const le=()=>{const Me=window.innerWidth<1024;z(Me),Me&&V(!1)};return le(),window.addEventListener("resize",le),()=>window.removeEventListener("resize",le)},[]),k.useEffect(()=>{S.current?.scrollIntoView({behavior:"smooth"})},[X,ue]),k.useEffect(()=>{const le=()=>{if(A.current){const{scrollTop:xt,scrollHeight:ln,clientHeight:Ot}=A.current,Sn=ln-xt-Ot>20;nt(Sn)}},Me=()=>{const xt=A.current;return xt?(console.log(" [SCROLL] Adding scroll listener to container"),xt.addEventListener("scroll",le),le(),!0):!1};return Me()||(setTimeout(Me,100),setTimeout(Me,500),setTimeout(Me,1e3)),()=>{const xt=A.current;xt&&xt.removeEventListener("scroll",le)}},[]);const jr=()=>{S.current?.scrollIntoView({behavior:"smooth"})};k.useEffect(()=>{!L&&n.length>0&&!i&&J(n[0].id)},[n,L,i]),k.useEffect(()=>{s&&Lo()},[s]),k.useEffect(()=>{C&&Ss()},[C]);const Es=()=>{setTimeout(()=>{D.current?.focus()},100)},Mo=async le=>{if(le.preventDefault(),!O.trim()||!L)return;const Me=O;P("");try{await ge(Me),Es()}catch(xt){console.error("Failed to send message:",xt)}},cr=async()=>{if(!i)try{const le=await o("New Cooking Session");le&&(J(le.id),M&&w(!1))}catch(le){console.error("Failed to create new chat:",le)}},Dr=le=>{J(le.id),M&&w(!1)},dr=async(le,Me)=>{Me.stopPropagation();const xt=n.find(Ot=>Ot.id===le);if(await h(xt?`"${xt.title}"`:"this chat"))try{if(await u(le),le===L){const Ot=n.filter(Zn=>Zn.id!==le);Ot.length>0?J(Ot[0].id):(J(null),I())}}catch(Ot){console.error("Failed to delete session:",Ot)}},kr=async()=>{if(await p())try{await e(),J(null),I()}catch(Me){console.error("Failed to logout:",Me)}},Vo=le=>{q(le),pe(!0)},Ci=()=>{pe(!1),q(null)},yt=async le=>{ae(!0);try{return await b5(le)}finally{ae(!1)}},Ts=()=>{if(!s){en("Please sign in to view your favorite recipes."),Vn(!0);return}Q(!0),Ss()},ft=()=>{Q(!1)},_t=()=>{if(!s){en("Please sign in to view and manage your recipe collections."),Vn(!0);return}window.location.href="/collections"},Wn=()=>{Vn(!1),en("")},Ii=le=>s?!0:(en(`Please sign in to use ${le}.`),Vn(!0),!1),Ss=async()=>{Ae(!0);try{const le=await aE();le.success&&de(le.favorites||[])}catch(le){console.error("Failed to load favorites:",le)}finally{Ae(!1)}},Lo=async()=>{Tn(!0);try{const le=await ug();le.success&&St(le.collections||[])}catch(le){console.error("Failed to load collections:",le)}finally{Tn(!1)}},Or=le=>{Q(!1),q(le.title||le.name),pe(!0)},Ln=le=>{de(Me=>[...Me,le])},kt=(le,Me)=>{St(xt=>xt.map(ln=>ln.id===le?{...ln,recipeCount:(ln.recipeCount||0)+1}:ln))},pn=le=>se.some(Me=>Me.title===le||Me.name===le||Me.id===le),Ft=le=>le?(le.toDate?le.toDate():new Date(le)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return i&&n.length===0&&!L?f.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-white via-stone-50 to-stone-100 font-sans text-slate-800 items-center justify-center relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-5",children:f.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,theme(colors.stone.400)_1px,transparent_0)] [background-size:24px_24px]"})}),f.jsxs("div",{className:"relative text-center",children:[f.jsxs("div",{className:"relative w-20 h-20 bg-gradient-to-br from-orange-100 to-red-100 rounded-2xl flex items-center justify-center mx-auto mb-4 border border-orange-200/60 shadow-lg shadow-orange-200/30",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-orange-200/50 to-transparent animate-pulse duration-1000 rounded-2xl"}),f.jsx(dt,{className:"w-10 h-10 text-orange-600 relative z-10 animate-pulse"})]}),f.jsx("p",{className:"text-stone-600 font-medium tracking-wide",children:"Loading your cooking sessions..."})]})]}):!L&&!i?f.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-white via-stone-50 to-stone-100 font-sans text-slate-800 overflow-hidden relative",children:[f.jsx("div",{className:"absolute inset-0 opacity-5",children:f.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,theme(colors.stone.400)_1px,transparent_0)] [background-size:24px_24px]"})}),f.jsx(fx,{isOpen:b,isCollapsed:N,isMobile:M,user:s,sessions:n,currentSessionId:L,onClose:()=>w(!1),onToggleCollapse:()=>V(!N),onCreateSession:cr,onSelectSession:Dr,onDeleteSession:dr,onShowFavorites:Ts,onShowCollections:_t,onLogout:kr,sessionsLoading:i,collapsed:N}),f.jsxs("div",{className:"flex-1 flex flex-col min-w-0 relative z-10",children:[f.jsxs("div",{className:"lg:hidden h-16 bg-gradient-to-r from-white/80 via-stone-50/80 to-white/80 backdrop-blur-xl border-b border-stone-200/60 shadow-xl shadow-stone-900/5 flex items-center justify-between px-4 sticky top-0 z-10",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:()=>w(!0),className:"p-2 -ml-2 text-stone-600 hover:bg-stone-100 rounded-xl transition-colors duration-200",children:f.jsx(Od,{className:"w-6 h-6"})}),f.jsxs("div",{className:"flex items-center gap-2 text-orange-600",children:[f.jsx(dt,{className:"w-5 h-5"}),f.jsx("span",{className:"font-bold text-lg",children:"CookMate"})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:Ts,className:"p-2 text-pink-600 bg-pink-50 hover:bg-pink-100 rounded-full transition-all duration-200 hover:scale-105",title:"My Favorites",children:f.jsx(oa,{className:"w-5 h-5"})}),f.jsx("button",{onClick:cr,disabled:i,className:"p-2 text-orange-600 bg-orange-50 hover:bg-orange-100 rounded-full disabled:opacity-50 transition-all duration-200 hover:scale-105",children:f.jsx(Md,{className:"w-5 h-5"})})]})]}),f.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:f.jsxs("div",{className:"relative text-center max-w-md",children:[f.jsxs("div",{className:"relative w-20 h-20 bg-gradient-to-br from-orange-100 to-red-100 rounded-2xl flex items-center justify-center mx-auto mb-6 border border-orange-200/60 shadow-lg shadow-orange-200/30",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-orange-200/50 to-transparent animate-pulse duration-2000 rounded-2xl"}),f.jsx(rp,{className:"w-10 h-10 text-orange-600 relative z-10"})]}),f.jsx("h2",{className:"text-2xl font-bold text-stone-800 mb-2 tracking-wide",children:"Start a New Cooking Conversation"}),f.jsx("p",{className:"text-stone-600 mb-6 leading-relaxed",children:"Create your first chat session and let CookMate help you with your culinary adventures!"}),f.jsxs("button",{onClick:cr,disabled:i,className:"relative px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-2xl font-semibold hover:from-orange-700 hover:to-red-700 transition-all duration-300 disabled:opacity-50 shadow-lg shadow-orange-200/50 hover:scale-105 overflow-hidden group",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),i?"Creating Chat...":"Start New Chat"]})]})})]})]}):f.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-white via-stone-50 to-stone-100 font-sans text-slate-800 overflow-hidden relative",children:[f.jsx("div",{className:"absolute inset-0 opacity-5",children:f.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,theme(colors.stone.400)_1px,transparent_0)] [background-size:24px_24px]"})}),f.jsx(fx,{isOpen:b,isCollapsed:N,isMobile:M,user:s,sessions:n,currentSessionId:L,onClose:()=>w(!1),onToggleCollapse:()=>V(!N),onCreateSession:cr,onSelectSession:Dr,onDeleteSession:dr,onShowFavorites:Ts,onShowCollections:_t,onLogout:kr,sessionsLoading:i,collapsed:N}),f.jsxs("div",{className:"flex-1 flex flex-col min-w-0 relative z-10",children:[f.jsxs("div",{className:"lg:hidden h-16 bg-gradient-to-r from-white/80 via-stone-50/80 to-white/80 backdrop-blur-xl border-b border-stone-200/60 shadow-xl shadow-stone-900/5 flex items-center justify-between px-4 sticky top-0 z-10",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:()=>w(!0),className:"p-2 -ml-2 text-stone-600 hover:bg-stone-100 rounded-xl transition-colors duration-200",children:f.jsx(Od,{className:"w-6 h-6"})}),f.jsxs("div",{className:"flex items-center gap-2 text-orange-600",children:[f.jsx(dt,{className:"w-5 h-5"}),f.jsx("span",{className:"font-bold text-lg",children:"CookMate"})]})]}),f.jsx("button",{onClick:cr,disabled:i,className:"p-2 text-orange-600 bg-orange-50 hover:bg-orange-100 rounded-full disabled:opacity-50 transition-all duration-200 hover:scale-105",children:f.jsx(Md,{className:"w-5 h-5"})})]}),f.jsx("div",{ref:A,className:"flex-1 overflow-y-auto p-4 lg:p-8 scroll-smooth",children:f.jsxs("div",{className:"max-w-3xl mx-auto space-y-8 pb-4",children:[Z?f.jsx("div",{className:"flex items-center justify-center py-8",children:f.jsx(dt,{className:"w-8 h-8 text-orange-600 animate-pulse"})}):X.length===0?f.jsxs("div",{className:"text-center py-8",children:[f.jsx(rp,{className:"w-12 h-12 text-orange-600 mx-auto mb-4"}),f.jsx("p",{className:"text-stone-600",children:"Start your cooking conversation!"})]}):X.map(le=>f.jsxs("div",{className:`flex gap-4 ${le.isUser?"flex-row-reverse":""} animate-slideUp`,children:[f.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center shadow-sm ${le.isUser?"bg-stone-800 text-white":"bg-white border border-stone-200 text-orange-600"}`,children:le.isUser?s?.displayName?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"A":f.jsx(ux,{className:"w-5 h-5 fill-orange-500"})}),f.jsxs("div",{className:`flex flex-col max-w-[85%] lg:max-w-[75%] ${le.isUser?"items-end":"items-start"}`,children:[f.jsx("div",{className:`px-5 py-4 text-[15px] leading-relaxed shadow-sm whitespace-pre-wrap ${le.isUser?"bg-orange-600 text-white rounded-2xl rounded-tr-sm":"bg-white border border-stone-200 text-stone-700 rounded-2xl rounded-tl-sm"}`,children:le.text}),!le.isUser&&le.detectedRecipes&&le.detectedRecipes.length>0&&f.jsxs("div",{className:"mt-4 space-y-3 w-full",children:[f.jsx("h4",{className:"text-sm font-semibold text-stone-700 mb-3",children:"Click on a recipe for full details:"}),console.log(" [FRONTEND] Rendering",le.detectedRecipes.length,"recipe cards for message:",le.detectedRecipes),le.detectedRecipes.map((Me,xt)=>f.jsx(Vd,{recipe:Me,onClick:Vo,isLoading:Oe,isFavorited:pn(Me),collections:je,onAddToFavorites:Ln,onAddToCollection:kt,fetchRecipeDetails:yt,user:s,requireAuth:Ii},`${le.id}_recipe_${xt}_${typeof Me=="string"?Me:Me.title}`))]}),f.jsx("span",{className:"text-[11px] text-stone-400 mt-1.5 px-1 font-medium",children:Ft(le.timestamp)})]})]},le.id)),ue&&f.jsxs("div",{className:"flex gap-4 animate-slideUp",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-white border border-stone-200 flex items-center justify-center",children:f.jsx(ux,{className:"w-5 h-5 text-orange-500"})}),f.jsx("div",{className:"px-5 py-4 bg-white border border-stone-200 rounded-2xl rounded-tl-sm text-stone-500 text-sm italic",children:"Thinking..."})]}),ye&&f.jsxs("div",{className:"flex gap-4 animate-slideUp",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 border border-red-200 flex items-center justify-center",children:f.jsx(ys,{className:"w-5 h-5 text-red-500"})}),f.jsxs("div",{className:"px-5 py-4 bg-red-50 border border-red-200 rounded-2xl rounded-tl-sm text-red-700 text-sm",children:["Error: ",ye]})]}),f.jsx("div",{ref:S})]})}),R&&f.jsxs("div",{className:`
              fixed bottom-6 right-6 z-50 transition-all duration-500 ease-in-out transform
              ${R?"opacity-100 translate-y-0 scale-100":"opacity-0 translate-y-4 scale-95 pointer-events-none"}
            `,children:[f.jsxs("button",{onClick:jr,className:`\r
                group relative overflow-hidden\r
                bg-gradient-to-br from-blue-600 to-blue-700 \r
                hover:from-blue-500 hover:to-blue-600 \r
                text-white p-4 rounded-2xl shadow-xl \r
                transform hover:scale-105 hover:-translate-y-1 \r
                transition-all duration-300 ease-out\r
                focus:outline-none focus:ring-4 focus:ring-blue-300 focus:ring-opacity-50\r
                backdrop-blur-sm border border-blue-400/20\r
              `,"aria-label":"Scroll to bottom",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 ease-out"}),f.jsxs("div",{className:"relative z-10 flex items-center space-x-2",children:[f.jsx(yj,{className:"w-5 h-5 transition-transform group-hover:translate-y-0.5"}),f.jsx("span",{className:"text-sm font-medium hidden sm:block",children:"Bottom"})]}),f.jsx("div",{className:"absolute inset-0 rounded-2xl opacity-0 group-active:opacity-100 transition-opacity duration-150",children:f.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-2xl animate-ping"})})]}),f.jsxs("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-1 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap",children:["Scroll to bottom",f.jsx("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]}),f.jsx("div",{className:"p-4 lg:p-6 bg-gradient-to-t from-stone-50 via-stone-50 to-transparent",children:f.jsx("div",{className:"max-w-3xl mx-auto relative",children:f.jsxs("form",{onSubmit:Mo,className:"relative flex items-center bg-white rounded-full shadow-lg border border-stone-200 focus-within:ring-2 focus-within:ring-orange-500/20 focus-within:border-orange-500 transition-all",children:[f.jsx("input",{ref:D,type:"text",value:O,onChange:le=>P(le.target.value),placeholder:"Type a message...",className:"flex-1 py-4 pl-6 pr-14 bg-transparent border-none focus:ring-0 focus:outline-none placeholder:text-stone-400 text-stone-700",disabled:!L||ue}),f.jsx("div",{className:"absolute right-2 p-1",children:f.jsx("button",{type:"submit",disabled:!O.trim()||ue||!L,className:`p-2.5 rounded-full transition-all flex items-center justify-center ${O.trim()&&L&&!ue?"bg-orange-600 text-white hover:bg-orange-700":"bg-stone-100 text-stone-300"}`,children:f.jsx(Zj,{className:"w-4 h-4 ml-0.5"})})})]})})}),f.jsx(C5,{recipeName:ct,isOpen:ee,onClose:Ci,fetchRecipeDetails:yt,onAddToFavorites:Ln}),C&&f.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[f.jsx("div",{className:"absolute inset-0 bg-stone-900/60 backdrop-blur-xl",onClick:ft}),f.jsxs("div",{className:"relative bg-gradient-to-b from-white via-stone-50 to-stone-100 rounded-2xl shadow-2xl shadow-stone-900/10 border border-stone-200/60 backdrop-blur-xl max-w-4xl w-full max-h-[90vh] overflow-hidden transition-all duration-500 ease-out",children:[f.jsxs("div",{className:"bg-gradient-to-r from-pink-600 via-red-600 to-pink-700 text-white p-6 relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full animate-pulse duration-3000 pointer-events-none"}),f.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(oa,{className:"w-8 h-8 fill-white"}),f.jsx("h2",{className:"text-2xl font-bold tracking-wide",children:"My Favorite Recipes"})]}),f.jsx("button",{onClick:ft,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-all duration-200 hover:scale-110",children:f.jsx(ys,{className:"w-6 h-6"})})]})]}),f.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-140px)] p-6",children:be?f.jsxs("div",{className:"flex items-center justify-center py-8",children:[f.jsx("div",{className:"w-8 h-8 border-2 border-pink-600 border-t-transparent rounded-full animate-spin"}),f.jsx("span",{className:"ml-3 text-stone-600 font-medium",children:"Loading favorites..."})]}):se.length===0?f.jsxs("div",{className:"text-center py-8",children:[f.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-pink-100 to-red-100 rounded-2xl flex items-center justify-center mx-auto mb-4 border border-pink-200/60",children:f.jsx(oa,{className:"w-10 h-10 text-stone-300"})}),f.jsx("h3",{className:"text-xl font-semibold text-stone-700 mb-2 tracking-wide",children:"No favorites yet"}),f.jsx("p",{className:"text-stone-500 leading-relaxed",children:"Start saving recipes you love by clicking the heart icon!"})]}):f.jsxs("div",{className:"space-y-4",children:[f.jsxs("h3",{className:"text-lg font-semibold text-stone-700 mb-4 tracking-wide",children:["You have ",se.length," favorite recipe",se.length!==1?"s":""]}),se.map((le,Me)=>f.jsx(Vd,{recipe:le,onClick:Or,isLoading:!1,isFavorited:!0,collections:je,onAddToFavorites:Ln,onAddToCollection:kt,fetchRecipeDetails:yt,user:s,requireAuth:Ii},`favorites_recipe_${Me}_${le.id||le.title||le.name}`))]})})]})]})]}),f.jsx(cg,{isOpen:Jn,onClose:Wn,message:ws}),f.jsx(g,{}),f.jsx(y,{})]})}const k5=({isOpen:s,onClose:e,onConfirm:n,title:i,message:o,type:u="warning",confirmText:h="Confirm",cancelText:g="Cancel",confirmButtonClass:p="",loading:y=!1})=>{if(!s)return null;const w=(()=>{switch(u){case"danger":return{icon:f.jsx(jj,{className:"w-6 h-6 text-red-500"}),headerBg:"bg-gradient-to-r from-red-600 to-red-700",buttonBg:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800",iconBg:"bg-red-50 border-red-200"};case"success":return{icon:f.jsx(yi,{className:"w-6 h-6 text-green-500"}),headerBg:"bg-gradient-to-r from-green-600 to-green-700",buttonBg:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",iconBg:"bg-green-50 border-green-200"};case"info":return{icon:f.jsx(Pj,{className:"w-6 h-6 text-blue-500"}),headerBg:"bg-gradient-to-r from-blue-600 to-blue-700",buttonBg:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",iconBg:"bg-blue-50 border-blue-200"};default:return{icon:f.jsx(a5,{className:"w-6 h-6 text-yellow-500"}),headerBg:"bg-gradient-to-r from-yellow-500 to-orange-600",buttonBg:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700",iconBg:"bg-yellow-50 border-yellow-200"}}})(),N=M=>{M.target===M.currentTarget&&e()},V=()=>{n&&n()};return f.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4",onClick:N,children:[f.jsx("div",{className:"absolute inset-0 bg-stone-900/60 backdrop-blur-xl transition-opacity duration-300"}),f.jsxs("div",{className:"relative bg-gradient-to-b from-white via-stone-50 to-stone-100 rounded-2xl shadow-2xl shadow-stone-900/20 border border-stone-200/60 backdrop-blur-xl max-w-md w-full transform transition-all duration-300 ease-out animate-slideUp",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 rounded-2xl pointer-events-none"}),f.jsxs("div",{className:`${w.headerBg} text-white p-6 rounded-t-2xl relative overflow-hidden`,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full animate-pulse duration-3000 pointer-events-none"}),f.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`p-2 rounded-xl ${w.iconBg}`,children:w.icon}),f.jsx("h3",{className:"text-lg font-bold tracking-wide",children:i})]}),f.jsx("button",{onClick:e,className:"p-1.5 hover:bg-white hover:bg-opacity-20 rounded-full transition-all duration-200 hover:scale-110",children:f.jsx(ys,{className:"w-5 h-5"})})]})]}),f.jsxs("div",{className:"p-6",children:[f.jsx("p",{className:"text-stone-600 leading-relaxed mb-6",children:o}),f.jsxs("div",{className:"flex gap-3 justify-end",children:[f.jsx("button",{onClick:e,disabled:y,className:"px-4 py-2.5 border border-stone-300 text-stone-700 rounded-xl font-medium hover:bg-gradient-to-r hover:from-stone-50 hover:to-stone-100 transition-all duration-200 hover:scale-105 disabled:opacity-50",children:g}),f.jsxs("button",{onClick:V,disabled:y,className:`px-4 py-2.5 text-white rounded-xl font-semibold transition-all duration-300 disabled:opacity-50 flex items-center gap-2 overflow-hidden group relative ${w.buttonBg} ${p}`,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),y?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Processing..."]}):f.jsx(f.Fragment,{children:h})]})]})]})]})]})},O5=({onCollectionSelect:s,selectedCollectionId:e,onCreateCollection:n,onEditCollection:i,onCollectionRefresh:o})=>{const[u,h]=k.useState([]),[g,p]=k.useState(!1),[y,b]=k.useState({isOpen:!1,collectionId:null,collectionName:""}),w=async()=>{p(!0);try{const M=await ug();M&&M.collections?h(M.collections):(console.error(" Unexpected response format:",M),h([]))}catch(M){console.error(" Failed to load collections:",M),h([])}finally{p(!1)}};k.useEffect(()=>{w()},[]);const N=M=>{b({isOpen:!0,collectionId:M.id,collectionName:M.name})},V=async()=>{const{collectionId:M}=y;if(M)try{const z=await S5(M);z&&z.message?(h(L=>L.filter(J=>J.id!==M)),e===M&&s(null),o&&o(),console.log(" Collection deleted successfully:",z.message)):console.error(" Unexpected response format:",z)}catch(z){console.error(" Failed to delete collection:",z)}finally{b({isOpen:!1,collectionId:null,collectionName:""})}};return g?f.jsx("div",{className:"bg-gradient-to-b from-white via-stone-50 to-stone-100 rounded-2xl border border-stone-200/60 p-6 shadow-2xl shadow-stone-900/10 backdrop-blur-xl transition-all duration-500 ease-out",children:f.jsxs("div",{className:"animate-pulse space-y-4",children:[f.jsx("div",{className:"h-4 bg-stone-200/70 rounded w-1/4"}),f.jsx("div",{className:"space-y-2",children:[1,2,3].map(M=>f.jsx("div",{className:"h-12 bg-gradient-to-r from-stone-200/70 to-stone-100/70 rounded-xl"},M))})]})}):f.jsxs("div",{className:"bg-gradient-to-b from-white via-stone-50 to-stone-100 rounded-2xl border border-stone-200/60 p-6 shadow-2xl shadow-stone-900/10 backdrop-blur-xl transition-all duration-500 ease-out",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("h3",{className:"text-lg font-semibold text-stone-800 flex items-center gap-2",children:[f.jsx(us,{className:"w-5 h-5 text-orange-600"}),"My Collections"]}),f.jsxs("button",{onClick:n,className:"relative flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-2xl hover:from-orange-700 hover:to-red-700 transition-all duration-300 text-sm font-semibold overflow-hidden group hover:shadow-lg hover:scale-105",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),f.jsx(Md,{className:"w-4 h-4 relative z-10"}),"New Collection"]})]}),u.length===0?f.jsxs("div",{className:"text-center py-8",children:[f.jsx(us,{className:"w-12 h-12 text-stone-300 mx-auto mb-3"}),f.jsx("p",{className:"text-stone-500 mb-4",children:"No collections yet"}),f.jsx("button",{onClick:()=>setShowCreateModal(!0),className:"text-orange-600 hover:text-orange-700 font-medium",children:"Create your first collection"})]}):f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{onClick:()=>s(null),className:`relative flex items-center justify-between p-3 rounded-xl border transition-all duration-300 cursor-pointer hover:scale-[1.02] group overflow-hidden ${e===null?"border-orange-300 bg-gradient-to-r from-orange-50 to-red-50 shadow-md shadow-orange-200/30":"border-stone-200 hover:border-stone-300 hover:bg-gradient-to-r hover:from-stone-50 hover:to-stone-100"}`,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:"#FF6B6B"},children:f.jsx(us,{className:"w-4 h-4 text-white"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-stone-800",children:"All Recipes"}),f.jsx("p",{className:"text-sm text-stone-500",children:"View all saved recipes"})]})]}),e===null&&f.jsx(yi,{className:"w-5 h-5 text-orange-600"})]}),u.map(M=>f.jsxs("div",{className:`relative flex items-center justify-between p-3 rounded-xl border transition-all duration-300 hover:scale-[1.02] group overflow-hidden ${e===M.id?"border-orange-300 bg-gradient-to-r from-orange-50 to-red-50 shadow-md shadow-orange-200/30":"border-stone-200 hover:border-stone-300 hover:bg-gradient-to-r hover:from-stone-50 hover:to-stone-100"}`,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>s(M.id),children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:M.color},children:f.jsx(us,{className:"w-4 h-4 text-white"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-stone-800",children:M.name}),f.jsxs("p",{className:"text-sm text-stone-500",children:[M.recipeCount||0," recipes",M.description&&`  ${M.description}`]})]})]})}),f.jsxs("div",{className:"flex items-center gap-2",children:[e===M.id&&f.jsx(yi,{className:"w-5 h-5 text-orange-600"}),f.jsx("button",{onClick:z=>{z.stopPropagation(),i&&i(M)},className:"p-2 text-stone-400 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-200 hover:scale-110",title:"Edit collection",children:f.jsx(n5,{className:"w-4 h-4"})}),f.jsx("button",{onClick:z=>{z.stopPropagation(),N(M)},className:"p-2 text-stone-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all duration-200 hover:scale-110",title:"Delete collection",children:f.jsx(nE,{className:"w-4 h-4"})})]})]},M.id))]}),f.jsx(k5,{isOpen:y.isOpen,onClose:()=>b({isOpen:!1,collectionId:null,collectionName:""}),onConfirm:V,title:"Delete Collection",message:`Are you sure you want to delete the collection "${y.collectionName}"? This action cannot be undone and all recipes in this collection will be removed.`,type:"danger",confirmText:"Delete",cancelText:"Cancel"})]})},M5=()=>{const s=va(),{user:e,loading:n}=Oo(),[i,o]=k.useState(null),[u,h]=k.useState([]),[g,p]=k.useState(!1),[y,b]=k.useState(null),[w,N]=k.useState(!1);if(n)return f.jsx(sE,{});if(!e)return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-white via-stone-50 to-stone-100 font-sans text-stone-800 relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-5",children:f.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,theme(colors.stone.400)_1px,transparent_0)] [background-size:24px_24px]"})}),f.jsx("div",{className:"bg-gradient-to-r from-white/80 via-stone-50/80 to-white/80 backdrop-blur-xl border-b border-stone-200/60 shadow-xl shadow-stone-900/5 relative z-10",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx("div",{className:"flex items-center justify-between py-6",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:()=>s("/home"),className:"p-2 hover:bg-stone-100 rounded-xl transition-all duration-200 hover:scale-110 group",children:f.jsx(kd,{className:"w-5 h-5 text-stone-600 group-hover:-translate-x-1 transition-transform duration-200"})}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-200/50 overflow-hidden group relative",children:f.jsx(dt,{className:"w-6 h-6 text-white relative z-10"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-stone-900 tracking-wide",children:"Recipe Collections"}),f.jsx("p",{className:"text-stone-600",children:"Organize your favorite recipes into custom collections"})]})]})]})})})}),f.jsx("div",{className:"relative z-10 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:f.jsxs("div",{className:"bg-gradient-to-b from-white/80 via-stone-50/80 to-stone-100/80 backdrop-blur-xl rounded-2xl shadow-2xl shadow-stone-900/10 border border-stone-200/60 p-12 text-center relative overflow-hidden group transition-all duration-500 ease-out hover:shadow-3xl hover:shadow-stone-900/15",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none rounded-2xl"}),f.jsxs("div",{className:"relative z-10",children:[f.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-8 shadow-lg shadow-blue-200/50",children:f.jsx(dt,{className:"w-12 h-12 text-white"})}),f.jsx("h2",{className:"text-3xl font-bold text-stone-900 mb-4 tracking-wide",children:"Welcome to Recipe Collections"}),f.jsx("p",{className:"text-stone-600 mb-8 max-w-lg mx-auto leading-relaxed text-lg",children:'Sign in to create and manage your personalized recipe collections. Organize your favorite recipes into categories like "Quick Dinners", "Healthy Meals", or "My Fried Recipes".'}),f.jsxs("button",{onClick:()=>N(!0),className:"relative px-8 py-4 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-2xl font-semibold hover:from-orange-700 hover:to-red-700 transition-all duration-300 shadow-lg shadow-orange-200/50 hover:scale-105 overflow-hidden group",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),f.jsx("span",{className:"relative z-10",children:"Sign In to Get Started"})]})]})]})}),f.jsx(cg,{isOpen:w,onClose:()=>N(!1),message:"To access and manage your recipe collections, please sign in to your account or create a new one."})]});const[V,M]=k.useState(!1),[z,L]=k.useState(!1),[J,X]=k.useState(null),[Z,ue]=k.useState({name:"",description:"",color:"#FF6B6B",icon:"folder"}),ye=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F"],ge=()=>{ue({name:"",description:"",color:"#FF6B6B",icon:"folder"})},I=async q=>{if(q.preventDefault(),!!Z.name.trim())try{const ee=await E5(Z);ee&&ee.collection?(i&&R(i),M(!1),ge(),console.log(" Collection created successfully:",ee.message)):console.error(" Unexpected response format:",ee)}catch(ee){console.error(" Failed to create collection:",ee)}},S=async q=>{if(q.preventDefault(),!(!J||!Z.name.trim()))try{const ee=await T5(J.id,Z);ee&&ee.collection?(i&&R(i),L(!1),X(null),ge(),console.log(" Collection updated successfully:",ee.message)):console.error(" Unexpected response format:",ee)}catch(ee){console.error(" Failed to update collection:",ee)}},A=q=>{X(q),ue({name:q.name,description:q.description||"",color:q.color,icon:q.icon}),L(!0)},D=()=>{M(!1),ge()},O=()=>{L(!1),X(null),ge()},P=()=>{i&&R(i)},R=async q=>{if(!q){h([]),b(null);return}p(!0);try{const ee=await N5(q);ee.success&&(h(ee.recipes||[]),b(ee.collection))}catch(ee){console.error("Failed to load collection recipes:",ee),h([]),b(null)}finally{p(!1)}},nt=q=>{o(q),R(q)};k.useEffect(()=>{i&&R(i)},[i]);const ct=q=>{console.log("Recipe clicked:",q)};return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-white via-stone-50 to-stone-100 font-sans text-stone-800 relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-5",children:f.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,theme(colors.stone.400)_1px,transparent_0)] [background-size:24px_24px]"})}),f.jsx("div",{className:"absolute top-20 right-20 w-40 h-40 bg-gradient-to-br from-blue-200 to-indigo-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob"}),f.jsx("div",{className:"absolute bottom-20 left-20 w-40 h-40 bg-gradient-to-br from-purple-200 to-pink-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000"}),f.jsx("div",{className:"bg-gradient-to-r from-white/80 via-stone-50/80 to-white/80 backdrop-blur-xl border-b border-stone-200/60 shadow-xl shadow-stone-900/5 relative z-10",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex items-center justify-between py-6",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:()=>s("/home"),className:"p-2 hover:bg-stone-100 rounded-xl transition-all duration-200 hover:scale-110 group",children:f.jsx(kd,{className:"w-5 h-5 text-stone-600 group-hover:-translate-x-1 transition-transform duration-200"})}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-200/50 overflow-hidden group relative",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),f.jsx(dt,{className:"w-6 h-6 text-white relative z-10"})]}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-stone-900 tracking-wide",children:"Recipe Collections"}),f.jsx("p",{className:"text-stone-600",children:"Organize your favorite recipes into custom collections"})]})]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-stone-600",children:[f.jsx(og,{className:"w-4 h-4"}),f.jsxs("span",{children:["Signed in as ",e?.displayName||e?.email]})]})]})})}),f.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[f.jsx("div",{className:"lg:col-span-1",children:f.jsxs("div",{className:"bg-gradient-to-b from-white/80 via-stone-50/80 to-stone-100/80 backdrop-blur-xl rounded-2xl shadow-2xl shadow-stone-900/10 border border-stone-200/60 p-6 relative overflow-hidden group transition-all duration-500 ease-out hover:shadow-3xl hover:shadow-stone-900/15",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none rounded-2xl"}),f.jsx(O5,{selectedCollectionId:i,onCollectionSelect:nt,onCreateCollection:()=>M(!0),onEditCollection:A,onCollectionRefresh:P})]})}),f.jsx("div",{className:"lg:col-span-2",children:i?f.jsxs("div",{className:"bg-gradient-to-b from-white/80 via-stone-50/80 to-stone-100/80 backdrop-blur-xl rounded-2xl shadow-2xl shadow-stone-900/10 border border-stone-200/60 p-6 relative overflow-hidden group transition-all duration-500 ease-out hover:shadow-3xl hover:shadow-stone-900/15",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none rounded-2xl"}),f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"mb-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[f.jsxs("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center shadow-lg relative overflow-hidden group",style:{backgroundColor:y?.color||"#FF6B6B"},children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),f.jsx(dt,{className:"w-6 h-6 text-white relative z-10"})]}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold text-stone-900 tracking-wide",children:y?.name||"Collection"}),f.jsx("p",{className:"text-stone-600",children:y?.description||"No description available"})]})]}),f.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200/60 text-blue-700 text-sm font-medium",children:[f.jsx(Su,{className:"w-4 h-4 mr-1"}),u.length," recipe",u.length!==1?"s":""," in this collection"]})]}),g?f.jsx("div",{className:"space-y-4",children:[1,2,3].map(q=>f.jsx(Vd,{recipe:`Loading recipe ${q}`,isLoading:!0},q))}):u.length>0?f.jsx("div",{className:"space-y-4",children:u.map((q,ee)=>f.jsx(Vd,{recipe:q.title||q.name||`Recipe ${ee+1}`,onClick:ct,isFavorited:!0},q.id||ee))}):f.jsxs("div",{className:"text-center py-12",children:[f.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-stone-100 to-stone-200 rounded-2xl flex items-center justify-center mx-auto mb-4 border border-stone-300",children:f.jsx(dt,{className:"w-10 h-10 text-stone-400"})}),f.jsx("h3",{className:"text-xl font-bold text-stone-800 mb-2 tracking-wide",children:"No recipes yet"}),f.jsx("p",{className:"text-stone-600 max-w-md mx-auto",children:"This collection is empty. Start adding recipes to organize them!"})]})]})]}):f.jsxs("div",{className:"bg-gradient-to-b from-white/80 via-stone-50/80 to-stone-100/80 backdrop-blur-xl rounded-2xl shadow-2xl shadow-stone-900/10 border border-stone-200/60 p-8 text-center relative overflow-hidden group transition-all duration-500 ease-out hover:shadow-3xl hover:shadow-stone-900/15",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none rounded-2xl"}),f.jsxs("div",{className:"relative z-10",children:[f.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-blue-200/50",children:f.jsx(dt,{className:"w-10 h-10 text-white"})}),f.jsx("h3",{className:"text-2xl font-bold text-stone-900 mb-3 tracking-wide",children:"Welcome to Collections"}),f.jsx("p",{className:"text-stone-600 mb-8 max-w-lg mx-auto leading-relaxed",children:'Organize your favorite recipes into custom collections like "Quick Dinners", "Healthy Meals", or "My Fried Recipes".'}),f.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 text-left max-w-lg mx-auto border border-blue-200/60 shadow-lg shadow-blue-200/30",children:[f.jsx("h4",{className:"font-bold text-stone-800 mb-3 tracking-wide",children:"How to get started:"}),f.jsxs("ol",{className:"text-sm text-stone-700 space-y-2 list-decimal list-inside",children:[f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),"Create a new collection using the sidebar"]}),f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),"Give it a name and choose a color"]}),f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),"Add recipes to your collection from recipe details"]}),f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"4"}),"Click on any collection to view its recipes"]})]})]})]})]})})]})}),V&&f.jsxs("div",{className:"fixed inset-0 z-[60] flex items-start justify-center p-4 overflow-y-auto",children:[f.jsx("div",{className:"absolute inset-0 bg-stone-900/60 backdrop-blur-sm",onClick:D}),f.jsxs("div",{className:"relative bg-gradient-to-b from-white via-stone-50 to-stone-100 rounded-2xl shadow-2xl shadow-stone-900/10 border border-stone-200/60 backdrop-blur-xl max-w-md w-full p-6 transition-all duration-500 ease-out my-8 max-h-[calc(100vh-4rem)] overflow-y-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-stone-800",children:"Create New Collection"}),f.jsx("button",{onClick:D,className:"p-1 hover:bg-stone-100 rounded",children:f.jsx(ys,{className:"w-5 h-5"})})]}),f.jsxs("form",{onSubmit:I,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Collection Name *"}),f.jsx("input",{type:"text",value:Z.name,onChange:q=>ue(ee=>({...ee,name:q.target.value})),className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., My Fried Recipes",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Description"}),f.jsx("textarea",{value:Z.description,onChange:q=>ue(ee=>({...ee,description:q.target.value})),className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Optional description",rows:3})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Color"}),f.jsx("div",{className:"flex gap-2 flex-wrap",children:ye.map(q=>f.jsx("button",{type:"button",onClick:()=>ue(ee=>({...ee,color:q})),className:`w-8 h-8 rounded-full border-2 ${Z.color===q?"border-stone-400":"border-stone-200"}`,style:{backgroundColor:q}},q))})]}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx("button",{type:"button",onClick:D,className:"flex-1 px-4 py-2.5 border border-stone-300 text-stone-700 rounded-xl hover:bg-stone-50 transition-all duration-200 font-medium hover:scale-105",children:"Cancel"}),f.jsxs("button",{type:"submit",className:"relative flex-1 px-4 py-2.5 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-xl hover:from-orange-700 hover:to-red-700 transition-all duration-200 font-semibold hover:scale-105 overflow-hidden group",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),"Create"]})]})]})]})]}),z&&J&&f.jsxs("div",{className:"fixed inset-0 z-[60] flex items-start justify-center p-4 overflow-y-auto",children:[f.jsx("div",{className:"absolute inset-0 bg-stone-900/60 backdrop-blur-sm",onClick:O}),f.jsxs("div",{className:"relative bg-gradient-to-b from-white via-stone-50 to-stone-100 rounded-2xl shadow-2xl shadow-stone-900/10 border border-stone-200/60 backdrop-blur-xl max-w-md w-full p-6 transition-all duration-500 ease-out my-8 max-h-[calc(100vh-4rem)] overflow-y-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-stone-800",children:"Edit Collection"}),f.jsx("button",{onClick:O,className:"p-1 hover:bg-stone-100 rounded",children:f.jsx(ys,{className:"w-5 h-5"})})]}),f.jsxs("form",{onSubmit:S,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Collection Name *"}),f.jsx("input",{type:"text",value:Z.name,onChange:q=>ue(ee=>({...ee,name:q.target.value})),className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Description"}),f.jsx("textarea",{value:Z.description,onChange:q=>ue(ee=>({...ee,description:q.target.value})),className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",rows:3})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Color"}),f.jsx("div",{className:"flex gap-2 flex-wrap",children:ye.map(q=>f.jsx("button",{type:"button",onClick:()=>ue(ee=>({...ee,color:q})),className:`w-8 h-8 rounded-full border-2 ${Z.color===q?"border-stone-400":"border-stone-200"}`,style:{backgroundColor:q}},q))})]}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx("button",{type:"button",onClick:O,className:"flex-1 px-4 py-2.5 border border-stone-300 text-stone-700 rounded-xl hover:bg-stone-50 transition-all duration-200 font-medium hover:scale-105",children:"Cancel"}),f.jsxs("button",{type:"submit",className:"relative flex-1 px-4 py-2.5 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-xl hover:from-orange-700 hover:to-red-700 transition-all duration-200 font-semibold hover:scale-105 overflow-hidden group",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),"Update"]})]})]})]})]})]})};function V5(){const[s,e]=k.useState(!1),[n,i]=k.useState(""),[o,u]=k.useState(""),h=va(),g=async p=>{p.preventDefault(),e(!0);try{await Jx(sa,n,o),h("/home")}catch(y){console.error("Login Error:",y)}finally{e(!1)}};return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-white via-stone-50 to-stone-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8 font-sans relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-5",children:f.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,theme(colors.stone.400)_1px,transparent_0)] [background-size:24px_24px]"})}),f.jsx("div",{className:"absolute top-20 right-20 w-32 h-32 bg-gradient-to-br from-orange-200 to-red-200 rounded-full mix-blend-multiply filter blur-2xl opacity-40 animate-blob"}),f.jsx("div",{className:"absolute bottom-20 left-20 w-32 h-32 bg-gradient-to-br from-amber-200 to-yellow-200 rounded-full mix-blend-multiply filter blur-2xl opacity-40 animate-blob animation-delay-2000"}),f.jsxs("div",{className:"relative z-10",children:[f.jsx("div",{className:"absolute top-6 left-6",children:f.jsxs("a",{href:"/",className:"flex items-center gap-2 text-stone-500 hover:text-orange-600 transition-all duration-200 text-sm font-medium group hover:scale-105",children:[f.jsx(kd,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform duration-200"}),"Back to Home"]})}),f.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[f.jsxs("div",{className:"flex justify-center items-center gap-3 mb-6 animate-fadeIn",children:[f.jsxs("div",{className:"relative w-12 h-12 bg-gradient-to-br from-orange-500 via-orange-600 to-red-600 rounded-2xl flex items-center justify-center shadow-2xl shadow-orange-200/50 overflow-hidden group",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),f.jsx(dt,{className:"w-7 h-7 text-white relative z-10"})]}),f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"text-3xl font-bold gradient-text tracking-tight",children:"CookMate"}),f.jsx(uu,{className:"absolute -top-1 -right-2 w-4 h-4 text-yellow-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]}),f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h2",{className:"text-4xl font-extrabold text-stone-900 tracking-tight mb-2",children:"Welcome back"}),f.jsx("p",{className:"text-stone-600",children:"Sign in to continue your culinary journey"})]})]}),f.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:f.jsxs("div",{className:"bg-gradient-to-b from-white/80 via-stone-50/80 to-stone-100/80 backdrop-blur-xl py-10 px-8 shadow-2xl shadow-stone-900/10 border border-stone-200/60 sm:rounded-3xl sm:px-12 relative overflow-hidden group transition-all duration-500 ease-out hover:shadow-3xl hover:shadow-stone-900/15",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-orange-400 via-red-500 to-pink-500 rounded-t-3xl"}),f.jsxs("form",{className:"space-y-6",onSubmit:g,children:[f.jsxs("div",{className:"space-y-5",children:[f.jsxs("div",{className:"animate-slideUp",children:[f.jsx("label",{className:"block text-xs font-bold text-stone-600 uppercase tracking-wider mb-2",children:"Email address"}),f.jsxs("div",{className:"relative group",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:f.jsx(tE,{className:"h-5 w-5 text-stone-400 group-focus-within:text-orange-500 transition-colors duration-200"})}),f.jsx("input",{type:"email",required:!0,value:n,onChange:p=>i(p.target.value),className:"block w-full pl-12 pr-4 py-3.5 border border-stone-200/60 rounded-2xl leading-6 bg-white/50 backdrop-blur-sm text-stone-900 placeholder-stone-400 focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 transition-all duration-300 hover:border-stone-300 focus:scale-[1.02] hover:scale-[1.01]",placeholder:"you@example.com"})]})]}),f.jsxs("div",{className:"animate-slideUp delay-75",children:[f.jsx("label",{className:"block text-xs font-bold text-stone-600 uppercase tracking-wider mb-2",children:"Password"}),f.jsxs("div",{className:"relative group",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:f.jsx(og,{className:"h-5 w-5 text-stone-400 group-focus-within:text-orange-500 transition-colors duration-200"})}),f.jsx("input",{type:"password",required:!0,value:o,onChange:p=>u(p.target.value),className:"block w-full pl-12 pr-4 py-3.5 border border-stone-200/60 rounded-2xl leading-6 bg-white/50 backdrop-blur-sm text-stone-900 placeholder-stone-400 focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 transition-all duration-300 hover:border-stone-300 focus:scale-[1.02] hover:scale-[1.01]",placeholder:""})]})]})]}),f.jsx("div",{className:"animate-slideUp delay-150",children:f.jsxs("button",{type:"submit",disabled:s,className:"group relative w-full flex justify-center items-center gap-3 py-4 px-6 border border-transparent rounded-2xl shadow-2xl shadow-orange-200/50 text-white font-bold text-base bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-all duration-300 transform hover:scale-[1.02] hover:shadow-3xl hover:shadow-orange-300/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),s?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),f.jsx("span",{children:"Signing in..."})]}):f.jsxs(f.Fragment,{children:[f.jsx("span",{children:"Sign in"}),f.jsx(ag,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform duration-200"})]})]})})]}),f.jsx("div",{className:"mt-8 text-center animate-slideUp delay-200",children:f.jsxs("p",{className:"text-sm text-stone-600",children:["Don't have an account?"," ",f.jsxs("a",{href:"/signup",className:"font-bold text-orange-600 hover:text-orange-500 transition-all duration-200 hover:underline relative group",children:["Sign up",f.jsx("div",{className:"absolute -bottom-0.5 left-0 w-0 h-0.5 bg-gradient-to-r from-orange-500 to-red-500 group-hover:w-full transition-all duration-300"})]})]})})]})})]})]})}function L5(){const[s,e]=k.useState(!1),[n,i]=k.useState(""),[o,u]=k.useState(""),[h,g]=k.useState(""),p=va(),y=async b=>{b.preventDefault(),e(!0);try{const N=(await Xx(sa,o,h)).user;await Wx(N,{displayName:n}),await ep(aa(Yn,"users",N.uid),{uid:N.uid,name:n,email:o,createdAt:new Date().toISOString(),favorites:[]}),p("/home")}catch(w){console.error("Signup Error:",w)}finally{e(!1)}};return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-white via-stone-50 to-stone-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8 font-sans relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-5",children:f.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,theme(colors.stone.400)_1px,transparent_0)] [background-size:24px_24px]"})}),f.jsx("div",{className:"absolute top-32 right-16 w-40 h-40 bg-gradient-to-br from-orange-200 to-red-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob"}),f.jsx("div",{className:"absolute bottom-32 left-16 w-40 h-40 bg-gradient-to-br from-pink-200 to-purple-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000"}),f.jsxs("div",{className:"relative z-10",children:[f.jsx("div",{className:"absolute top-6 left-6",children:f.jsxs("a",{href:"/",className:"flex items-center gap-2 text-stone-500 hover:text-orange-600 transition-all duration-200 text-sm font-medium group hover:scale-105",children:[f.jsx(kd,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform duration-200"}),"Back to Home"]})}),f.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[f.jsxs("div",{className:"flex justify-center items-center gap-3 mb-6 animate-fadeIn",children:[f.jsxs("div",{className:"relative w-12 h-12 bg-gradient-to-br from-orange-500 via-orange-600 to-red-600 rounded-2xl flex items-center justify-center shadow-2xl shadow-orange-200/50 overflow-hidden group",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),f.jsx(dt,{className:"w-7 h-7 text-white relative z-10"})]}),f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"text-3xl font-bold gradient-text tracking-tight",children:"CookMate"}),f.jsx(uu,{className:"absolute -top-1 -right-2 w-4 h-4 text-yellow-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]}),f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h2",{className:"text-4xl font-extrabold text-stone-900 tracking-tight mb-2",children:"Create your account"}),f.jsx("p",{className:"text-stone-600",children:"Start your AI-powered cooking journey today"})]})]}),f.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:f.jsxs("div",{className:"bg-gradient-to-b from-white/80 via-stone-50/80 to-stone-100/80 backdrop-blur-xl py-10 px-8 shadow-2xl shadow-stone-900/10 border border-stone-200/60 sm:rounded-3xl sm:px-12 relative overflow-hidden group transition-all duration-500 ease-out hover:shadow-3xl hover:shadow-stone-900/15",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"}),f.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-orange-400 via-red-500 to-pink-500 rounded-t-3xl"}),f.jsxs("form",{className:"space-y-6",onSubmit:y,children:[f.jsxs("div",{className:"space-y-5",children:[f.jsxs("div",{className:"animate-slideUp",children:[f.jsx("label",{className:"block text-xs font-bold text-stone-600 uppercase tracking-wider mb-2",children:"Full Name"}),f.jsxs("div",{className:"relative group",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:f.jsx(l5,{className:"h-5 w-5 text-stone-400 group-focus-within:text-orange-500 transition-colors duration-200"})}),f.jsx("input",{type:"text",required:!0,value:n,onChange:b=>i(b.target.value),className:"block w-full pl-12 pr-4 py-3.5 border border-stone-200/60 rounded-2xl leading-6 bg-white/50 backdrop-blur-sm text-stone-900 placeholder-stone-400 focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 transition-all duration-300 hover:border-stone-300 focus:scale-[1.02] hover:scale-[1.01]",placeholder:"John Doe"})]})]}),f.jsxs("div",{className:"animate-slideUp delay-75",children:[f.jsx("label",{className:"block text-xs font-bold text-stone-600 uppercase tracking-wider mb-2",children:"Email address"}),f.jsxs("div",{className:"relative group",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:f.jsx(tE,{className:"h-5 w-5 text-stone-400 group-focus-within:text-orange-500 transition-colors duration-200"})}),f.jsx("input",{type:"email",required:!0,value:o,onChange:b=>u(b.target.value),className:"block w-full pl-12 pr-4 py-3.5 border border-stone-200/60 rounded-2xl leading-6 bg-white/50 backdrop-blur-sm text-stone-900 placeholder-stone-400 focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 transition-all duration-300 hover:border-stone-300 focus:scale-[1.02] hover:scale-[1.01]",placeholder:"you@example.com"})]})]}),f.jsxs("div",{className:"animate-slideUp delay-150",children:[f.jsx("label",{className:"block text-xs font-bold text-stone-600 uppercase tracking-wider mb-2",children:"Password"}),f.jsxs("div",{className:"relative group",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:f.jsx(og,{className:"h-5 w-5 text-stone-400 group-focus-within:text-orange-500 transition-colors duration-200"})}),f.jsx("input",{type:"password",required:!0,value:h,onChange:b=>g(b.target.value),className:"block w-full pl-12 pr-4 py-3.5 border border-stone-200/60 rounded-2xl leading-6 bg-white/50 backdrop-blur-sm text-stone-900 placeholder-stone-400 focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 transition-all duration-300 hover:border-stone-300 focus:scale-[1.02] hover:scale-[1.01]",placeholder:""})]})]})]}),f.jsx("div",{className:"animate-slideUp delay-200",children:f.jsxs("button",{type:"submit",disabled:s,className:"group relative w-full flex justify-center items-center gap-3 py-4 px-6 border border-transparent rounded-2xl shadow-2xl shadow-orange-200/50 text-white font-bold text-base bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-all duration-300 transform hover:scale-[1.02] hover:shadow-3xl hover:shadow-orange-300/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),s?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),f.jsx("span",{children:"Creating account..."})]}):f.jsxs(f.Fragment,{children:[f.jsx("span",{children:"Create account"}),f.jsx(ag,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform duration-200"})]})]})})]}),f.jsx("div",{className:"mt-8 text-center animate-slideUp delay-250",children:f.jsxs("p",{className:"text-sm text-stone-600",children:["Already have an account?"," ",f.jsxs("a",{href:"/signin",className:"font-bold text-orange-600 hover:text-orange-500 transition-all duration-200 hover:underline relative group",children:["Log in",f.jsx("div",{className:"absolute -bottom-0.5 left-0 w-0 h-0.5 bg-gradient-to-r from-orange-500 to-red-500 group-hover:w-full transition-all duration-300"})]})]})})]})})]})]})}function U5(){return f.jsx(Zw,{children:f.jsx(nj,{children:f.jsx("div",{className:"App",children:f.jsxs(kI,{children:[f.jsx(ao,{path:"/",element:f.jsx(h5,{})}),f.jsx(ao,{path:"/home",element:f.jsx(D5,{})}),f.jsx(ao,{path:"/collections",element:f.jsx(Nm,{requireAuth:!0,children:f.jsx(M5,{})})}),f.jsx(ao,{path:"/signin",element:f.jsx(Nm,{requireAuth:!1,children:f.jsx(V5,{})})}),f.jsx(ao,{path:"/signup",element:f.jsx(Nm,{requireAuth:!1,children:f.jsx(L5,{})})})]})})})})}qC.createRoot(document.getElementById("root")).render(f.jsx(k.StrictMode,{children:f.jsx(Zw,{children:f.jsx(U5,{})})}));
